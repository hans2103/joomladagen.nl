!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Cropper=t()}(this,function(){"use strict";var a={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=/^data:.*,/,i=/([a-z\d])([A-Z])/g,n=/^(https?:)\/\/([^:/?#]+):?(\d*)/i,l=/\s+/,o=/^(width|height|left|top|marginLeft|marginTop)$/,r=/^\s+(.*)\s+$/,e="undefined"!=typeof window?window.navigator:null,u=e&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(e.userAgent),c=Object.prototype,d=c.toString,h=c.hasOwnProperty,p=String.fromCharCode;function f(e){return d.call(e).slice(8,-1).toLowerCase()}function w(e){return"number"==typeof e&&!isNaN(e)}function m(e){return void 0===e}function g(e){return"object"===(void 0===e?"undefined":t(e))&&null!==e}function I(e){if(!g(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&h.call(i,"isPrototypeOf")}catch(e){return!1}}function v(e){return"function"===f(e)}function y(e){return"string"==typeof e&&(e=e.trim?e.trim():e.replace(r,"$1")),e}function j(t,i){if(t&&v(i)){var e=void 0;if(a=t,(Array.isArray?Array.isArray(a):"array"===f(a))||w(t.length)){var n=t.length;for(e=0;e<n&&!1!==i.call(t,t[e],e,t);e+=1);}else g(t)&&Object.keys(t).forEach(function(e){i.call(t,t[e],e,t)})}var a;return t}function T(i){for(var e=arguments.length,t=Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];if(g(i)&&0<t.length){if(Object.assign)return Object.assign.apply(Object,[i].concat(t));t.forEach(function(t){g(t)&&Object.keys(t).forEach(function(e){i[e]=t[e]})})}return i}function b(n,a){for(var e=arguments.length,o=Array(2<e?e-2:0),t=2;t<e;t++)o[t-2]=arguments[t];return function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.apply(a,o.concat(t))}}function C(e,t){var i=e.style;j(t,function(e,t){o.test(t)&&w(e)&&(e+="px"),i[t]=e})}function _(e,t){if(t)if(w(e.length))j(e,function(e){_(e,t)});else if(e.classList)e.classList.add(t);else{var i=y(e.className);i?i.indexOf(t)<0&&(e.className=i+" "+t):e.className=t}}function O(e,t){t&&(w(e.length)?j(e,function(e){O(e,t)}):e.classList?e.classList.remove(t):0<=e.className.indexOf(t)&&(e.className=e.className.replace(t,"")))}function E(e,t,i){t&&(w(e.length)?j(e,function(e){E(e,t,i)}):i?_(e,t):O(e,t))}function x(e){return e.replace(i,"$1-$2").toLowerCase()}function S(e,t){return g(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+x(t))}function k(e,t,i){g(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-"+x(t),i)}function A(t,i){if(g(t[i]))delete t[i];else if(t.dataset)try{delete t.dataset[i]}catch(e){t.dataset[i]=null}else t.removeAttribute("data-"+x(i))}function L(t,e,i){var n=y(e).split(l);1<n.length?j(n,function(e){L(t,e,i)}):t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)}function M(n,a,o,e){var t=y(a).split(l),r=o;1<t.length?j(t,function(e){M(n,e,o)}):(e&&(o=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return L(n,a,o),r.apply(n,t)}),n.addEventListener?n.addEventListener(a,o,!1):n.attachEvent&&n.attachEvent("on"+a,o))}function D(e,t,i){if(e.dispatchEvent){var n=void 0;return v(Event)&&v(CustomEvent)?n=m(i)?new Event(t,{bubbles:!0,cancelable:!0}):new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):m(i)?(n=document.createEvent("Event")).initEvent(t,!0,!0):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),e.dispatchEvent(n)}return!e.fireEvent||e.fireEvent("on"+t)}function Q(e){var t=e||window.event;if(t.target||(t.target=t.srcElement||document),!w(t.pageX)&&w(t.clientX)){var i=e.target.ownerDocument||document,n=i.documentElement,a=i.body;t.pageX=t.clientX+((n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0)),t.pageY=t.clientY+((n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0))}return t}function B(e){var t=document.documentElement,i=e.getBoundingClientRect();return{left:i.left+((window.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0)),top:i.top+((window.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0))}}function N(e,t){return e.getElementsByTagName(t)}function P(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function F(e){return document.createElement(e)}function H(e,t){e.appendChild(t)}function R(e){e.parentNode&&e.parentNode.removeChild(e)}function W(e){var t=e.match(n);return t&&(t[1]!==location.protocol||t[2]!==location.hostname||t[3]!==location.port)}function z(e){var t="timestamp="+(new Date).getTime();return e+(-1===e.indexOf("?")?"?":"&")+t}function Y(e){var t=[],i=e.translateX,n=e.translateY,a=e.rotate,o=e.scaleX,r=e.scaleY;w(i)&&0!==i&&t.push("translateX("+i+"px)"),w(n)&&0!==n&&t.push("translateY("+n+"px)"),w(a)&&0!==a&&t.push("rotate("+a+"deg)"),w(o)&&1!==o&&t.push("scaleX("+o+")"),w(r)&&1!==r&&t.push("scaleY("+r+")");var s=t.length?t.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function X(e,t){var i=Math.abs(e.degree)%180,n=(90<i?180-i:i)*Math.PI/180,a=Math.sin(n),o=Math.cos(n),r=e.width,s=e.height,l=e.aspectRatio,c=void 0,d=void 0;return t?d=(c=r/(o+a/l))/l:(c=r*o+s*a,d=r*a+s*o),{width:c,height:d}}function V(e,t,i){var n=F("canvas"),a=n.getContext("2d"),o=0,r=0,s=t.naturalWidth,l=t.naturalHeight,c=t.rotate,d=t.scaleX,h=t.scaleY,u=w(d)&&w(h)&&(1!==d||1!==h),p=w(c)&&0!==c,f=p||u,m=s*Math.abs(d||1),g=l*Math.abs(h||1),v=void 0,y=void 0,b=void 0;return u&&(v=m/2,y=g/2),p&&(v=(m=(b=X({width:m,height:g,degree:c})).width)/2,y=(g=b.height)/2),n.width=m,n.height=g,i.fillColor&&(a.fillStyle=i.fillColor,a.fillRect(0,0,m,g)),f&&(o=-s/2,r=-l/2,a.save(),a.translate(v,y)),p&&a.rotate(c*Math.PI/180),u&&a.scale(d,h),a.imageSmoothingEnabled=!!i.imageSmoothingEnabled,i.imageSmoothingQuality&&(a.imageSmoothingQuality=i.imageSmoothingQuality),a.drawImage(e,Math.floor(o),Math.floor(r),Math.floor(s),Math.floor(l)),f&&a.restore(),n}function U(e){var t=new DataView(e),i=t.byteLength,n=void 0,a=void 0,o=void 0,r=void 0,s=void 0,l=void 0,c=void 0,d=void 0,h=void 0;if(255===t.getUint8(0)&&216===t.getUint8(1))for(d=2;d<i;){if(255===t.getUint8(d)&&225===t.getUint8(d+1)){l=d;break}d+=1}if(l&&(a=l+10,"Exif"===function(e,t,i){var n="",a=t;for(i+=t;a<i;a+=1)n+=p(e.getUint8(a));return n}(t,l+4,4)&&((r=18761===(s=t.getUint16(a)))||19789===s)&&42===t.getUint16(a+2,r)&&8<=(o=t.getUint32(a+4,r))&&(c=a+o)),c)for(i=t.getUint16(c,r),h=0;h<i;h+=1)if(d=c+12*h+2,274===t.getUint16(d,r)){d+=8,n=t.getUint16(d,r),u&&t.setUint16(d,1,r);break}return n}var q={render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e=this,t=e.options,i=e.element,n=e.container,a=e.cropper,o="cropper-hidden";_(a,o),O(i,o);var r={width:Math.max(n.offsetWidth,Number(t.minContainerWidth)||200),height:Math.max(n.offsetHeight,Number(t.minContainerHeight)||100)};C(a,{width:(e.containerData=r).width,height:r.height}),_(i,o),O(a,o)},initCanvas:function(){var e=this,t=e.options.viewMode,i=e.containerData,n=e.imageData,a=Math.abs(n.rotate)%180==90,o=a?n.naturalHeight:n.naturalWidth,r=a?n.naturalWidth:n.naturalHeight,s=o/r,l=i.width,c=i.height;i.height*s>i.width?3===t?l=i.height*s:c=i.width/s:3===t?c=i.width/s:l=i.height*s;var d={naturalWidth:o,naturalHeight:r,aspectRatio:s,width:l,height:c};d.left=(i.width-l)/2,d.top=(i.height-c)/2,d.oldLeft=d.left,d.oldTop=d.top,e.canvasData=d,e.limited=1===t||2===t,e.limitCanvas(!0,!0),e.initialImageData=T({},n),e.initialCanvasData=T({},d)},limitCanvas:function(e,t){var i=this,n=i.options,a=n.viewMode,o=i.containerData,r=i.canvasData,s=r.aspectRatio,l=i.cropBoxData,c=i.cropped&&l;if(e){var d=Number(n.minCanvasWidth)||0,h=Number(n.minCanvasHeight)||0;1<a?(d=Math.max(d,o.width),h=Math.max(h,o.height),3===a&&(d<h*s?d=h*s:h=d/s)):0<a&&(d?d=Math.max(d,c?l.width:0):h?h=Math.max(h,c?l.height:0):c&&((d=l.width)<(h=l.height)*s?d=h*s:h=d/s)),d&&h?d<h*s?h=d/s:d=h*s:d?h=d/s:h&&(d=h*s),r.minWidth=d,r.minHeight=h,r.maxWidth=1/0,r.maxHeight=1/0}if(t)if(a){var u=o.width-r.width,p=o.height-r.height;r.minLeft=Math.min(0,u),r.minTop=Math.min(0,p),r.maxLeft=Math.max(0,u),r.maxTop=Math.max(0,p),c&&i.limited&&(r.minLeft=Math.min(l.left,l.left+(l.width-r.width)),r.minTop=Math.min(l.top,l.top+(l.height-r.height)),r.maxLeft=l.left,r.maxTop=l.top,2===a&&(r.width>=o.width&&(r.minLeft=Math.min(0,u),r.maxLeft=Math.max(0,u)),r.height>=o.height&&(r.minTop=Math.min(0,p),r.maxTop=Math.max(0,p))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=o.width,r.maxTop=o.height},renderCanvas:function(e){var t=this,i=t.canvasData,n=t.imageData,a=n.rotate;if(t.rotated){t.rotated=!1;var o=X({width:n.width,height:n.height,degree:a}),r=o.width/o.height,s=1===n.aspectRatio;if(s||r!==i.aspectRatio){if(i.left-=(o.width-i.width)/2,i.top-=(o.height-i.height)/2,i.width=o.width,i.height=o.height,i.aspectRatio=r,i.naturalWidth=n.naturalWidth,i.naturalHeight=n.naturalHeight,s&&a%90||a%180){var l=X({width:n.naturalWidth,height:n.naturalHeight,degree:a});i.naturalWidth=l.width,i.naturalHeight=l.height}t.limitCanvas(!0,!1)}}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),t.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,C(t.canvas,T({width:i.width,height:i.height},Y({translateX:i.left,translateY:i.top}))),t.renderImage(),t.cropped&&t.limited&&t.limitCropBox(!0,!0),e&&t.output()},renderImage:function(e){var t=this.canvasData,i=this.imageData,n=void 0,a=void 0,o=void 0,r=void 0;i.rotate&&(n={width:o=(a=X({width:t.width,height:t.height,degree:i.rotate,aspectRatio:i.aspectRatio},!0)).width,height:r=a.height,left:(t.width-o)/2,top:(t.height-r)/2}),T(i,n||{width:t.width,height:t.height,left:0,top:0}),C(this.image,T({width:i.width,height:i.height},Y(T({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this,t=e.options,i=t.aspectRatio,n=Number(t.autoCropArea)||.8,a=e.canvasData,o={width:a.width,height:a.height};i&&(a.height*i>a.width?o.height=o.width/i:o.width=o.height*i),e.cropBoxData=o,e.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*n),o.height=Math.max(o.minHeight,o.height*n),o.left=a.left+(a.width-o.width)/2,o.top=a.top+(a.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,e.initialCropBoxData=T({},o)},limitCropBox:function(e,t){var i=this,n=i.options,a=n.aspectRatio,o=i.containerData,r=i.canvasData,s=i.cropBoxData,l=i.limited;if(e){var c=Number(n.minCropBoxWidth)||0,d=Number(n.minCropBoxHeight)||0,h=Math.min(o.width,l?r.width:o.width),u=Math.min(o.height,l?r.height:o.height);c=Math.min(c,o.width),d=Math.min(d,o.height),a&&(c&&d?c<d*a?d=c/a:c=d*a:c?d=c/a:d&&(c=d*a),h<u*a?u=h/a:h=u*a),s.minWidth=Math.min(c,h),s.minHeight=Math.min(d,u),s.maxWidth=h,s.maxHeight=u}t&&(l?(s.minLeft=Math.max(0,r.left),s.minTop=Math.max(0,r.top),s.maxLeft=Math.min(o.width,r.left+r.width)-s.width,s.maxTop=Math.min(o.height,r.top+r.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=o.width-s.width,s.maxTop=o.height-s.height))},renderCropBox:function(){var e=this,t=e.options,i=e.containerData,n=e.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),e.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&k(e.face,"action",n.width===i.width&&n.height===i.height?"move":"all"),C(e.cropBox,T({width:n.width,height:n.height},Y({translateX:n.left,translateY:n.top}))),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){this.preview(),this.complete&&D(this.element,"crop",this.getData())}},G="preview",K={initPreview:function(){var e=this,t=e.options.preview,i=F("img"),n=e.crossOrigin,a=n?e.crossOriginUrl:e.url;if(n&&(i.crossOrigin=n),i.src=a,H(e.viewBox,i),e.image2=i,t){var o=t.querySelector?[t]:document.querySelectorAll(t);j(e.previews=o,function(e){var t=F("img");k(e,G,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),n&&(t.crossOrigin=n),t.src=a,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e),H(e,t)})}},resetPreview:function(){j(this.previews,function(e){var t=S(e,G);C(e,{width:t.width,height:t.height}),e.innerHTML=t.html,A(e,G)})},preview:function(){var e=this,s=e.imageData,t=e.canvasData,i=e.cropBoxData,l=i.width,c=i.height,d=s.width,h=s.height,u=i.left-t.left-s.left,p=i.top-t.top-s.top;e.cropped&&!e.disabled&&(C(e.image2,T({width:d,height:h},Y(T({translateX:-u,translateY:-p},s)))),j(e.previews,function(e){var t=S(e,G),i=t.width,n=t.height,a=i,o=n,r=1;l&&(o=c*(r=i/l)),c&&n<o&&(a=l*(r=n/c),o=n),C(e,{width:a,height:o}),C(N(e,"img")[0],T({width:d*r,height:h*r},Y(T({translateX:-u*r,translateY:-p*r},s))))}))}},J="undefined"!=typeof window?window.PointerEvent:null,$=J?"pointerdown":"touchstart mousedown",Z=J?"pointermove":"touchmove mousemove",ee=J?" pointerup pointercancel":"touchend touchcancel mouseup",te="wheel mousewheel DOMMouseScroll",ie="dblclick",ne="cropstart",ae="cropmove",oe="cropend",re={bind:function(){var e=this,t=e.options,i=e.element,n=e.cropper;v(t.cropstart)&&M(i,ne,t.cropstart),v(t.cropmove)&&M(i,ae,t.cropmove),v(t.cropend)&&M(i,oe,t.cropend),v(t.crop)&&M(i,"crop",t.crop),v(t.zoom)&&M(i,"zoom",t.zoom),M(n,$,e.onCropStart=b(e.cropStart,e)),t.zoomable&&t.zoomOnWheel&&M(n,te,e.onWheel=b(e.wheel,e)),t.toggleDragModeOnDblclick&&M(n,ie,e.onDblclick=b(e.dblclick,e)),M(document,Z,e.onCropMove=b(e.cropMove,e)),M(document,ee,e.onCropEnd=b(e.cropEnd,e)),t.responsive&&M(window,"resize",e.onResize=b(e.resize,e))},unbind:function(){var e=this,t=e.options,i=e.element,n=e.cropper;v(t.cropstart)&&L(i,ne,t.cropstart),v(t.cropmove)&&L(i,ae,t.cropmove),v(t.cropend)&&L(i,oe,t.cropend),v(t.crop)&&L(i,"crop",t.crop),v(t.zoom)&&L(i,"zoom",t.zoom),L(n,$,e.onCropStart),t.zoomable&&t.zoomOnWheel&&L(n,te,e.onWheel),t.toggleDragModeOnDblclick&&L(n,ie,e.onDblclick),L(document,Z,e.onCropMove),L(document,ee,e.onCropEnd),t.responsive&&L(window,"resize",e.onResize)}},se=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;function le(e,t){var i=e.pageX,n=e.pageY,a={endX:i,endY:n};return t?a:T({startX:i,startY:n},a)}var ce={resize:function(){var e=this,t=e.options,i=e.container,n=e.containerData,a=Number(t.minContainerWidth)||200,o=Number(t.minContainerHeight)||100;if(!e.disabled&&n.width!==a&&n.height!==o){var r=i.offsetWidth/n.width;if(1!==r||i.offsetHeight!==n.height){var s=void 0,l=void 0;t.restore&&(s=e.getCanvasData(),l=e.getCropBoxData()),e.render(),t.restore&&(e.setCanvasData(j(s,function(e,t){s[t]=e*r})),e.setCropBoxData(j(l,function(e,t){l[t]=e*r})))}}},dblclick:function(){var e,t;this.disabled||"none"===this.options.dragMode||this.setDragMode((e=this.dragBox,t="cropper-crop",(e.classList?e.classList.contains(t):-1<e.className.indexOf(t))?"move":"crop"))},wheel:function(e){var t=this,i=Q(e),n=Number(t.options.wheelZoomRatio)||.1,a=1;t.disabled||(i.preventDefault(),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),i.deltaY?a=0<i.deltaY?1:-1:i.wheelDelta?a=-i.wheelDelta/120:i.detail&&(a=0<i.detail?1:-1),t.zoom(-a*n,i)))},cropStart:function(e){var t=this;if(!t.disabled){var i=t.options,n=t.pointers,a=Q(e),o=void 0;a.changedTouches?j(a.changedTouches,function(e){n[e.identifier]=le(e)}):n[a.pointerId||0]=le(a),o=1<Object.keys(n).length&&i.zoomable&&i.zoomOnTouch?"zoom":S(a.target,"action"),se.test(o)&&!1!==D(t.element,"cropstart",{originalEvent:a,action:o})&&(a.preventDefault(),t.action=o,t.cropping=!1,"crop"===o&&(t.cropping=!0,_(t.dragBox,"cropper-modal")))}},cropMove:function(e){var t=this,i=t.action;if(!t.disabled&&i){var n=t.pointers,a=Q(e);a.preventDefault(),!1!==D(t.element,"cropmove",{originalEvent:a,action:i})&&(a.changedTouches?j(a.changedTouches,function(e){T(n[e.identifier],le(e,!0))}):T(n[a.pointerId||0],le(a,!0)),t.change(a))}},cropEnd:function(e){var t=this;if(!t.disabled){var i=t.action,n=t.pointers,a=Q(e);a.changedTouches?j(a.changedTouches,function(e){delete n[e.identifier]}):delete n[a.pointerId||0],i&&(a.preventDefault(),Object.keys(n).length||(t.action=""),t.cropping&&(t.cropping=!1,E(t.dragBox,"cropper-modal",t.cropped&&this.options.modal)),D(t.element,"cropend",{originalEvent:a,action:i}))}}},de="se",he="sw",ue="ne",pe="nw";var fe={change:function(e){var t=this,i=t.options,n=t.containerData,a=t.canvasData,o=t.cropBoxData,r=i.aspectRatio,s=t.action,l=o.width,c=o.height,d=o.left,h=o.top,u=d+l,p=h+c,f=0,m=0,g=n.width,v=n.height,y=!0,b=void 0;!r&&e.shiftKey&&(r=l&&c?l/c:1),t.limited&&(f=o.minLeft,m=o.minTop,g=f+Math.min(n.width,a.width,a.left+a.width),v=m+Math.min(n.height,a.height,a.top+a.height));var w,C,_,E=t.pointers,x=E[Object.keys(E)[0]],S={x:x.endX-x.startX,y:x.endY-x.startY};switch(s){case"all":d+=S.x,h+=S.y;break;case"e":if(0<=S.x&&(g<=u||r&&(h<=m||v<=p))){y=!1;break}u+S.x>g&&(S.x=g-u),l+=S.x,r&&(c=l/r,h-=S.x/r/2),l<0&&(s="w",l=0);break;case"n":if(S.y<=0&&(h<=m||r&&(d<=f||g<=u))){y=!1;break}h+S.y<m&&(S.y=m-h),c-=S.y,h+=S.y,r&&(l=c*r,d+=S.y*r/2),c<0&&(s="s",c=0);break;case"w":if(S.x<=0&&(d<=f||r&&(h<=m||v<=p))){y=!1;break}d+S.x<f&&(S.x=f-d),l-=S.x,d+=S.x,r&&(c=l/r,h+=S.x/r/2),l<0&&(s="e",l=0);break;case"s":if(0<=S.y&&(v<=p||r&&(d<=f||g<=u))){y=!1;break}p+S.y>v&&(S.y=v-p),c+=S.y,r&&(l=c*r,d-=S.y*r/2),c<0&&(s="n",c=0);break;case ue:if(r){if(S.y<=0&&(h<=m||g<=u)){y=!1;break}c-=S.y,h+=S.y,l=c*r}else 0<=S.x?u<g?l+=S.x:S.y<=0&&h<=m&&(y=!1):l+=S.x,S.y<=0?m<h&&(c-=S.y,h+=S.y):(c-=S.y,h+=S.y);l<0&&c<0?(s=he,l=c=0):l<0?(s=pe,l=0):c<0&&(s=de,c=0);break;case pe:if(r){if(S.y<=0&&(h<=m||d<=f)){y=!1;break}c-=S.y,h+=S.y,l=c*r,d+=S.y*r}else S.x<=0?f<d?(l-=S.x,d+=S.x):S.y<=0&&h<=m&&(y=!1):(l-=S.x,d+=S.x),S.y<=0?m<h&&(c-=S.y,h+=S.y):(c-=S.y,h+=S.y);l<0&&c<0?(s=de,l=c=0):l<0?(s=ue,l=0):c<0&&(s=he,c=0);break;case he:if(r){if(S.x<=0&&(d<=f||v<=p)){y=!1;break}l-=S.x,d+=S.x,c=l/r}else S.x<=0?f<d?(l-=S.x,d+=S.x):0<=S.y&&v<=p&&(y=!1):(l-=S.x,d+=S.x),0<=S.y?p<v&&(c+=S.y):c+=S.y;l<0&&c<0?(s=ue,l=c=0):l<0?(s=de,l=0):c<0&&(s=pe,c=0);break;case de:if(r){if(0<=S.x&&(g<=u||v<=p)){y=!1;break}c=(l+=S.x)/r}else 0<=S.x?u<g?l+=S.x:0<=S.y&&v<=p&&(y=!1):l+=S.x,0<=S.y?p<v&&(c+=S.y):c+=S.y;l<0&&c<0?(s=pe,l=c=0):l<0?(s=he,l=0):c<0&&(s=ue,c=0);break;case"move":t.move(S.x,S.y),y=!1;break;case"zoom":t.zoom((C=T({},w=E),_=[],j(w,function(s,e){delete C[e],j(C,function(e){var t=Math.abs(s.startX-e.startX),i=Math.abs(s.startY-e.startY),n=Math.abs(s.endX-e.endX),a=Math.abs(s.endY-e.endY),o=Math.sqrt(t*t+i*i),r=(Math.sqrt(n*n+a*a)-o)/o;_.push(r)})}),_.sort(function(e,t){return Math.abs(e)<Math.abs(t)}),_[0]),e),y=!1;break;case"crop":if(!S.x||!S.y){y=!1;break}b=B(t.cropper),d=x.startX-b.left,h=x.startY-b.top,l=o.minWidth,c=o.minHeight,0<S.x?s=0<S.y?de:ue:S.x<0&&(d-=l,s=0<S.y?he:pe),S.y<0&&(h-=c),t.cropped||(O(t.cropBox,"cropper-hidden"),t.cropped=!0,t.limited&&t.limitCropBox(!0,!0))}y&&(o.width=l,o.height=c,o.left=d,o.top=h,t.action=s,t.renderCropBox()),j(E,function(e){e.startX=e.endX,e.startY=e.endY})}};var me={crop:function(){var e=this;return e.ready&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&_(e.dragBox,"cropper-modal"),O(e.cropBox,"cropper-hidden")),e.setCropBoxData(e.initialCropBoxData)),e},reset:function(){var e=this;return e.ready&&!e.disabled&&(e.imageData=T({},e.initialImageData),e.canvasData=T({},e.initialCanvasData),e.cropBoxData=T({},e.initialCropBoxData),e.renderCanvas(),e.cropped&&e.renderCropBox()),e},clear:function(){var e=this;return e.cropped&&!e.disabled&&(T(e.cropBoxData,{left:0,top:0,width:0,height:0}),e.cropped=!1,e.renderCropBox(),e.limitCanvas(!0,!0),e.renderCanvas(),O(e.dragBox,"cropper-modal"),_(e.cropBox,"cropper-hidden")),e},replace:function(t,e){var i=this;return!i.disabled&&t&&(i.isImg&&(i.element.src=t),e?(i.url=t,i.image.src=t,i.ready&&(i.image2.src=t,j(i.previews,function(e){N(e,"img")[0].src=t}))):(i.isImg&&(i.replaced=!0),i.options.data=null,i.load(t))),i},enable:function(){return this.ready&&(this.disabled=!1,O(this.cropper,"cropper-disabled")),this},disable:function(){return this.ready&&(this.disabled=!0,_(this.cropper,"cropper-disabled")),this},destroy:function(){var e=this,t=e.element,i=e.image;return e.loaded?(e.isImg&&e.replaced&&(t.src=e.originalUrl),e.unbuild(),O(t,"cropper-hidden")):e.isImg?L(t,"load",e.onStart):i&&R(i),A(t,"cropper"),e},move:function(e,t){var i=this.canvasData;return this.moveTo(m(e)?e:i.left+Number(e),m(t)?t:i.top+Number(t))},moveTo:function(e,t){var i=this,n=i.canvasData,a=!1;return m(t)&&(t=e),e=Number(e),t=Number(t),i.ready&&!i.disabled&&i.options.movable&&(w(e)&&(n.left=e,a=!0),w(t)&&(n.top=t,a=!0),a&&i.renderCanvas(!0)),i},zoom:function(e,t){var i=this.canvasData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(i.width*e/i.naturalWidth,t)},zoomTo:function(e,t){var n,a,o,i=this,r=i.options,s=i.canvasData,l=s.width,c=s.height,d=s.naturalWidth,h=s.naturalHeight;if(0<=(e=Number(e))&&i.ready&&!i.disabled&&r.zoomable){var u=d*e,p=h*e;if(!1===D(i.element,"zoom",{originalEvent:t,oldRatio:l/d,ratio:u/d}))return i;if(t){var f=i.pointers,m=B(i.cropper),g=f&&Object.keys(f).length?(o=a=n=0,j(f,function(e){var t=e.startX,i=e.startY;n+=t,a+=i,o+=1}),{pageX:n/=o,pageY:a/=o}):{pageX:t.pageX,pageY:t.pageY};s.left-=(u-l)*((g.pageX-m.left-s.left)/l),s.top-=(p-c)*((g.pageY-m.top-s.top)/c)}else s.left-=(u-l)/2,s.top-=(p-c)/2;s.width=u,s.height=p,i.renderCanvas(!0)}return i},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){var t=this;return w(e=Number(e))&&t.ready&&!t.disabled&&t.options.rotatable&&(t.imageData.rotate=e%360,t.rotated=!0,t.renderCanvas(!0)),t},scale:function(e,t){var i=this,n=i.imageData,a=!1;return m(t)&&(t=e),e=Number(e),t=Number(t),i.ready&&!i.disabled&&i.options.scalable&&(w(e)&&(n.scaleX=e,a=!0),w(t)&&(n.scaleY=t,a=!0),a&&i.renderImage(!0)),i},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,w(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(w(t)?t:1,e)},getData:function(i){var e=this,t=e.options,n=e.imageData,a=e.canvasData,o=e.cropBoxData,r=void 0,s=void 0;return e.ready&&e.cropped?(s={x:o.left-a.left,y:o.top-a.top,width:o.width,height:o.height},r=n.width/n.naturalWidth,j(s,function(e,t){e/=r,s[t]=i?Math.round(e):e})):s={x:0,y:0,width:0,height:0},t.rotatable&&(s.rotate=n.rotate||0),t.scalable&&(s.scaleX=n.scaleX||1,s.scaleY=n.scaleY||1),s},setData:function(e){var t=this,i=t.options,n=t.imageData,a=t.canvasData,o={},r=void 0,s=void 0,l=void 0;return v(e)&&(e=e.call(t.element)),t.ready&&!t.disabled&&I(e)&&(i.rotatable&&w(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,r=!0,t.rotated=r),i.scalable&&(w(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,s=!0),w(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,s=!0)),r?t.renderCanvas():s&&t.renderImage(),l=n.width/n.naturalWidth,w(e.x)&&(o.left=e.x*l+a.left),w(e.y)&&(o.top=e.y*l+a.top),w(e.width)&&(o.width=e.width*l),w(e.height)&&(o.height=e.height*l),t.setCropBoxData(o)),t},getContainerData:function(){return this.ready?this.containerData:{}},getImageData:function(){return this.loaded?this.imageData:{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&j(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(e){var t=this,i=t.canvasData,n=i.aspectRatio;return v(e)&&(e=e.call(t.element)),t.ready&&!t.disabled&&I(e)&&(w(e.left)&&(i.left=e.left),w(e.top)&&(i.top=e.top),w(e.width)?(i.width=e.width,i.height=e.width/n):w(e.height)&&(i.height=e.height,i.width=e.height*n),t.renderCanvas(!0)),t},getCropBoxData:function(){var e=this.cropBoxData,t=void 0;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(e){var t=this,i=t.cropBoxData,n=t.options.aspectRatio,a=void 0,o=void 0;return v(e)&&(e=e.call(t.element)),t.ready&&t.cropped&&!t.disabled&&I(e)&&(w(e.left)&&(i.left=e.left),w(e.top)&&(i.top=e.top),w(e.width)&&e.width!==i.width&&(a=!0,i.width=e.width),w(e.height)&&e.height!==i.height&&(o=!0,i.height=e.height),n&&(a?i.height=i.width/n:o&&(i.width=i.height*n)),t.renderCropBox()),t},getCroppedCanvas:function(e){var t=this;if(!t.ready||!window.HTMLCanvasElement)return null;if(I(e)||(e={}),!t.cropped)return V(t.image,t.imageData,e);var i=t.getData(),n=i.width,a=i.height,o=n/a,r=void 0,s=void 0,l=void 0;I(e)&&(r=e.width,s=e.height,r?(s=r/o,l=r/n):s&&(r=s*o,l=s/a));var c=Math.floor(r||n),d=Math.floor(s||a),h=F("canvas"),u=h.getContext("2d");h.width=c,h.height=d,e.fillColor&&(u.fillStyle=e.fillColor,u.fillRect(0,0,c,d));var p,f,m,g,v,y,b,w,C,_,E,x,S,j=(p=V(t.image,t.imageData,e),f=p.width,m=p.height,g=t.canvasData,v=[p],y=i.x+g.naturalWidth*(Math.abs(i.scaleX||1)-1)/2,b=i.y+g.naturalHeight*(Math.abs(i.scaleY||1)-1)/2,S=x=E=_=C=w=void 0,y<=-n||f<y?x=_=w=y=0:y<=0?(_=-y,y=0,x=w=Math.min(f,n+y)):y<=f&&(_=0,x=w=Math.min(n,f-y)),w<=0||b<=-a||m<b?S=E=C=b=0:b<=0?(E=-b,b=0,S=C=Math.min(m,a+b)):b<=m&&(E=0,S=C=Math.min(a,m-b)),v.push(Math.floor(y),Math.floor(b),Math.floor(w),Math.floor(C)),l&&(_*=l,E*=l,x*=l,S*=l),0<x&&0<S&&v.push(Math.floor(_),Math.floor(E),Math.floor(x),Math.floor(S)),v);return u.imageSmoothingEnabled=!!e.imageSmoothingEnabled,e.imageSmoothingQuality&&(u.imageSmoothingQuality=e.imageSmoothingQuality),u.drawImage.apply(u,function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(j)),h},setAspectRatio:function(e){var t=this,i=t.options;return t.disabled||m(e)||(i.aspectRatio=Math.max(0,e)||NaN,t.ready&&(t.initCropBox(),t.cropped&&t.renderCropBox())),t},setDragMode:function(e){var t=this,i=t.options,n=t.dragBox,a=t.face,o=void 0,r=void 0;return t.loaded&&!t.disabled&&(o="crop"===e,r=i.movable&&"move"===e,k(n,"action",e=o||r?e:"none"),E(n,"cropper-crop",o),E(n,"cropper-move",r),i.cropBoxMovable||(k(a,"action",e),E(a,"cropper-crop",o),E(a,"cropper-move",r))),t}},ge=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();var ve="cropper",ye=ve+"-hidden",be="error",we="load",Ce=/^data:/,_e=/^data:image\/jpeg;base64,/,Ee=void 0,xe=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=this;i.element=e,i.options=T({},a,I(t)&&t),i.loaded=!1,i.ready=!1,i.complete=!1,i.rotated=!1,i.cropped=!1,i.disabled=!1,i.replaced=!1,i.limited=!1,i.wheeling=!1,i.isImg=!1,i.originalUrl="",i.canvasData=null,i.cropBoxData=null,i.previews=null,i.pointers={},i.init()}return ge(n,[{key:"init",value:function(){var e=this,t=e.element,i=t.tagName.toLowerCase(),n=void 0;if(!S(t,ve)){if(k(t,ve,e),"img"===i){if(e.isImg=!0,n=t.getAttribute("src"),!(e.originalUrl=n))return;n=t.src}else"canvas"===i&&window.HTMLCanvasElement&&(n=t.toDataURL());e.load(n)}}},{key:"load",value:function(e){var t=this,i=t.options,n=t.element;if(e)if(t.url=e,t.imageData={},i.checkOrientation&&window.ArrayBuffer)if(Ce.test(e))_e.test(e)?t.read(function(e){var t=e.replace(s,""),i=atob(t),n=i.length,a=new ArrayBuffer(n),o=new Uint8Array(a),r=void 0;for(r=0;r<n;r+=1)o[r]=i.charCodeAt(r);return a}(e)):t.clone();else{var a=new XMLHttpRequest;a.onerror=function(){t.clone()},a.onload=function(){t.read(a.response)},i.checkCrossOrigin&&W(e)&&n.crossOrigin&&(e=z(e)),a.open("get",e),a.responseType="arraybuffer",a.withCredentials="use-credentials"===n.crossOrigin,a.send()}else t.clone()}},{key:"read",value:function(e){var t=this.options,i=U(e),n=this.imageData,a=0,o=1,r=1;if(1<i)switch(this.url=function(e){var t=new Uint8Array(e),i=t.length,n="",a=void 0;for(a=0;a<i;a+=1)n+=p(t[a]);return"data:image/jpeg;base64,"+btoa(n)}(e),i){case 2:o=-1;break;case 3:a=-180;break;case 4:r=-1;break;case 5:a=90,r=-1;break;case 6:a=90;break;case 7:a=90,o=-1;break;case 8:a=-90}t.rotatable&&(n.rotate=a),t.scalable&&(n.scaleX=o,n.scaleY=r),this.clone()}},{key:"clone",value:function(){var e=this,t=e.element,i=e.url,n=void 0,a=void 0;e.options.checkCrossOrigin&&W(i)&&((n=t.crossOrigin)?a=i:(n="anonymous",a=z(i))),e.crossOrigin=n,e.crossOriginUrl=a;var o=F("img");n&&(o.crossOrigin=n),o.src=a||i;var r=b(e.start,e),s=b(e.stop,e);e.image=o,e.onStart=r,e.onStop=s,e.isImg?t.complete?e.start():M(t,we,r):(M(o,we,r),M(o,be,s),_(o,"cropper-hide"),t.parentNode.insertBefore(o,t.nextSibling))}},{key:"start",value:function(e){var i=this,t=i.isImg?i.element:i.image;e&&(L(t,we,i.onStart),L(t,be,i.onStop)),function(e,t){if(!e.naturalWidth||u){var i=F("img");i.onload=function(){t(this.width,this.height)},i.src=e.src}else t(e.naturalWidth,e.naturalHeight)}(t,function(e,t){T(i.imageData,{naturalWidth:e,naturalHeight:t,aspectRatio:e/t}),i.loaded=!0,i.build()})}},{key:"stop",value:function(){var e=this.image;L(e,we,this.onStart),L(e,be,this.onStop),R(e),this.image=null}},{key:"build",value:function(){var e=this,t=e.options,i=e.element,n=e.image;if(e.loaded){e.ready&&e.unbuild();var a=i.parentNode,o=F("div");o.innerHTML='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>';var r=P(o,"cropper-container")[0],s=P(r,"cropper-canvas")[0],l=P(r,"cropper-drag-box")[0],c=P(r,"cropper-crop-box")[0],d=P(c,"cropper-face")[0];e.container=a,e.cropper=r,e.canvas=s,e.dragBox=l,e.cropBox=c,e.viewBox=P(r,"cropper-view-box")[0],e.face=d,H(s,n),_(i,ye),a.insertBefore(r,i.nextSibling),e.isImg||O(n,"cropper-hide"),e.initPreview(),e.bind(),t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,e.cropped=t.autoCrop,t.autoCrop?t.modal&&_(l,"cropper-modal"):_(c,ye),t.guides||_(P(c,"cropper-dashed"),ye),t.center||_(P(c,"cropper-center"),ye),t.background&&_(r,"cropper-bg"),t.highlight||_(d,"cropper-invisible"),t.cropBoxMovable&&(_(d,"cropper-move"),k(d,"action","all")),t.cropBoxResizable||(_(P(c,"cropper-line"),ye),_(P(c,"cropper-point"),ye)),e.setDragMode(t.dragMode),e.render(),e.ready=!0,e.setData(t.data),e.completing=setTimeout(function(){v(t.ready)&&M(i,"ready",t.ready,!0),D(i,"ready"),D(i,"crop",e.getData()),e.complete=!0},0)}}},{key:"unbuild",value:function(){var e=this;e.ready&&(e.complete||clearTimeout(e.completing),e.ready=!1,e.complete=!1,e.initialImageData=null,e.initialCanvasData=null,e.initialCropBoxData=null,e.containerData=null,e.canvasData=null,e.cropBoxData=null,e.unbind(),e.resetPreview(),e.previews=null,e.viewBox=null,e.cropBox=null,e.dragBox=null,e.canvas=null,e.container=null,R(e.cropper),e.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=Ee,n}},{key:"setDefaults",value:function(e){T(a,I(e)&&e)}}]),n}();return T(xe.prototype,q),T(xe.prototype,K),T(xe.prototype,re),T(xe.prototype,ce),T(xe.prototype,fe),T(xe.prototype,me),"undefined"!=typeof window&&(Ee=window.Cropper,window.Cropper=xe),xe});"use strict";!function(I){var T="js-modal",O="data-modal-background-click",k="data-modal-prefix-class",A="data-modal-text",L="data-modal-content-id",M="data-modal-title",D="data-modal-close-text",Q="data-modal-close-title",B="data-modal-close-img",N="js-modal-close",P="js-modal-close",F="data-content-back-id",H="data-focus-back",R="js-modal-content",W="modal-title",z="js-modal-page",Y="js-modal",X="js-modal-overlay",V="Close modal",U="data-background-click",q="no-scroll",G="aria-hidden",K=function(e){return I.getElementById(e)},J=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},$=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)};function n(e){e.parentNode.removeChild(e)}var Z=function(e){if(n(e.modal),n(e.overlay),""!==e.contentBackId){var t=K(e.contentBackId);t&&(t.innerHTML=e.modalContent)}if(e.modalFocusBackId){var i=K(e.modalFocusBackId);i&&i.focus()}};document.addEventListener("DOMContentLoaded",function e(){[].slice.call(I.querySelectorAll("."+T)).forEach(function(e,t){var i=t+1,n=K(z),a=I.querySelector("body");if(e.setAttribute("id","label_modal_"+i),null===n||0===n.length){var o=I.createElement("DIV");o.setAttribute("id",z),function(e,t){for("string"==typeof t&&(t=document.createElement(t)),e.appendChild(t);e.firstChild!==t;)t.appendChild(e.firstChild)}(a,o)}}),["click","keydown"].forEach(function(j){I.body.addEventListener(j,function(e){if(!0===$(e.target,T)&&"click"===j){var t=I.querySelector("body"),i=e.target,n=!0===i.hasAttribute(k)?i.getAttribute(k)+"-":"",a=!0===i.hasAttribute(A)?i.getAttribute(A):"",o=!0===i.hasAttribute(L)?i.getAttribute(L):"",r=!0===i.hasAttribute(M)?i.getAttribute(M):"",s=!0===i.hasAttribute(D)?i.getAttribute(D):V,l=!0===i.hasAttribute(Q)?i.getAttribute(Q):s,c=!0===i.hasAttribute(B)?i.getAttribute(B):"",d=!0===i.hasAttribute(O)?i.getAttribute(O):"",h=K(z);t.insertAdjacentHTML("beforeEnd",(m=(f={text:l,backgroundEnabled:d,prefixClass:n}).text||V,g=f.prefixClass+"modal-overlay",v="disabled"===f.backgroundEnabled?"disabled":"enabled",'<span \n                  id="js-modal-overlay"\n                  class="'+g+'"\n                  '+U+'="'+v+'" \n                  title="'+m+'"\n                  >\n                  <span class="invisible">'+m+"</span>\n                </span>")),t.insertAdjacentHTML("beforeEnd",function(e){var t=e.modalPrefixClass+"modal",i=e.modalPrefixClass+"modal-close",n=e.modalCloseImgPath?'<img\n                                        src="'+e.modalCloseImgPath+'" \n                                        alt="'+e.modalCloseText+'" \n                                        class="modal__closeimg"\n                                        />':'<span \n                                        class="modal-close__text">\n                                        '+e.modalCloseText+"\n                                       </span>",a=e.modalPrefixClass+"modal__content",o=e.modalPrefixClass+"modal-title",r=""!==e.modalTitle?'<h1 \n                                        id="'+W+'" \n                                        class="'+o+'">\n                                        '+e.modalTitle+"\n                                       </h1>":"",s='<button \n                             type="button"\n                             class="'+P+" "+i+'"\n                             id="'+N+'"\n                             title="'+e.modalCloseTitle+'"\n                             '+F+'="'+e.modalContentId+'"\n                             '+H+'="'+e.modalFocusBackId+'"\n                             >\n                             '+n+"\n                            </button>",l=e.modalText;if(""===l&&e.modalContentId){var c=K(e.modalContentId);c&&(l='<div \n                            id="'+R+'">\n                            '+c.innerHTML+"\n                           </div",c.innerHTML="")}return'<dialog \n                  id="js-modal"\n                  role="dialog"\n                  class="'+t+'"\n                  open\n                  aria-modal="true"\n                  aria-labelledby="'+W+'"\n                  >\n                  <div role="document">\n                    '+s+'\n                    <div class="'+a+'">\n                      '+r+"\n                      "+l+"\n                    </div>\n                  </div>\n                </dialog>"}({modalText:a,modalPrefixClass:n,backgroundEnabled:o,modalTitle:r,modalCloseText:s,modalCloseTitle:l,modalCloseImgPath:c,modalContentId:o,modalFocusBackId:i.getAttribute("id")})),h.setAttribute(G,"true"),p=q,(u=t).classList?u.classList.add(p):u.className+=" "+p,K(N).focus(),e.preventDefault()}var u,p,f,m,g,v,y=function(e,t){for(var i=!1,n=e.parentNode;n&&!1===i;)!0===$(n,t)?i=!0:n=n.parentNode;return!0===i?n.getAttribute("id"):""}(e.target,P);if((e.target.getAttribute("id")===N||""!==y||e.target.getAttribute("id")===X)&&"click"===j){t=I.querySelector("body"),h=K(z);var b=K(Y),w=K(R)?K(R).innerHTML:"",C=K(X),_=(x=K(N)).getAttribute(H),E=x.getAttribute(F);d=C.getAttribute(U),e.target.getAttribute("id")===X&&"disabled"===d||(Z({modal:b,modalContent:w,overlay:C,modalFocusBackId:_,contentBackId:E,backgroundEnabled:d,fromId:e.target.getAttribute("id")}),h.removeAttribute(G),J(t,q))}if(K(Y)&&"keydown"===j){t=I.querySelector("body"),h=K(z),b=K(Y),w=K(R)?K(R).innerHTML:"",C=K(X),_=(x=K(N)).getAttribute(H),E=x.getAttribute(F);var x,S=[].slice.call(b.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"));27===e.keyCode&&(Z({modal:b,modalContent:w,overlay:C,modalFocusBackId:_,contentBackId:E}),h.removeAttribute(G),J(t,q)),9===e.keyCode&&0<=S.indexOf(e.target)&&(e.shiftKey?e.target===S[0]&&(S[S.length-1].focus(),e.preventDefault()):e.target===S[S.length-1]&&(S[0].focus(),e.preventDefault())),9===e.keyCode&&-1===S.indexOf(e.target)&&(e.preventDefault(),S[0].focus())}},!0)}),document.removeEventListener("DOMContentLoaded",e)})}(document),function(e,t){"function"==typeof define&&define.amd?define([],t(e)):"object"==typeof exports?module.exports=t(e):e.vanillaTabScroller=t(e)}("undefined"!=typeof global?global:this.window||this.global,function(i){var c,a,o={},n="querySelector"in document&&"addEventListener"in i,r={scroller:"[data-tabs-scroller]",wrapper:"[data-tabs-wrapper]",tabs:"[data-tabs]",tab:"[data-tab]",tabsButtonPrevClass:"pwt-tabs-scroller-prev",tabsButtonNextClass:"pwt-tabs-scroller-next",tabsOverflowClass:"has-tabs-overflow",tabsOverflowLeftClass:"has-tabs-left-overflow",tabsOverflowRightClass:"has-tabs-right-overflow",tabsScrollAmount:.8,tabsAnimationSpeed:400,beforeSetWidth:function(){},afterSetWidth:function(){}},s=function(e,t,i){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(i,e[n],n,e);else for(var a=e.length-1;0<=a;a--)t.call(i,e[a],a,e)},l=function(){var i={},n=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],e++);for(var a=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?i[t]=l(!0,i[t],e[t]):i[t]=e[t])};e<t;e++){a(arguments[e])}return i};function d(t,e,i,n){var a=e,o=i-a,r=0,s=function(){r+=20;var e=Math.easeInOutQuad(r,a,o,n);t.scrollLeft=e,r<n&&setTimeout(s,20)};s()}Math.easeInOutQuad=function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t};o.tabsCalculateScroll=function(e){var t=l(c||r,e||{}),i=document.querySelectorAll(t.scroller);i&&s(i,function(e){var t=e,i=t.querySelector(c.tabs).offsetWidth,n=t.clientWidth,a=t.scrollLeft,o=t.parentNode;n<i?o.classList.add(c.tabsOverflowClass):o.classList.remove(c.tabsOverflowClass),n<i&&0<a&&o.classList.add(c.tabsOverflowLeftClass),n<i&&o.classList.add(c.tabsOverflowRightClass),(i<=n||a<=0)&&o.classList.remove(c.tabsOverflowLeftClass),(i<=n||i-n<=a)&&o.classList.remove(c.tabsOverflowRightClass)})},o.calculateScroll=function(e,t){var i,n=e.querySelector(c.tabs).offsetWidth,a=e.querySelector(c.scroller).clientWidth,o=e.querySelector(c.scroller).scrollLeft;"prev"==t&&(i=o-a*c.tabsScrollAmount)<0&&(i=0),"next"==t&&n-a<(i=o+a*c.tabsScrollAmount)&&(i=n-a),d(e.querySelector(c.scroller),o,i,c.tabsAnimationSpeed)},o.scrollToTab=function(e,t){if(e){var i,n=e.offsetLeft,a=n+e.offsetWidth,o=parseInt(window.getComputedStyle(t.parentNode,null).getPropertyValue("padding-left"),10),r=parseInt(window.getComputedStyle(t.parentNode,null).getPropertyValue("padding-right"),10),s=t.scrollLeft,l=t.clientWidth;s+l<a&&(i=s+(a-(l+s)+r)),n<s&&(i=s-(s-n+o)),i&&d(t,s,i,c.tabsAnimationSpeed)}};var h=function(e){if(0===e.button&&!e.metaKey&&!e.ctrlKey){var t=function(e,t){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=t.length;0<=--i&&t.item(i)!==this;);return-1<i});e&&e!==document;e=e.parentNode)if(e.matches(t))return e;return null}(e.target,c.wrapper);t&&(e.target.className==c.tabsButtonPrevClass&&o.calculateScroll(t,"prev"),e.target.className==c.tabsButtonNextClass&&o.calculateScroll(t,"next"))}},u=function(){a||(a=setTimeout(function(){a=null,o.tabsCalculateScroll()},200))};return o.destroy=function(){c&&(document.removeEventListener("click",h,!1),i.removeEventListener("resize",u,!1),c=null)},o.init=function(e){var t;n&&(o.destroy(),c=l(r,e||{}),document.addEventListener("click",h,!1),i.addEventListener("resize",u,!1),(t=document.querySelectorAll(c.scroller))&&(s(t,function(t){var e=document.createElement("button");e.setAttribute("type","button"),e.innerHTML="prev",e.classList.add(c.tabsButtonPrevClass),t.parentNode.insertBefore(e,t.parentNode.firstChild);var i=document.createElement("button");i.setAttribute("type","button"),i.innerHTML="next",i.classList.add(c.tabsButtonNextClass),t.parentNode.appendChild(i),setTimeout(function(){o.scrollToTab(t.querySelector(".is-active"),t)},c.tabsAnimationSpeed),t.addEventListener("scroll",function(){a||(a=setTimeout(function(){a=null,o.tabsCalculateScroll()},200))});var n=t.querySelectorAll(c.tab);n&&s(n,function(e){e.addEventListener("click",function(){o.scrollToTab(e,t)})})}),o.tabsCalculateScroll()))},o});var pwtImage=function(){var c,w={},C=[],t="",i="",_=!1,E="",x="",S="",j="",d=0,I="",s=1;function g(e){var t=jQuery(e).closest(".js-pwtimage-id").prop("id");return void 0===t?(console.log("Cannot find parent ID for element"),console.log(e),!1):t}function v(e,n,a){var o=[];return"/"===n.substring(0,1)&&(n=n.substring(1)+"/"),jQuery(e).each(function(e,t){var i=I+n+t;o.push(function(e,t,i){var n="",a=t.substring(t.lastIndexOf("/")+1);switch(i){case"select":n="<div class=\"pwt-gallery__item\"><a onclick=\"return pwtImage.previewImage('.pwt-gallery__items--images', '"+t+'\');" title="'+a+'"><div class="pwt-gallery__item__image"><div class="pwt-gallery__item__center"><img src="'+t+'" alt="'+function(e){var t=e.substring(e.lastIndexOf("/")+1);-1!==t.lastIndexOf(".")&&(t=t.substring(0,t.lastIndexOf(".")));return t}(e)+'" /></div><div class="pwt-gallery__item__imagename">'+a+"</div></div></a></div>"}return n}(t,i,a))}),o}function h(e){var t=(e/1024).toFixed(2),i=(e/1048576).toFixed(2);return 1<=i?i+" MB":t+" KB"}function y(e,t,i){var n=JSON.parse(localStorage.getItem("pwtImage"));null==n&&(n={});var a=e+"_"+t;for(var o in n)0<o.indexOf(t)&&a!==o&&n.hasOwnProperty(o)&&delete n[o];n[a]=i,localStorage.setItem("pwtImage",JSON.stringify(n))}function m(e,t){var i=JSON.parse(localStorage.getItem("pwtImage"));if(null==i)return[];var n=e+"_"+t;return i.hasOwnProperty(n)?i[n]:void 0}function T(e,t){if("undefined"===t){if(!window.parent.document.getElementById("system-message-container"))return!0;window.parent.Joomla.renderMessages(e)}else{if(!window.document.getElementById("system-message-container"))return!0;window.Joomla.renderMessages(e)}}return w.initialise=function(){jQuery(".js-edit-image-button").on("click",function(){jQuery(".js-image-cropper").removeClass("is-hidden"),jQuery(".js-image-preview").addClass("is-hidden")}),jQuery(".js-select-existing").on("click",function(){jQuery("[href=#select]").trigger("click")}),jQuery(".js-upload-new").on("click",function(){jQuery("[href=#upload]").trigger("click")});var e=Joomla.getOptions("PWTImageConfig");c=e.sessionToken},w.initialiseDragnDrop=function(){var n=jQuery("#js-dragarea");n.on("dragenter",function(e){return e.preventDefault(),e.stopPropagation(),n.addClass("hover"),!1}),n.on("dragover",function(e){return e.preventDefault(),e.stopPropagation(),n.addClass("hover"),!1}),n.on("dragleave",function(e){return e.preventDefault(),e.stopPropagation(),n.removeClass("hover"),!1}),n.on("drop",function(e){e.preventDefault(),e.stopPropagation(),n.removeClass("hover");var t=e.originalEvent.target.files||e.originalEvent.dataTransfer.files;if(t.length){var i=".pwt-content";w.createPreview(i,t),w.cleanUpAfterUpload(i),d&&w.directToCanvas(i)}})},w.addRepeatImage=function(e){var t=(new Date).getTime();jQuery(e).clone().prop("id","addmore"+t);var i=jQuery(e).parent(),n=i.first().clone(),a=n.children(":first").prop("id").split("_")[0];n.prop("id",t);var o=n.children("[id^=label_modal_]");o.prop("id","label_modal_"+t);var r=o.attr("onclick").replace("setTargetId('"+a,"setTargetId('"+t);r=r.replace("modalId="+a,"modalId="+t),o.attr("onclick",r),n.children("#"+a+"_preview").prop("id",t+"_preview").html(""),n.children("#"+a+"_value").prop("id",t+"_value"),n.children("#"+a+"_clear").prop("id",t+"_clear").addClass("hidden").prop("onclick","pwtImage.clearImage('"+t+"');"),n.children("#addmore"+a).prop("id","addmore"+t),i.first().parent().append(n)},w.prepareUpload=function(e){jQuery("#"+e+" button.js-button-save-new").prop("disabled",!0),jQuery("#"+e+" .pwt-image-localfile").val(""),jQuery("#"+e+" .pwt-image-targetfile").val(""),jQuery("#"+e+" .pwt-message").removeClass("is-visible")},w.setTargetId=function(e){t=e},w.setIframeLink=function(e){i=e},w.setRootPath=function(e){I=e},w.setWysiwyg=function(e){_=e},w.setViewMode=function(e){s=e},w.showImageDirect=function(e){d=e},w.getTargetId=function(){return t},w.saveImage=function(i,e,n){var a=!1;void 0!==C[i]&&(a=C[i]),"undefined"===n&&(n=!1);var t=jQuery("#post-url").val(),o=jQuery("#"+i+"_upload")[0].files[0],r=jQuery("#"+i+" .js-pwt-image-data").val(),s=jQuery("#"+i+" .js-pwt-image-width").val(),l=jQuery("#"+i+" .js-pwt-image-ratio").val(),c=jQuery("#"+i+" .js-pwt-image-keepOriginal").is(":checked"),d=jQuery("#"+i+" .js-pwt-image-sourcePath").val(),h=jQuery("#"+i+" .js-pwt-image-subPath").val(),u=jQuery("#"+i+" .js-pwt-image-localfile").val(),p=jQuery("#"+i+" .js-pwt-image-targetfile").val(),f=jQuery("#"+i+" .js-pwt-image-backgroundColor").val(),m=jQuery("#"+i+" .js-pwt-image-origin").val(),g=new FormData;switch(j&&void 0===o&&(o=j[0]),""===x&&(x=jQuery("#"+i+" #alt").val()),""===S&&(S=jQuery("#"+i+" #caption").val()),jQuery("#"+i+"_destinationFolder").val()){case"select":h=jQuery("#"+i+"_selectedFolderOptions").val()}if(0===Number(s))if(a)s=a.getCropBoxData().width;else{var v=new Image;v.onload=function(){s=this.width},v.src=u}g.append("option","com_pwtimage"),g.append("task","image.processImage"),g.append("format","json"),g.append("pwt-image-localFile",u),g.append("pwt-image-targetFile",p),g.append("alt",x),g.append("caption",S),g.append("pwt-image-data",r),g.append("pwt-image-width",s),g.append("pwt-image-ratio",l),g.append("pwt-image-keepOriginal",c),g.append("pwt-image-sourcePath",d),g.append("pwt-image-subPath",h),g.append("pwt-image-backgroundColor",f),g.append("pwt-image-origin",m),g.append("image",o);var y=w.getTargetId();try{if(jQuery.ajax({type:"POST",data:g,contentType:!1,url:t,cache:!1,processData:!1,async:!1,headers:{"X-CSRF-TOKEN":e},success:function(e){if(e instanceof Object==!1){var t=function(e){if(-1!==e.indexOf("Allowed memory size"))return Joomla.JText._("COM_PWTIMAGE_ERROR_ALLOWED_MEMORY_SIZE");return""}(e);throw 0===t.length&&(t=e),T({error:[t]},!0),!1}e.message&&T({warning:[e.message]}),e.messages&&T(e.messages),E=e.data,_||(0<(E=E.split(",")).length&&(E=E[0]),window.parent.jQuery("#"+y+"_value").val(E),window.parent.jQuery("#"+y+"_preview").html('<img src="'+I+E+'" />'),window.parent.jQuery("#"+y+"_clear").removeClass("hidden")),n&&(jQuery("#"+i+" .pwt-message").addClass("is-visible"),jQuery("#"+i+" span.has_folder").html(e.data)),a&&a.destroy(),document.getElementById(i+"_js-pwtimage-image").removeAttribute("src"),n||w.closeModal()},error:function(e){throw T({error:[Joomla.JText._("COM_PWTIMAGE_SAVE_FAILED","There was a problem to save the file")]}),console.log("Image upload failed: "+e.responseText),!1}}),n){E=S=x="",jQuery("#"+i+" .js-pwt-image-localfile").val(""),jQuery("#"+i+"_upload").replaceWith(jQuery("#"+i+"_upload").val("").clone(!0)),jQuery("#"+i+" .js-pwt-image-data").val(""),0===h.length&&(h=(d=jQuery("#"+i+" .js-sourcePath").text()).substring(0,d.length-1)),w.loadFolder("#"+i,h,"select",e);var b=jQuery(".pwt-fulltab-message");b.removeClass("is-hidden"),b.next().addClass("is-hidden"),jQuery('[href="#select"]').trigger("click")}}catch(e){return!1}return w.cancelImage(i),!0},w.clearImage=function(e){jQuery("#"+e+"_value").val(""),jQuery("#"+e+"_preview img").prop("src",""),jQuery("#"+e+"_clear").addClass("hidden"),jQuery("#"+e+"_js-pwtimage-image").prop("src","")},w.imageToolbar=function(e){var t=g(e),i=jQuery(e).data();if(!jQuery(this).prop("disabled")&&!jQuery(this).hasClass("disabled")&&void 0!==C[t]){var n=C[t];switch(i.method){case"scaleX":case"scaleY":n[i.method](i.option),jQuery(e).data("option",1===i.option?-1:1);break;case"rotate":case"zoom":n[i.method](i.option);break;case"ratio":var a=i.option;if("string"==typeof a&&0<a.indexOf("/")){var o=i.option.split("/");a=o[0]/o[1]}n.setAspectRatio(a),jQuery("#"+t+" .js-pwt-image-ratio").val(i.option)}}},w.openImage=function(e){var t=g(e);jQuery("#"+t+" .js-pwt-image-toolbar").hide(),jQuery("#"+t+" .js-cropper-container").hide(),jQuery("form.js-image-form > div.pull-right").hide()},w.loadFolder=function(e,u,p,f){var m=g(e),t=new FormData,i=jQuery("#post-url").val();return t.append("option","com_pwtimage"),t.append("task","image.loadFolder"),t.append("format","json"),t.append("folder",u),jQuery.ajax({type:"POST",data:t,url:i,contentType:!1,cache:!1,processData:!1,headers:{"X-CSRF-TOKEN":f},success:function(e){try{if(e.message)return console.log("Failed to load subfolders from folder "+u+". Message: "+e.message),T({warning:[e.message]}),!1;if(e.messages)return T(e.messages),!1;if(void 0===e.data)return!1}catch(e){console.log(e.message)}var n=[];if(e.data.folders){var t,i=[],a="";(0<u.indexOf("/")||1<u.length)&&(t=u.split("/")),jQuery(t).each(function(e,t){0<(a+=t).length&&(i[e+1]="<a onclick=\"pwtImage.loadFolder('.pwt-gallery__items--folders', '/"+a+"', '"+p+"', '"+f+'\'); return false;"><span class="icon-folder-2"></span>'+t+"</a>",a+="/")}),jQuery("#"+p+" .js-breadcrumb").html(i.join(" ")),jQuery(e.data.folders).each(function(e,t){var i=t;"/"!==u&&(i=u+"/"+t),n.push("<div class=\"pwt-gallery__item\"><a onclick=\"pwtImage.loadFolder('.pwt-gallery__items--folders', '"+i+"', '"+p+"', '"+f+'\'); return false;"><div class="pwt-gallery__item__content"><span class="pwt-gallery__item__icon icon-folder-2"></span><span class="pwt-gallery__item__title">'+t+"</span></div></a></div>")});var o=jQuery("#"+m+" #"+p+" .pwt-gallery__items--folders");o.html(""),n.length&&o.html(n.join(" "))}var r=[];if(e.data.files){for(var s=Math.ceil(e.data.files.length/100),l=1;l<=s;l++)r.push("<a onclick=\"pwtImage.showMoreImages('.pwt-gallery__items--images', "+l+", '"+p+"');\">"+l+"</a>");y(m,"files",e.data.files),y(m,"basePath",e.data.basePath);var c=e.data.files.slice(0,100);n=v(c,u,p);var d=jQuery("#"+m+" #"+p+" .pwt-gallery__items--images");d.html(""),n.length&&d.html(n.join(" "));var h=jQuery("#"+m+" #"+p+" .pwt-pagination");h.html(""),r.length&&h.html('<div class="pwt-pagination__pages">'+r.join(" ")+"</div>"),jQuery(".pwt-gallery__item img").each(function(){jQuery(this).load(function(){this.width>this.height&&jQuery(this).addClass("is-landscape")})})}w.selectFilter(jQuery("#selectFilter").val())},error:function(e){console.log("Failed to load folder: "+e.responseText),console.log("Response code: "+e.status+" "+e.statusText)}}),!1},w.loadSelectFolders=function(e,t){var i=new FormData,n=jQuery("#post-url").val();return i.append("option","com_pwtimage"),i.append("task","image.loadSelectFolders"),i.append("format","json"),i.append("sourcePath",e),jQuery.ajax({type:"POST",data:i,url:n,contentType:!1,cache:!1,processData:!1,headers:{"X-CSRF-TOKEN":t},success:function(e){choicesFolder._clearChoices(),e.data[0].forEach(function(e){choicesFolder._addChoice(e,e)}),choicesFolder.setValueByChoice("/")},error:function(e){console.log("Failed to load folder: "+e.responseText),console.log("Response code: "+e.status+" "+e.statusText)}}),!1},w.showMoreImages=function(e,t,i){var n=g(e),a=m(n,"files"),o=m(n,"basePath"),r=1===t?0:100*(t-1),s=100*t,l=v(a.slice(r,s),o,i),c=jQuery("#"+n+" #"+i+" .pwt-gallery__items--images");c.html(""),l.length&&c.html(l.join(" ")),w.selectFilter(jQuery("#selectFilter").val(),t)},w.addImageToCanvas=function(e,t,i,n){var a=g(e);null==n&&(n=!1),jQuery("#"+a+" div.pwt-body div.cropper-container > div.cropper-container").remove();var o=jQuery("#"+a+" .js-pwt-image-ratio").val().split("/");n||(i=document.getElementById(a+"_js-pwtimage-image"));var r=new Cropper(i,{aspectRatio:o[0]/o[1],viewMode:s,crop:function(e){var t=['{"x":'+e.detail.x,'"y":'+e.detail.y,'"height":'+e.detail.height,'"width":'+e.detail.width,'"rotate":'+e.detail.rotate,'"scaleX":'+e.detail.scaleX,'"scaleY":'+e.detail.scaleY+"}"].join();jQuery("#"+a+" .js-pwt-image-data").val(t)},ready:function(){var e=r.getImageData();r.setCropBoxData({top:0,width:e.width})}});return n?((C[a]=r).init(),window.parent.jQuery("#"+a+"_value").prop("value",t.name)):(r.replace(t),C[a]=r),jQuery("#"+a+" .pwt-fulltab-message").addClass("is-hidden"),jQuery("#"+a+" button.js-button-save-new").prop("disabled",!1),jQuery("#"+a+" .js-image-info").removeClass("is-hidden"),jQuery('[href="#edit"]').trigger("click"),jQuery("#"+a+" .js-button-image").removeClass("hidden"),!1},w.closeModal=function(){_?(E&&jQuery("form.js-image-form #formPath").val(E),x&&jQuery("form.js-image-form #alt").val(x),S&&jQuery("form.js-image-form #caption").val(S),jQuery("form.js-image-form #layout").val("close"),jQuery("form.js-image-form").submit()):(window.parent.jQuery("iframe#pwtImageFrame-"+t).prop("src",i),window.parent.jQuery("#js-modal-close").click())},w.setDestination=function(e){var t=g(e);if(void 0!==choicesDestination){switch(choicesDestination.getValue().value){case"default":jQuery("#"+t+"_enterFolder").addClass("is-visible").removeClass("is-hidden"),jQuery("#"+t+"_subPath").prop("disabled",!0),jQuery("#"+t+"_selectFolder").addClass("is-hidden").removeClass("is-visible");break;case"select":jQuery("#"+t+"_enterFolder").addClass("is-hidden").removeClass("is-visible"),jQuery("#"+t+"_selectFolder").addClass("is-visible").removeClass("is-hidden");break;case"custom":jQuery("#"+t+"_enterFolder").addClass("is-visible").removeClass("is-hidden"),jQuery("#"+t+"_subPath").prop("disabled",!1),jQuery("#"+t+"_selectFolder").addClass("is-hidden").removeClass("is-visible")}jQuery("#"+t+"_selectFolder").trigger("change")}},w.imageInfo=function(e){if(0!==jQuery(e).closest("#js-sortable-result").length){var t=jQuery(e).parent().find("a").hasClass("is-selected");if(jQuery("#js-sortable-result").find("a.is-selected").removeClass("is-selected"),jQuery("#gallery-image-info .js-image-info").hide(),t)jQuery("#gallery-image-info").hide();else{if(jQuery(e).parent().find("a").addClass("is-selected"),"button"===e.type)var i=jQuery(e).siblings().find("img").prop("src").replace(/[\/\.]/g,"_");else i=jQuery(e).find("img").prop("src").replace(/[\/\.]/g,"_");if(0===jQuery('#gallery-image-info input[name="input_'+i+'_alt"]').length){var n=document.createElement("div");n.className="js-image-info "+i+"_path",n.innerHTML=jQuery(e).parent().find("img").prop("src"),jQuery("#gallery-image-info .pwt-form-group:first").append(n);var a=document.createElement("input");a.type="text",a.name="input_"+i+"_alt",a.className="pwt-form-control js-image-info js-pwt-image-alt",jQuery("#gallery-image-info .pwt-form-group:nth-child(3)").append(a);var o=document.createElement("input");o.type="text",o.name="input_"+i+"_caption",o.className="pwt-form-control js-image-info js-pwt-image-caption",jQuery("#gallery-image-info .pwt-form-group:nth-child(4)").append(o)}else jQuery("#gallery-image-info div."+i+"_path").show(),jQuery('#gallery-image-info input[name="input_'+i+'_alt"]').show(),jQuery('#gallery-image-info input[name="input_'+i+'_caption"]').show();jQuery("#gallery-image-info").show(),jQuery('#gallery-image-info input[name="input_'+i+'_alt"]').focus()}}},w.cleanUpAfterUpload=function(e){var t=g(e);jQuery('[href="#edit"]').trigger("click"),void 0!==choicesDestination&&(choicesDestination.setValueByChoice("default"),w.setDestination("#"+t+"_destinationFolder"))},w.uploadImagePreview=function(e){if(window.URL||window.webkitURL){var t=g(e);document.getElementById(t+"_upload").onchange=function(){w.createPreview(e,this.files),w.cleanUpAfterUpload(e),jQuery('[href="#edit"]')[0].click(),d&&w.directToCanvas(e)}}return!1},w.directToCanvas=function(e){var t=g(e);jQuery("#"+t+" .js-image-preview").addClass("is-hidden"),jQuery("#"+t+" .js-image-cropper").removeClass("is-hidden");var i=jQuery("#"+t+"_preview img").prop("src");jQuery("#"+t+" #keepOriginal").prop("checked",!1),w.addImageToCanvas(e,i)},w.createPreview=function(e,t){var i=g(e),n=jQuery("#"+i+"_preview img");if(t&&t.length){var a=(j=t)[0],o=jQuery(".js-pwt-image-maxsize").val(),r=jQuery(".js-pwt-image-dimensionsize");if(a.size>o&&0<o)return window.alert(jQuery(".js-pwt-image-maxsize-message").val()),imageUpload.value="",n.removeAttribute("src"),!1;if(/^image\/\w+$/.test(a.type)){if(n.prop("src",URL.createObjectURL(a)),n.naturalHeight>r.val()||n.naturalWidth>r.val())return window.alert(jQuery(".js-pwt-image-maxsize-message").val()),imageUpload.value="",n.removeAttribute("src"),!1;var s=a.name.split("/").slice(-1)[0];jQuery("#"+i+" #pwt-image-targetFile").val(s)}else window.alert(Joomla.JText._("COM_PWTIMAGE_CHOOSE_IMAGE","Please choose an image file."))}jQuery("#"+i+" .pwt-message").removeClass("is-visible"),jQuery("#"+i+" .pwt-edit-block").removeClass("is-hidden"),jQuery("#"+i+" .pwt-fulltab-message").addClass("is-hidden"),jQuery("#"+i+" .js-button-image").prop("disabled",!1),n.off("load").on("load",function(){jQuery(".js-pwt-filename").html(a.name),jQuery(".js-pwt-filesize").html(h(a.size)),jQuery(".js-pwt-fileext").html(a.type.replace("image/","")),jQuery(".js-pwt-filedimensions").html(this.naturalWidth+" x "+this.naturalHeight)})},w.previewImage=function(e,t){var i=g(e);w.cancelImage(i);var n=t.replace(I,"/");if(jQuery("#"+i+"_preview img").prop("src",t),jQuery("#"+i+"_js-pwtimage-image").prop("src",n),jQuery("#"+i+" .js-pwt-image-localfile").val(n),jQuery('[href="#edit"]').trigger("click"),jQuery("#"+i+" .pwt-fulltab-message").addClass("is-hidden"),jQuery("#"+i+" .pwt-edit-block").removeClass("is-hidden"),jQuery("#"+i+" .js-image-preview").removeClass("is-hidden"),void 0!==choicesDestination){choicesDestination.setValueByChoice("select");var a=choicesDestination.getValue().value;"select"!==a&&choicesDestination.setValueByChoice("default"),w.setDestination("#"+i+"_destinationFolder")}0===t.indexOf(I)&&(t=t.substring(I.length-1));var o=jQuery("#"+i+"_selectFolder").prev().text(),r=t.substring(o.length,t.lastIndexOf("/")),s=t.substring(t.lastIndexOf("/")+1),l=jQuery("#"+i+" .js-sourcePath").text();0===r.lastIndexOf(l)&&(r=r.substring(l.length)),1<r.length&&("select"===a&&void 0!==choicesFolder?choicesFolder.setValueByChoice(r):jQuery("#"+i+"_subPath").val(r+"/")),0<s.length&&jQuery("#"+i+" #pwt-image-targetFile").val(s),jQuery("#"+i+" .js-button-image").prop("disabled",!1),d&&w.directToCanvas(".pwt-content"),jQuery.ajax({type:"POST",data:{option:"com_pwtimage",task:"image.loadMetaData",format:"json",image:t},url:jQuery("#post-url").val(),headers:{"X-CSRF-TOKEN":c},success:function(e){e&&!0===e.success&&(t=e.data,jQuery(".js-pwt-filename").html(t.name),jQuery(".js-pwt-filesize").html(h(t.size)),jQuery(".js-pwt-fileext").html(t.mime.replace("image/","")),jQuery(".js-pwt-filedimensions").html(t[0]+" x "+t[1]))},error:function(e){console.log(e)}})},w.cancelImage=function(e){jQuery("#"+e+" button.js-button-save-new").prop("disabled",!0),jQuery("#"+e+" .js-image-cropper").addClass("is-hidden"),jQuery("#"+e+" .js-image-info").addClass("is-hidden"),jQuery("#"+e+" .js-image-preview").removeClass("is-hidden")},w.selectFilter=function(e,t){jQuery("#select .pwt-filepicker__content .pwt-gallery__items--images").html(""),void 0===t&&(t=1);var i,n=g("#selectFilter"),a=m(n,"files"),o=m(n,"basePath"),r=a,s="select",l=1===t?0:100*(t-1),c=100*t,d=[];e&&(i=e,r=a.filter(function(e){return-1<e.toLowerCase().indexOf(i.toLowerCase())}));var h=v(r.slice(l,c),o,s),u=jQuery("#"+n+" #"+s+" .pwt-gallery__items--images");u.html(""),h.length&&u.html(h.join(" "));var p=Math.ceil(r.length/100);for(t=1;t<=p;t++)d.push("<a onclick=\"pwtImage.showMoreImages('.pwt-gallery__items--images', "+t+", '"+s+"');\">"+t+"</a>");var f=jQuery("#"+n+" #"+s+" .pwt-pagination");f.html(""),d.length&&f.html('<div class="pwt-pagination__pages">'+d.join(" ")+"</div>")},w.keepOriginal=function(e,t){jQuery(t).is(":checked")&&w.cancelImage(e)},w}();!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Choices=t():e.Choices=t()}(this,function(){return function(i){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={exports:{},id:e,loaded:!1};return i[e].call(t.exports,t,t.exports,a),t.loaded=!0,t.exports}return a.m=i,a.c=n,a.p="/assets/scripts/dist/",a(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){var n=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),l=a(i(2)),r=a(i(3)),s=a(i(4)),f=i(31),y=i(32);function a(e){return e&&e.__esModule?e:{default:e}}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}i(33);var o=function(){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"[data-choice]",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(0,y.isType)("String",e)){var i=document.querySelectorAll(e);if(1<i.length)for(var n=1;n<i.length;n++){new o(i[n],t)}}var a={silent:!1,items:[],choices:[],renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,removeItems:!0,removeItemButton:!1,editItems:!1,duplicateItems:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,regexFilter:null,shouldSort:!0,shouldSortItems:!1,sortFilter:y.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",addItemText:function(e){return'Press Enter to add <b>"'+(0,y.stripHTML)(e)+'"</b>'},maxItemText:function(e){return"Only "+e+" values can be added."},itemComparer:function(e,t){return e===t},uniqueItemText:"Only unique values can be added.",classNames:{containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",hiddenState:"is-hidden",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},fuseOptions:{include:"score"},callbackOnInit:null,callbackOnCreateTemplates:null};if(this.idNames={itemChoice:"item-choice"},this.config=(0,y.extend)(a,t),"auto"!==this.config.renderSelectedChoices&&"always"!==this.config.renderSelectedChoices&&(this.config.silent||console.warn("renderSelectedChoices: Possible values are 'auto' and 'always'. Falling back to 'auto'."),this.config.renderSelectedChoices="auto"),this.store=new s.default(this.render),this.initialised=!1,this.currentState={},this.prevState={},this.currentValue="",this.element=e,this.passedElement=(0,y.isType)("String",e)?document.querySelector(e):e,this.passedElement)if(this.isTextElement="text"===this.passedElement.type,this.isSelectOneElement="select-one"===this.passedElement.type,this.isSelectMultipleElement="select-multiple"===this.passedElement.type,this.isSelectElement=this.isSelectOneElement||this.isSelectMultipleElement,this.isValidElementType=this.isTextElement||this.isSelectElement,this.isIe11=!(!navigator.userAgent.match(/Trident/)||!navigator.userAgent.match(/rv[ :]11/)),!(this.isScrollingOnIe=!1)===this.config.shouldSortItems&&this.isSelectOneElement&&(this.config.silent||console.warn("shouldSortElements: Type of passed element is 'select-one', falling back to false.")),this.highlightPosition=0,this.canSearch=this.config.searchEnabled,this.placeholder=!1,this.isSelectOneElement||(this.placeholder=!!this.config.placeholder&&(this.config.placeholderValue||this.passedElement.getAttribute("placeholder"))),this.presetChoices=this.config.choices,this.presetItems=this.config.items,this.passedElement.value&&(this.presetItems=this.presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this.baseId=(0,y.generateId)(this.passedElement,"choices-"),this.render=this.render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this.wasTap=!0,"classList"in document.documentElement||this.config.silent||console.error("Choices: Your browser doesn't support Choices"),(0,y.isElement)(this.passedElement)&&this.isValidElementType){if("active"===this.passedElement.getAttribute("data-choice"))return;this.init()}else this.config.silent||console.error("Incompatible input passed");else this.config.silent||console.error("Passed element not found")}return n(o,[{key:"init",value:function(){if(!0!==this.initialised){var e=this.config.callbackOnInit;this.initialised=!0,this._createTemplates(),this._createInput(),this.store.subscribe(this.render),this.render(),this._addEventListeners(),e&&(0,y.isType)("Function",e)&&e.call(this)}}},{key:"destroy",value:function(){if(!1!==this.initialised){this._removeEventListeners(),this.passedElement.classList.remove(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.removeAttribute("tabindex");var e=this.passedElement.getAttribute("data-choice-orig-style");Boolean(e)?(this.passedElement.removeAttribute("data-choice-orig-style"),this.passedElement.setAttribute("style",e)):this.passedElement.removeAttribute("style"),this.passedElement.removeAttribute("aria-hidden"),this.passedElement.removeAttribute("data-choice"),this.passedElement.value=this.passedElement.value,this.containerOuter.parentNode.insertBefore(this.passedElement,this.containerOuter),this.containerOuter.parentNode.removeChild(this.containerOuter),this.clearStore(),this.config.templates=null,this.initialised=!1}}},{key:"renderGroups",value:function(e,n,t){var a=this,o=t||document.createDocumentFragment(),i=this.config.sortFilter;return this.config.shouldSort&&e.sort(i),e.forEach(function(t){var e=n.filter(function(e){return a.isSelectOneElement?e.groupId===t.id:e.groupId===t.id&&!e.selected});if(1<=e.length){var i=a._getTemplate("choiceGroup",t);o.appendChild(i),a.renderChoices(e,o,!0)}}),o}},{key:"renderChoices",value:function(e,t){var i=this,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=t||document.createDocumentFragment(),o=this.config,r=o.renderSelectedChoices,s=o.searchResultLimit,l=o.renderChoiceLimit,c=this.isSearching?y.sortByScore:this.config.sortFilter,d=function(e){if("auto"!==r||(i.isSelectOneElement||!e.selected)){var t=i._getTemplate("choice",e);a.appendChild(t)}},h=e;"auto"!==r||this.isSelectOneElement||(h=e.filter(function(e){return!e.selected}));var u=h.reduce(function(e,t){return t.placeholder?e.placeholderChoices.push(t):e.normalChoices.push(t),e},{placeholderChoices:[],normalChoices:[]}),p=u.placeholderChoices,f=u.normalChoices;(this.config.shouldSort||this.isSearching)&&f.sort(c);var m=h.length,g=[].concat(b(p),b(f));this.isSearching?m=s:0<l&&!n&&(m=l);for(var v=0;v<m;v++)g[v]&&d(g[v]);return a}},{key:"renderItems",value:function(e){var i=this,n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)||document.createDocumentFragment();if(this.config.shouldSortItems&&!this.isSelectOneElement&&e.sort(this.config.sortFilter),this.isTextElement){var t=this.store.getItemsReducedToValues(e).join(this.config.delimiter);this.passedElement.setAttribute("value",t),this.passedElement.value=t}else{var a=document.createDocumentFragment();e.forEach(function(e){var t=i._getTemplate("option",e);a.appendChild(t)}),this.passedElement.innerHTML="",this.passedElement.appendChild(a)}return e.forEach(function(e){var t=i._getTemplate("item",e);n.appendChild(t)}),n}},{key:"render",value:function(){if(!this.store.isLoading()&&(this.currentState=this.store.getState(),this.currentState!==this.prevState)){if((this.currentState.choices!==this.prevState.choices||this.currentState.groups!==this.prevState.groups||this.currentState.items!==this.prevState.items)&&this.isSelectElement){var e=this.store.getGroupsFilteredByActive(),t=this.store.getChoicesFilteredByActive(),i=document.createDocumentFragment();this.choiceList.innerHTML="",this.config.resetScrollPosition&&(this.choiceList.scrollTop=0),1<=e.length&&!0!==this.isSearching?i=this.renderGroups(e,t,i):1<=t.length&&(i=this.renderChoices(t,i));var n=this.store.getItemsFilteredByActive(),a=this._canAddItem(n,this.input.value);if(i.childNodes&&0<i.childNodes.length)a.response?(this.choiceList.appendChild(i),this._highlightChoice()):this.choiceList.appendChild(this._getTemplate("notice",a.notice));else{var o=void 0,r=void 0;this.isSearching?(r=(0,y.isType)("Function",this.config.noResultsText)?this.config.noResultsText():this.config.noResultsText,o=this._getTemplate("notice",r,"no-results")):(r=(0,y.isType)("Function",this.config.noChoicesText)?this.config.noChoicesText():this.config.noChoicesText,o=this._getTemplate("notice",r,"no-choices")),this.choiceList.appendChild(o)}}if(this.currentState.items!==this.prevState.items){var s=this.store.getItemsFilteredByActive();if(this.itemList.innerHTML="",s&&s){var l=this.renderItems(s);l.childNodes&&this.itemList.appendChild(l)}}this.prevState=this.currentState}}},{key:"highlightItem",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!e)return this;var i=e.id,n=e.groupId,a=0<=n?this.store.getGroupById(n):null;return this.store.dispatch((0,f.highlightItem)(i,!0)),t&&(a&&a.value?(0,y.triggerEvent)(this.passedElement,"highlightItem",{id:i,value:e.value,label:e.label,groupValue:a.value}):(0,y.triggerEvent)(this.passedElement,"highlightItem",{id:i,value:e.value,label:e.label})),this}},{key:"unhighlightItem",value:function(e){if(!e)return this;var t=e.id,i=e.groupId,n=0<=i?this.store.getGroupById(i):null;return this.store.dispatch((0,f.highlightItem)(t,!1)),n&&n.value?(0,y.triggerEvent)(this.passedElement,"unhighlightItem",{id:t,value:e.value,label:e.label,groupValue:n.value}):(0,y.triggerEvent)(this.passedElement,"unhighlightItem",{id:t,value:e.value,label:e.label}),this}},{key:"highlightAll",value:function(){var t=this;return this.store.getItems().forEach(function(e){t.highlightItem(e)}),this}},{key:"unhighlightAll",value:function(){var t=this;return this.store.getItems().forEach(function(e){t.unhighlightItem(e)}),this}},{key:"removeItemsByValue",value:function(t){var i=this;return t&&(0,y.isType)("String",t)&&this.store.getItemsFilteredByActive().forEach(function(e){e.value===t&&i._removeItem(e)}),this}},{key:"removeActiveItems",value:function(t){var i=this;return this.store.getItemsFilteredByActive().forEach(function(e){e.active&&t!==e.id&&i._removeItem(e)}),this}},{key:"removeHighlightedItems",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.store.getItemsFilteredByActive().forEach(function(e){e.highlighted&&e.active&&(t._removeItem(e),i&&t._triggerChange(e.value))}),this}},{key:"showDropdown",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=document.body,i=document.documentElement,n=Math.max(t.scrollHeight,t.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);this.containerOuter.classList.add(this.config.classNames.openState),this.containerOuter.setAttribute("aria-expanded","true"),this.dropdown.classList.add(this.config.classNames.activeState),this.dropdown.setAttribute("aria-expanded","true");var a=this.dropdown.getBoundingClientRect(),o=Math.ceil(a.top+window.scrollY+this.dropdown.offsetHeight),r=!1;return"auto"===this.config.position?r=n<=o:"top"===this.config.position&&(r=!0),r&&this.containerOuter.classList.add(this.config.classNames.flippedState),e&&this.canSearch&&document.activeElement!==this.input&&this.input.focus(),(0,y.triggerEvent)(this.passedElement,"showDropdown",{}),this}},{key:"hideDropdown",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.containerOuter.classList.contains(this.config.classNames.flippedState);return this.containerOuter.classList.remove(this.config.classNames.openState),this.containerOuter.setAttribute("aria-expanded","false"),this.dropdown.classList.remove(this.config.classNames.activeState),this.dropdown.setAttribute("aria-expanded","false"),t&&this.containerOuter.classList.remove(this.config.classNames.flippedState),e&&this.canSearch&&document.activeElement===this.input&&this.input.blur(),(0,y.triggerEvent)(this.passedElement,"hideDropdown",{}),this}},{key:"toggleDropdown",value:function(){return this.dropdown.classList.contains(this.config.classNames.activeState)?this.hideDropdown():this.showDropdown(!0),this}},{key:"getValue",value:function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.store.getItemsFilteredByActive(),n=[];return e.forEach(function(e){t.isTextElement?n.push(i?e.value:e):e.active&&n.push(i?e.value:e)}),this.isSelectOneElement?n[0]:n}},{key:"setValue",value:function(e){var i=this;if(!0===this.initialised){var t=[].concat(b(e)),n=function(e){var t=(0,y.getType)(e);if("Object"===t){if(!e.value)return;i.isTextElement?i._addItem(e.value,e.label,e.id,void 0,e.customProperties,e.placeholder):i._addChoice(e.value,e.label,!0,!1,-1,e.customProperties,e.placeholder)}else"String"===t&&(i.isTextElement?i._addItem(e):i._addChoice(e,e,!0,!1,-1,null))};1<t.length?t.forEach(function(e){n(e)}):n(t[0])}return this}},{key:"setValueByChoice",value:function(e){var i=this;if(!this.isTextElement){var n=this.store.getChoices();((0,y.isType)("Array",e)?e:[e]).forEach(function(t){var e=n.find(function(e){return i.config.itemComparer(e.value,t)});e?e.selected?i.config.silent||console.warn("Attempting to select choice already selected"):i._addItem(e.value,e.label,e.id,e.groupId,e.customProperties,e.placeholder,e.keyCode):i.config.silent||console.warn("Attempting to select choice that does not exist")})}return this}},{key:"setChoices",value:function(e,t,i){var n=this,a=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(!0===this.initialised&&this.isSelectElement){if(!(0,y.isType)("Array",e)||!t)return this;a&&this._clearChoices(),this._setLoading(!0),e&&e.length&&(this.containerOuter.classList.remove(this.config.classNames.loadingState),e.forEach(function(e){e.choices?n._addGroup(e,e.id||null,t,i):n._addChoice(e[t],e[i],e.selected,e.disabled,void 0,e.customProperties,e.placeholder)})),this._setLoading(!1)}return this}},{key:"clearStore",value:function(){return this.store.dispatch((0,f.clearAll)()),this}},{key:"clearInput",value:function(){return this.input.value&&(this.input.value=""),this.isSelectOneElement||this._setInputWidth(),!this.isTextElement&&this.config.searchEnabled&&(this.isSearching=!1,this.store.dispatch((0,f.activateChoices)(!0))),this}},{key:"enable",value:function(){this.initialised&&(this.passedElement.disabled=!1,this.containerOuter.classList.contains(this.config.classNames.disabledState)&&(this._addEventListeners(),this.passedElement.removeAttribute("disabled"),this.input.removeAttribute("disabled"),this.containerOuter.classList.remove(this.config.classNames.disabledState),this.containerOuter.removeAttribute("aria-disabled"),this.isSelectOneElement&&this.containerOuter.setAttribute("tabindex","0")));return this}},{key:"disable",value:function(){this.initialised&&(this.passedElement.disabled=!0,!this.containerOuter.classList.contains(this.config.classNames.disabledState)&&(this._removeEventListeners(),this.passedElement.setAttribute("disabled",""),this.input.setAttribute("disabled",""),this.containerOuter.classList.add(this.config.classNames.disabledState),this.containerOuter.setAttribute("aria-disabled","true"),this.isSelectOneElement&&this.containerOuter.setAttribute("tabindex","-1")));return this}},{key:"ajax",value:function(e){var t=this;return!0===this.initialised&&this.isSelectElement&&(requestAnimationFrame(function(){t._handleLoadingState(!0)}),e(this._ajaxCallback())),this}},{key:"_triggerChange",value:function(e){e&&(0,y.triggerEvent)(this.passedElement,"change",{value:e})}},{key:"_handleButtonAction",value:function(e,t){if(e&&t&&this.config.removeItems&&this.config.removeItemButton){var i=t.parentNode.getAttribute("data-id"),n=e.find(function(e){return e.id===parseInt(i,10)});this._removeItem(n),this._triggerChange(n.value),this.isSelectOneElement&&this._selectPlaceholderChoice()}}},{key:"_selectPlaceholderChoice",value:function(){var e=this.store.getPlaceholderChoice();e&&(this._addItem(e.value,e.label,e.id,e.groupId,null,e.placeholder),this._triggerChange(e.value))}},{key:"_handleItemAction",value:function(e,t){var i=this,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(e&&t&&this.config.removeItems&&!this.isSelectOneElement){var a=t.getAttribute("data-id");e.forEach(function(e){e.id!==parseInt(a,10)||e.highlighted?n||e.highlighted&&i.unhighlightItem(e):i.highlightItem(e)}),document.activeElement!==this.input&&this.input.focus()}}},{key:"_handleChoiceAction",value:function(e,t){if(e&&t){var i=t.getAttribute("data-id"),n=this.store.getChoiceById(i),a=e[0]&&e[0].keyCode?e[0].keyCode:null,o=this.dropdown.classList.contains(this.config.classNames.activeState);if(n.keyCode=a,(0,y.triggerEvent)(this.passedElement,"choice",{choice:n}),n&&!n.selected&&!n.disabled)this._canAddItem(e,n.value).response&&(this._addItem(n.value,n.label,n.id,n.groupId,n.customProperties,n.placeholder,n.keyCode),this._triggerChange(n.value));this.clearInput(),o&&this.isSelectOneElement&&(this.hideDropdown(),this.containerOuter.focus())}}},{key:"_handleBackspace",value:function(e){if(this.config.removeItems&&e){var t=e[e.length-1],i=e.some(function(e){return e.highlighted});this.config.editItems&&!i&&t?(this.input.value=t.value,this._setInputWidth(),this._removeItem(t),this._triggerChange(t.value)):(i||this.highlightItem(t,!1),this.removeHighlightedItems(!0))}}},{key:"_canAddItem",value:function(e,t){var i=!0,n=(0,y.isType)("Function",this.config.addItemText)?this.config.addItemText(t):this.config.addItemText;return(this.isSelectMultipleElement||this.isTextElement)&&0<this.config.maxItemCount&&this.config.maxItemCount<=e.length&&(i=!1,n=(0,y.isType)("Function",this.config.maxItemText)?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),this.isTextElement&&this.config.addItems&&i&&this.config.regexFilter&&(i=this._regexFilter(t)),!e.some(function(e){return(0,y.isType)("String",t)?e.value===t.trim():e.value===t})||this.config.duplicateItems||this.isSelectOneElement||!i||(i=!1,n=(0,y.isType)("Function",this.config.uniqueItemText)?this.config.uniqueItemText(t):this.config.uniqueItemText),{response:i,notice:n}}},{key:"_handleLoadingState",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.itemList.querySelector("."+this.config.classNames.placeholder);e?(this.containerOuter.classList.add(this.config.classNames.loadingState),this.containerOuter.setAttribute("aria-busy","true"),this.isSelectOneElement?t?t.innerHTML=this.config.loadingText:(t=this._getTemplate("placeholder",this.config.loadingText),this.itemList.appendChild(t)):this.input.placeholder=this.config.loadingText):(this.containerOuter.classList.remove(this.config.classNames.loadingState),this.isSelectOneElement?t.innerHTML=this.placeholder||"":this.input.placeholder=this.placeholder||"")}},{key:"_ajaxCallback",value:function(){var a=this;return function(e,i,n){if(e&&i){var t=(0,y.isType)("Object",e)?[e]:e;t&&(0,y.isType)("Array",t)&&t.length?(a._handleLoadingState(!1),a._setLoading(!0),t.forEach(function(e){if(e.choices){var t=e.id||null;a._addGroup(e,t,i,n)}else a._addChoice(e[i],e[n],e.selected,e.disabled,void 0,e.customProperties,e.placeholder)}),a._setLoading(!1),a.isSelectOneElement&&a._selectPlaceholderChoice()):a._handleLoadingState(!1),a.containerOuter.removeAttribute("aria-busy")}}}},{key:"_searchChoices",value:function(e){var t=(0,y.isType)("String",e)?e.trim():e,i=(0,y.isType)("String",this.currentValue)?this.currentValue.trim():this.currentValue;if(1<=t.length&&t!==i+" "){var n=this.store.getSearchableChoices(),a=t,o=(0,y.isType)("Array",this.config.searchFields)?this.config.searchFields:[this.config.searchFields],r=Object.assign(this.config.fuseOptions,{keys:o}),s=new l.default(n,r).search(a);return this.currentValue=t,this.highlightPosition=0,this.isSearching=!0,this.store.dispatch((0,f.filterChoices)(s)),s.length}return 0}},{key:"_handleSearch",value:function(e){if(e){var t=this.store.getChoices().some(function(e){return!e.active});if(this.input===document.activeElement)if(e&&e.length>=this.config.searchFloor){var i=0;this.config.searchChoices&&(i=this._searchChoices(e)),(0,y.triggerEvent)(this.passedElement,"search",{value:e,resultCount:i})}else t&&(this.isSearching=!1,this.store.dispatch((0,f.activateChoices)(!0)))}}},{key:"_addEventListeners",value:function(){document.addEventListener("keyup",this._onKeyUp),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("click",this._onClick),document.addEventListener("touchmove",this._onTouchMove),document.addEventListener("touchend",this._onTouchEnd),document.addEventListener("mousedown",this._onMouseDown),document.addEventListener("mouseover",this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.addEventListener("focus",this._onFocus),this.containerOuter.addEventListener("blur",this._onBlur)),this.input.addEventListener("input",this._onInput),this.input.addEventListener("paste",this._onPaste),this.input.addEventListener("focus",this._onFocus),this.input.addEventListener("blur",this._onBlur)}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keyup",this._onKeyUp),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("click",this._onClick),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd),document.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mouseover",this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.removeEventListener("focus",this._onFocus),this.containerOuter.removeEventListener("blur",this._onBlur)),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("paste",this._onPaste),this.input.removeEventListener("focus",this._onFocus),this.input.removeEventListener("blur",this._onBlur)}},{key:"_setInputWidth",value:function(){this.placeholder?this.input.value&&this.input.value.length>=this.placeholder.length/1.25&&(this.input.style.width=(0,y.getWidthOfInput)(this.input)):this.input.style.width=(0,y.getWidthOfInput)(this.input)}},{key:"_onKeyDown",value:function(n){var e,a=this;if(n.target===this.input||this.containerOuter.contains(n.target)){var i=n.target,o=this.store.getItemsFilteredByActive(),t=this.input===document.activeElement,r=this.dropdown.classList.contains(this.config.classNames.activeState),s=this.itemList&&this.itemList.children,l=String.fromCharCode(n.keyCode),c=n.ctrlKey||n.metaKey;this.isTextElement||!/[a-zA-Z0-9-_ ]/.test(l)||r||this.showDropdown(!0),this.canSearch=this.config.searchEnabled;var d=function(){if(r||a.isSelectOneElement){r||a.showDropdown(!0),a.canSearch=!1;var e=40===n.keyCode||34===n.keyCode?1:-1,t=void 0;if(n.metaKey||34===n.keyCode||33===n.keyCode)t=0<e?Array.from(a.dropdown.querySelectorAll("[data-choice-selectable]")).pop():a.dropdown.querySelector("[data-choice-selectable]");else{var i=a.dropdown.querySelector("."+a.config.classNames.highlightedState);t=i?(0,y.getAdjacentEl)(i,"[data-choice-selectable]",e):a.dropdown.querySelector("[data-choice-selectable]")}t&&((0,y.isScrolledIntoView)(t,a.choiceList,e)||a._scrollToChoice(t,e),a._highlightChoice(t)),n.preventDefault()}},h=function(){!t||n.target.value||a.isSelectOneElement||(a._handleBackspace(o),n.preventDefault())},u=(p(e={},65,function(){c&&s&&(a.canSearch=!1,a.config.removeItems&&!a.input.value&&a.input===document.activeElement&&a.highlightAll())}),p(e,13,function(){if(a.isTextElement&&i.value){var e=a.input.value;a._canAddItem(o,e).response&&(r&&a.hideDropdown(),a._addItem(e),a._triggerChange(e),a.clearInput())}if(i.hasAttribute("data-button")&&(a._handleButtonAction(o,i),n.preventDefault()),r){n.preventDefault();var t=a.dropdown.querySelector("."+a.config.classNames.highlightedState);t&&(o[0]&&(o[0].keyCode=13),a._handleChoiceAction(o,t))}else a.isSelectOneElement&&(r||(a.showDropdown(!0),n.preventDefault()))}),p(e,27,function(){r&&(a.toggleDropdown(),a.containerOuter.focus())}),p(e,38,d),p(e,33,d),p(e,40,d),p(e,34,d),p(e,8,h),p(e,46,h),e);u[n.keyCode]&&u[n.keyCode]()}}},{key:"_onKeyUp",value:function(e){if(e.target===this.input){var t=this.input.value,i=this.store.getItemsFilteredByActive(),n=this._canAddItem(i,t);if(this.isTextElement){var a=this.dropdown.classList.contains(this.config.classNames.activeState);if(t){if(n.notice){var o=this._getTemplate("notice",n.notice);this.dropdown.innerHTML=o.outerHTML}!0===n.response?a||this.showDropdown():!n.notice&&a&&this.hideDropdown()}else a&&this.hideDropdown()}else{46!==e.keyCode&&8!==e.keyCode||e.target.value?this.canSearch&&n.response&&this._handleSearch(this.input.value):!this.isTextElement&&this.isSearching&&(this.isSearching=!1,this.store.dispatch((0,f.activateChoices)(!0)))}this.canSearch=this.config.searchEnabled}}},{key:"_onInput",value:function(){this.isSelectOneElement||this._setInputWidth()}},{key:"_onTouchMove",value:function(){!0===this.wasTap&&(this.wasTap=!1)}},{key:"_onTouchEnd",value:function(e){var t=e.target||e.touches[0].target,i=this.dropdown.classList.contains(this.config.classNames.activeState);!0===this.wasTap&&this.containerOuter.contains(t)&&(t!==this.containerOuter&&t!==this.containerInner||this.isSelectOneElement||(this.isTextElement?document.activeElement!==this.input&&this.input.focus():i||this.showDropdown(!0)),e.stopPropagation()),this.wasTap=!0}},{key:"_onMouseDown",value:function(e){var t=e.target;if(t===this.choiceList&&this.isIe11&&(this.isScrollingOnIe=!0),this.containerOuter.contains(t)&&t!==this.input){var i=void 0,n=this.store.getItemsFilteredByActive(),a=e.shiftKey;(i=(0,y.findAncestorByAttrName)(t,"data-button"))?this._handleButtonAction(n,i):(i=(0,y.findAncestorByAttrName)(t,"data-item"))?this._handleItemAction(n,i,a):(i=(0,y.findAncestorByAttrName)(t,"data-choice"))&&this._handleChoiceAction(n,i),e.preventDefault()}}},{key:"_onClick",value:function(e){var t=e.target,i=this.dropdown.classList.contains(this.config.classNames.activeState),n=this.store.getItemsFilteredByActive();this.containerOuter.contains(t)?(t.hasAttribute("data-button")&&this._handleButtonAction(n,t),i?this.isSelectOneElement&&t!==this.input&&!this.dropdown.contains(t)&&this.hideDropdown(!0):this.isTextElement?document.activeElement!==this.input&&this.input.focus():this.canSearch?this.showDropdown(!0):(this.showDropdown(),this.containerOuter.focus())):(n.some(function(e){return e.highlighted})&&this.unhighlightAll(),this.containerOuter.classList.remove(this.config.classNames.focusState),i&&this.hideDropdown())}},{key:"_onMouseOver",value:function(e){(e.target===this.dropdown||this.dropdown.contains(e.target))&&e.target.hasAttribute("data-choice")&&this._highlightChoice(e.target)}},{key:"_onPaste",value:function(e){e.target!==this.input||this.config.paste||e.preventDefault()}},{key:"_onFocus",value:function(e){var t=this,i=e.target;if(this.containerOuter.contains(i)){var n=this.dropdown.classList.contains(this.config.classNames.activeState);({text:function(){i===t.input&&t.containerOuter.classList.add(t.config.classNames.focusState)},"select-one":function(){t.containerOuter.classList.add(t.config.classNames.focusState),i===t.input&&(n||t.showDropdown())},"select-multiple":function(){i===t.input&&(t.containerOuter.classList.add(t.config.classNames.focusState),n||t.showDropdown(!0))}})[this.passedElement.type]()}}},{key:"_onBlur",value:function(e){var t=this,i=e.target;if(this.containerOuter.contains(i)&&!this.isScrollingOnIe){var n=this.store.getItemsFilteredByActive(),a=this.dropdown.classList.contains(this.config.classNames.activeState),o=n.some(function(e){return e.highlighted});({text:function(){i===t.input&&(t.containerOuter.classList.remove(t.config.classNames.focusState),o&&t.unhighlightAll(),a&&t.hideDropdown())},"select-one":function(){t.containerOuter.classList.remove(t.config.classNames.focusState),i===t.containerOuter&&a&&!t.canSearch&&t.hideDropdown(),i===t.input&&a&&t.hideDropdown()},"select-multiple":function(){i===t.input&&(t.containerOuter.classList.remove(t.config.classNames.focusState),a&&t.hideDropdown(),o&&t.unhighlightAll())}})[this.passedElement.type]()}else this.isScrollingOnIe=!1,this.input.focus()}},{key:"_regexFilter",value:function(e){if(!e)return!1;var t=this.config.regexFilter;return new RegExp(t.source,"i").test(e)}},{key:"_scrollToChoice",value:function(e,o){var r=this;if(e){var t=this.choiceList.offsetHeight,i=e.offsetHeight,n=e.offsetTop+i,a=this.choiceList.scrollTop+t,s=0<o?this.choiceList.scrollTop+n-a:e.offsetTop;requestAnimationFrame(function(e){!function t(){var e=r.choiceList.scrollTop,i=!1,n=void 0,a=void 0;0<o?(a=1<(n=(s-e)/4)?n:1,r.choiceList.scrollTop=e+a,e<s&&(i=!0)):(a=1<(n=(e-s)/4)?n:1,r.choiceList.scrollTop=e-a,s<e&&(i=!0)),i&&requestAnimationFrame(function(e){t()})}()})}}},{key:"_highlightChoice",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=Array.from(this.dropdown.querySelectorAll("[data-choice-selectable]")),n=e;i&&i.length&&(Array.from(this.dropdown.querySelectorAll("."+this.config.classNames.highlightedState)).forEach(function(e){e.classList.remove(t.config.classNames.highlightedState),e.setAttribute("aria-selected","false")}),n?this.highlightPosition=i.indexOf(n):(n=i.length>this.highlightPosition?i[this.highlightPosition]:i[i.length-1])||(n=i[0]),n.classList.add(this.config.classNames.highlightedState),n.setAttribute("aria-selected","true"),this.containerOuter.setAttribute("aria-activedescendant",n.id))}},{key:"_addItem",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:-1,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,o=5<arguments.length&&void 0!==arguments[5]&&arguments[5],r=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null,s=(0,y.isType)("String",e)?e.trim():e,l=r,c=this.store.getItems(),d=t||s,h=parseInt(i,10)||-1,u=0<=n?this.store.getGroupById(n):null,p=c?c.length+1:1;return this.config.prependValue&&(s=this.config.prependValue+s.toString()),this.config.appendValue&&(s+=this.config.appendValue.toString()),this.store.dispatch((0,f.addItem)(s,d,p,h,n,a,o,l)),this.isSelectOneElement&&this.removeActiveItems(p),u&&u.value?(0,y.triggerEvent)(this.passedElement,"addItem",{id:p,value:s,label:d,groupValue:u.value,keyCode:l}):(0,y.triggerEvent)(this.passedElement,"addItem",{id:p,value:s,label:d,keyCode:l}),this}},{key:"_removeItem",value:function(e){if(!e||!(0,y.isType)("Object",e))return this;var t=e.id,i=e.value,n=e.label,a=e.choiceId,o=e.groupId,r=0<=o?this.store.getGroupById(o):null;return this.store.dispatch((0,f.removeItem)(t,a)),r&&r.value?(0,y.triggerEvent)(this.passedElement,"removeItem",{id:t,value:i,label:n,groupValue:r.value}):(0,y.triggerEvent)(this.passedElement,"removeItem",{id:t,value:i,label:n}),this}},{key:"_addChoice",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:-1,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,r=6<arguments.length&&void 0!==arguments[6]&&arguments[6],s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:null;if(null!=e){var l=this.store.getChoices(),c=t||e,d=l?l.length+1:1,h=this.baseId+"-"+this.idNames.itemChoice+"-"+d;this.store.dispatch((0,f.addChoice)(e,c,d,a,n,h,o,r,s)),i&&this._addItem(e,c,d,void 0,o,r,s)}}},{key:"_clearChoices",value:function(){this.store.dispatch((0,f.clearChoices)())}},{key:"_addGroup",value:function(e,t){var i=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"value",a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"label",o=(0,y.isType)("Object",e)?e.choices:Array.from(e.getElementsByTagName("OPTION")),r=t||Math.floor((new Date).valueOf()*Math.random()),s=!!e.disabled&&e.disabled;o?(this.store.dispatch((0,f.addGroup)(e.label,r,!0,s)),o.forEach(function(e){var t=e.disabled||e.parentNode&&e.parentNode.disabled;i._addChoice(e[n],(0,y.isType)("Object",e)?e[a]:e.innerHTML,e.selected,t,r,e.customProperties,e.placeholder)})):this.store.dispatch((0,f.addGroup)(e.label,e.id,!1,e.disabled))}},{key:"_getTemplate",value:function(e){if(!e)return null;for(var t=this.config.templates,i=arguments.length,n=Array(1<i?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return t[e].apply(t,n)}},{key:"_createTemplates",value:function(){var a=this,o=this.config.classNames,e={containerOuter:function(e){return(0,y.strToEl)('\n          <div\n            class="'+o.containerOuter+'"\n            '+(a.isSelectElement?a.config.searchEnabled?'role="combobox" aria-autocomplete="list"':'role="listbox"':"")+'\n            data-type="'+a.passedElement.type+'"\n            '+(a.isSelectOneElement?'tabindex="0"':"")+'\n            aria-haspopup="true"\n            aria-expanded="false"\n            dir="'+e+'"\n            >\n          </div>\n        ')},containerInner:function(){return(0,y.strToEl)('\n          <div class="'+o.containerInner+'"></div>\n        ')},itemList:function(){var e,t=(0,r.default)(o.list,(p(e={},o.listSingle,a.isSelectOneElement),p(e,o.listItems,!a.isSelectOneElement),e));return(0,y.strToEl)('\n          <div class="'+t+'"></div>\n        ')},placeholder:function(e){return(0,y.strToEl)('\n          <div class="'+o.placeholder+'">\n            '+e+"\n          </div>\n        ")},item:function(e){var t,i,n=(0,r.default)(o.item,(p(t={},o.highlightedState,e.highlighted),p(t,o.itemSelectable,!e.highlighted),p(t,o.placeholder,e.placeholder),t));return a.config.removeItemButton?(n=(0,r.default)(o.item,(p(i={},o.highlightedState,e.highlighted),p(i,o.itemSelectable,!e.disabled),p(i,o.placeholder,e.placeholder),i)),(0,y.strToEl)('\n            <div\n              class="'+n+'"\n              data-item\n              data-id="'+e.id+'"\n              data-value="'+e.value+'"\n              data-deletable\n              '+(e.active?'aria-selected="true"':"")+"\n              "+(e.disabled?'aria-disabled="true"':"")+"\n              >\n              "+e.label+'\x3c!--\n           --\x3e<button\n                type="button"\n                class="'+o.button+'"\n                data-button\n                aria-label="Remove item: \''+e.value+"'\"\n                >\n                Remove item\n              </button>\n            </div>\n          ")):(0,y.strToEl)('\n          <div\n            class="'+n+'"\n            data-item\n            data-id="'+e.id+'"\n            data-value="'+e.value+'"\n            '+(e.active?'aria-selected="true"':"")+"\n            "+(e.disabled?'aria-disabled="true"':"")+"\n            >\n            "+e.label+"\n          </div>\n        ")},choiceList:function(){return(0,y.strToEl)('\n          <div\n            class="'+o.list+'"\n            dir="ltr"\n            role="listbox"\n            '+(a.isSelectOneElement?"":'aria-multiselectable="true"')+"\n            >\n          </div>\n        ")},choiceGroup:function(e){var t=(0,r.default)(o.group,p({},o.itemDisabled,e.disabled));return(0,y.strToEl)('\n          <div\n            class="'+t+'"\n            data-group\n            data-id="'+e.id+'"\n            data-value="'+e.value+'"\n            role="group"\n            '+(e.disabled?'aria-disabled="true"':"")+'\n            >\n            <div class="'+o.groupHeading+'">'+e.value+"</div>\n          </div>\n        ")},choice:function(e){var t,i=(0,r.default)(o.item,o.itemChoice,(p(t={},o.itemDisabled,e.disabled),p(t,o.itemSelectable,!e.disabled),p(t,o.placeholder,e.placeholder),t));return(0,y.strToEl)('\n          <div\n            class="'+i+'"\n            data-select-text="'+a.config.itemSelectText+'"\n            data-choice\n            data-id="'+e.id+'"\n            data-value="'+e.value+'"\n            '+(e.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable")+'\n            id="'+e.elementId+'"\n            '+(0<e.groupId?'role="treeitem"':'role="option"')+"\n            >\n            "+e.label+"\n          </div>\n        ")},input:function(){var e=(0,r.default)(o.input,o.inputCloned);return(0,y.strToEl)('\n          <input\n            type="text"\n            class="'+e+'"\n            autocomplete="off"\n            autocapitalize="off"\n            spellcheck="false"\n            role="textbox"\n            aria-autocomplete="list"\n            >\n        ')},dropdown:function(){var e=(0,r.default)(o.list,o.listDropdown);return(0,y.strToEl)('\n          <div\n            class="'+e+'"\n            aria-expanded="false"\n            >\n          </div>\n        ')},notice:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=(0,r.default)(o.item,o.itemChoice,(p(t={},o.noResults,"no-results"===i),p(t,o.noChoices,"no-choices"===i),t));return(0,y.strToEl)('\n          <div class="'+n+'">\n            '+e+"\n          </div>\n        ")},option:function(e){return(0,y.strToEl)('\n          <option value="'+e.value+'" selected>'+e.label+"</option>\n        ")}},t=this.config.callbackOnCreateTemplates,i={};t&&(0,y.isType)("Function",t)&&(i=t.call(this,y.strToEl)),this.config.templates=(0,y.extend)(e,i)}},{key:"_setLoading",value:function(e){this.store.dispatch((0,f.setIsLoading)(e))}},{key:"_createInput",value:function(){var n=this,e=this.passedElement.getAttribute("dir")||"ltr",t=this._getTemplate("containerOuter",e),i=this._getTemplate("containerInner"),a=this._getTemplate("itemList"),o=this._getTemplate("choiceList"),r=this._getTemplate("input"),s=this._getTemplate("dropdown");this.containerOuter=t,this.containerInner=i,this.input=r,this.choiceList=o,this.itemList=a,this.dropdown=s,this.passedElement.classList.add(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.tabIndex="-1";var l=this.passedElement.getAttribute("style");if(Boolean(l)&&this.passedElement.setAttribute("data-choice-orig-style",l),this.passedElement.setAttribute("style","display:none;"),this.passedElement.setAttribute("aria-hidden","true"),this.passedElement.setAttribute("data-choice","active"),(0,y.wrap)(this.passedElement,i),(0,y.wrap)(i,t),this.isSelectOneElement?r.placeholder=this.config.searchPlaceholderValue||"":this.placeholder&&(r.placeholder=this.placeholder,r.style.width=(0,y.getWidthOfInput)(r)),this.config.addItems||this.disable(),t.appendChild(i),t.appendChild(s),i.appendChild(a),this.isTextElement||s.appendChild(o),this.isSelectMultipleElement||this.isTextElement?i.appendChild(r):this.canSearch&&s.insertBefore(r,s.firstChild),this.isSelectElement){var c=Array.from(this.passedElement.getElementsByTagName("OPTGROUP"));if(this.highlightPosition=0,this.isSearching=!1,this._setLoading(!0),c&&c.length)c.forEach(function(e){n._addGroup(e,e.id||null)});else{var d=Array.from(this.passedElement.options),h=this.config.sortFilter,u=this.presetChoices;d.forEach(function(e){u.push({value:e.value,label:e.innerHTML,selected:e.selected,disabled:e.disabled||e.parentNode.disabled,placeholder:e.hasAttribute("placeholder")})}),this.config.shouldSort&&u.sort(h);var p=u.some(function(e){return e.selected});u.forEach(function(e,t){if(n.isSelectOneElement){var i=p||!p&&0<t;n._addChoice(e.value,e.label,!i||e.selected,!!i&&e.disabled,void 0,e.customProperties,e.placeholder)}else n._addChoice(e.value,e.label,e.selected,e.disabled,void 0,e.customProperties,e.placeholder)})}this._setLoading(!1)}else this.isTextElement&&this.presetItems.forEach(function(e){var t=(0,y.getType)(e);if("Object"===t){if(!e.value)return;n._addItem(e.value,e.label,e.id,void 0,e.customProperties,e.placeholder)}else"String"===t&&n._addItem(e)})}}]),o}();e.exports=o},function(a,e,t){!function(e){function E(){console.log.apply(console,arguments)}var n={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:i,sortFn:function(e,t){return e.score-t.score},getFn:function e(t,i,n){var a;var o;var r;var s;var l;var c;if(i){if(-1!==(r=i.indexOf("."))?(a=i.slice(0,r),o=i.slice(r+1)):a=i,null!=(s=t[a]))if(o||"string"!=typeof s&&"number"!=typeof s)if(x(s))for(l=0,c=s.length;l<c;l++)e(s[l],o,n);else o&&e(s,o,n);else n.push(s)}else n.push(t);return n},keys:[],verbose:!1,tokenize:!1,matchAllTokens:!1,tokenSeparator:/ +/g,minMatchCharLength:1,findAllMatches:!1};function t(e,t){var i;for(i in this.list=e,this.options=t=t||{},n)n.hasOwnProperty(i)&&("boolean"==typeof n[i]?this.options[i]=i in t?t[i]:n[i]:this.options[i]=t[i]||n[i])}function x(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e,t){t=t||{},this.options=t,this.options.location=t.location||i.defaultOptions.location,this.options.distance="distance"in t?t.distance:i.defaultOptions.distance,this.options.threshold="threshold"in t?t.threshold:i.defaultOptions.threshold,this.options.maxPatternLength=t.maxPatternLength||i.defaultOptions.maxPatternLength,this.pattern=t.caseSensitive?e:e.toLowerCase(),this.patternLen=e.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}t.VERSION="2.7.3",t.prototype.set=function(e){return this.list=e},t.prototype.search=function(e){return this.options.verbose&&E("\nSearch term:",e,"\n"),this.pattern=e,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort(),this._format()},t.prototype._prepareSearchers=function(){var e=this.options,t=this.pattern,i=e.searchFn,n=t.split(e.tokenSeparator),a=0,o=n.length;if(this.options.tokenize)for(this.tokenSearchers=[];a<o;a++)this.tokenSearchers.push(new i(n[a],e));this.fullSeacher=new i(t,e)},t.prototype._startSearch=function(){var e,t,i,n,a=this.options.getFn,o=this.list,r=o.length,s=this.options.keys,l=s.length,c=null;if("string"==typeof o[0])for(i=0;i<r;i++)this._analyze("",o[i],i,i);else for(this._keyMap={},i=0;i<r;i++)for(c=o[i],n=0;n<l;n++){if("string"!=typeof(e=s[n])){if(t=1-e.weight||1,this._keyMap[e.name]={weight:t},e.weight<=0||1<e.weight)throw new Error("Key weight has to be > 0 and <= 1");e=e.name}else this._keyMap[e]={weight:1};this._analyze(e,a(c,e,[]),c,i)}},t.prototype._analyze=function(e,t,i,n){var a,o,r,s,l,c,d,h,u,p,f,m,g,v,y,b=this.options,w=!1;if(null!=t){o=[];var C=0;if("string"==typeof t){if(a=t.split(b.tokenSeparator),b.verbose&&E("---------\nKey:",e),this.options.tokenize){for(v=0;v<this.tokenSearchers.length;v++){for(h=this.tokenSearchers[v],b.verbose&&E("Pattern:",h.pattern),m=!(u=[]),y=0;y<a.length;y++){p=a[y];var _={};(f=h.search(p)).isMatch?(_[p]=f.score,m=w=!0,o.push(f.score)):(_[p]=1,this.options.matchAllTokens||o.push(1)),u.push(_)}m&&C++,b.verbose&&E("Token scores:",u)}for(s=o[0],c=o.length,v=1;v<c;v++)s+=o[v];s/=c,b.verbose&&E("Token score average:",s)}d=this.fullSeacher.search(t),b.verbose&&E("Full text score:",d.score),l=d.score,void 0!==s&&(l=(l+s)/2),b.verbose&&E("Score average:",l),g=!this.options.tokenize||!this.options.matchAllTokens||C>=this.tokenSearchers.length,b.verbose&&E("Check Matches",g),(w||d.isMatch)&&g&&((r=this.resultMap[n])?r.output.push({key:e,score:l,matchedIndices:d.matchedIndices}):(this.resultMap[n]={item:i,output:[{key:e,score:l,matchedIndices:d.matchedIndices}]},this.results.push(this.resultMap[n])))}else if(x(t))for(v=0;v<t.length;v++)this._analyze(e,t[v],i,n)}},t.prototype._computeScore=function(){var e,t,i,n,a,o,r,s,l=this._keyMap,c=this.results;for(this.options.verbose&&E("\n\nComputing score:\n"),e=0;e<c.length;e++){for(i=0,a=(n=c[e].output).length,r=1,t=0;t<a;t++)s=n[t].score*(o=l?l[n[t].key].weight:1),1!==o?r=Math.min(r,s):(i+=s,n[t].nScore=s);c[e].score=1===r?i/a:r,this.options.verbose&&E(c[e])}},t.prototype._sort=function(){var e=this.options;e.shouldSort&&(e.verbose&&E("\n\nSorting...."),this.results.sort(e.sortFn))},t.prototype._format=function(){var e,t,i,n,a=this.options,o=a.getFn,r=[],s=this.results,l=a.include;for(a.verbose&&E("\n\nOutput:\n\n",s),i=a.id?function(e){s[e].item=o(s[e].item,a.id,[])[0]}:function(){},n=function(e){var t,i,n,a,o,r=s[e];if(0<l.length){if(t={item:r.item},-1!==l.indexOf("matches"))for(n=r.output,t.matches=[],i=0;i<n.length;i++)o={indices:(a=n[i]).matchedIndices},a.key&&(o.key=a.key),t.matches.push(o);-1!==l.indexOf("score")&&(t.score=s[e].score)}else t=r.item;return t},e=0,t=s.length;e<t;e++)i(e),r.push(n(e));return r},i.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},i.prototype._calculatePatternAlphabet=function(){var e={},t=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]|=1<<this.pattern.length-t-1;return e},i.prototype._bitapScore=function(e,t){var i=e/this.patternLen,n=Math.abs(this.options.location-t);return this.options.distance?i+n/this.options.distance:n?1:i},i.prototype.search=function(e){var t,i,n,a,o,r,s,l,c,d,h,u,p,f,m,g,v,y,b,w,C,_,E,x=this.options;if(e=x.caseSensitive?e:e.toLowerCase(),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};if(this.patternLen>x.maxPatternLength){if(b=!!(y=e.match(new RegExp(this.pattern.replace(x.tokenSeparator,"|")))))for(C=[],t=0,_=y.length;t<_;t++)E=y[t],C.push([e.indexOf(E),E.length-1]);return{isMatch:b,score:b?.5:1,matchedIndices:C}}for(a=x.findAllMatches,o=x.location,n=e.length,r=x.threshold,s=e.indexOf(this.pattern,o),w=[],t=0;t<n;t++)w[t]=0;for(-1!=s&&(r=Math.min(this._bitapScore(0,s),r),-1!=(s=e.lastIndexOf(this.pattern,o+this.patternLen))&&(r=Math.min(this._bitapScore(0,s),r))),s=-1,g=1,v=[],d=this.patternLen+n,t=0;t<this.patternLen;t++){for(l=0,c=d;l<c;)this._bitapScore(t,o+c)<=r?l=c:d=c,c=Math.floor((d-l)/2+l);for(d=c,h=Math.max(1,o-c+1),u=a?n:Math.min(o+c,n)+this.patternLen,(p=Array(u+2))[u+1]=(1<<t)-1,i=u;h<=i;i--)if((m=this.patternAlphabet[e.charAt(i-1)])&&(w[i-1]=1),p[i]=(p[i+1]<<1|1)&m,0!==t&&(p[i]|=(f[i+1]|f[i])<<1|1|f[i+1]),p[i]&this.matchmask&&(g=this._bitapScore(t,i-1))<=r){if(r=g,s=i-1,v.push(s),s<=o)break;h=Math.max(1,2*o-s)}if(this._bitapScore(t+1,o)>r)break;f=p}return{isMatch:0<=s,score:0===g?.001:g,matchedIndices:C=this._getMatchedIndices(w)}},i.prototype._getMatchedIndices=function(e){for(var t,i=[],n=-1,a=-1,o=0,r=e.length;o<r;o++)(t=e[o])&&-1===n?n=o:t||-1===n||((a=o-1)-n+1>=this.options.minMatchCharLength&&i.push([n,a]),n=-1);return e[o-1]&&o-1-n+1>=this.options.minMatchCharLength&&i.push([n,o-1]),i},a.exports=t}()},function(e,t,i){var n;!function(){var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var n=typeof i;if("string"===n||"number"===n)e.push(i);else if(Array.isArray(i))e.push(r.apply(null,i));else if("object"===n)for(var a in i)o.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}void 0!==e&&e.exports?e.exports=r:void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),o=i(5),r=i(26),s=(n=r)&&n.__esModule?n:{default:n};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=(0,o.createStore)(s.default,window.devToolsExtension?window.devToolsExtension():void 0)}return a(e,[{key:"getState",value:function(){return this.store.getState()}},{key:"dispatch",value:function(e){this.store.dispatch(e)}},{key:"subscribe",value:function(e){this.store.subscribe(e)}},{key:"isLoading",value:function(){return this.store.getState().general.loading}},{key:"getItems",value:function(){return this.store.getState().items}},{key:"getItemsFilteredByActive",value:function(){return this.getItems().filter(function(e){return!0===e.active},[])}},{key:"getItemsReducedToValues",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.getItems()).reduce(function(e,t){return e.push(t.value),e},[])}},{key:"getChoices",value:function(){return this.store.getState().choices}},{key:"getChoicesFilteredByActive",value:function(){return this.getChoices().filter(function(e){return!0===e.active})}},{key:"getChoicesFilteredBySelectable",value:function(){return this.getChoices().filter(function(e){return!0!==e.disabled})}},{key:"getSearchableChoices",value:function(){return this.getChoicesFilteredBySelectable().filter(function(e){return!0!==e.placeholder})}},{key:"getChoiceById",value:function(t){return!!t&&this.getChoicesFilteredByActive().find(function(e){return e.id===parseInt(t,10)})}},{key:"getGroups",value:function(){return this.store.getState().groups}},{key:"getGroupsFilteredByActive",value:function(){var e=this.getGroups(),n=this.getChoices();return e.filter(function(e){var t=!0===e.active&&!1===e.disabled,i=n.some(function(e){return!0===e.active&&!1===e.disabled});return t&&i},[])}},{key:"getGroupById",value:function(t){return this.getGroups().find(function(e){return e.id===t})}},{key:"getPlaceholderChoice",value:function(){var e=this.getChoices();return[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(e)).reverse().find(function(e){return!0===e.placeholder})}}]),e}();t.default=l,e.exports=l},function(e,t,i){t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var n=l(i(6)),a=l(i(21)),o=l(i(23)),r=l(i(24)),s=l(i(25));l(i(22));function l(e){return e&&e.__esModule?e:{default:e}}t.createStore=n.default,t.combineReducers=a.default,t.bindActionCreators=o.default,t.applyMiddleware=r.default,t.compose=s.default},function(e,t,i){t.__esModule=!0,t.ActionTypes=void 0,t.default=function e(t,i,n){var a;"function"==typeof i&&void 0===n&&(n=i,i=void 0);if(void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(e)(t,i)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var o=t;var r=i;var s=[];var l=s;var c=!1;function d(){l===s&&(l=s.slice())}function h(){return r}function u(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var i=!0;return d(),l.push(t),function(){if(i){i=!1,d();var e=l.indexOf(t);l.splice(e,1)}}}function p(e){if(!(0,f.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,r=o(r,e)}finally{c=!1}for(var t=s=l,i=0;i<t.length;i++){var n=t[i];n()}return e}p({type:g.INIT});return a={dispatch:p,subscribe:u,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,p({type:g.INIT})}},a[m.default]=function(){var e,n=u;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(h())}t();var i=n(t);return{unsubscribe:i}}})[m.default]=function(){return this},e},a};var f=n(i(7)),m=n(i(17));function n(e){return e&&e.__esModule?e:{default:e}}var g=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,i){var n=i(8),a=i(14),o=i(16),r=Function.prototype,s=Object.prototype,l=r.toString,c=s.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=n(e))return!1;var t=a(e);if(null===t)return!0;var i=c.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==d}},function(e,t,i){var n=i(9),a=i(12),o=i(13),r=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?a(e):o(e)}},function(e,t,i){var n=i(10).Symbol;e.exports=n},function(e,t,i){var n=i(11),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},function(i,e){(function(e){var t="object"==typeof e&&e&&e.Object===Object&&e;i.exports=t}).call(e,function(){return this}())},function(e,t,i){var n=i(9),a=Object.prototype,o=a.hasOwnProperty,r=a.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),i=e[s];try{var n=!(e[s]=void 0)}catch(e){}var a=r.call(e);return n&&(t?e[s]=i:delete e[s]),a}},function(e,t){var i=Object.prototype.toString;e.exports=function(e){return i.call(e)}},function(e,t,i){var n=i(15)(Object.getPrototypeOf,Object);e.exports=n},function(e,t){e.exports=function(t,i){return function(e){return t(i(e))}}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,i){e.exports=i(18)},function(e,s,l){(function(e,t){Object.defineProperty(s,"__esModule",{value:!0});var i,n,a=l(20),o=(i=a)&&i.__esModule?i:{default:i};n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:t;var r=(0,o.default)(n);s.default=r}).call(s,function(){return this}(),l(19)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,i=e.Symbol;"function"==typeof i?i.observable?t=i.observable:(t=i("observable"),i.observable=t):t="@@observable";return t}},function(e,t,i){t.__esModule=!0,t.default=function(e){for(var t=Object.keys(e),p={},i=0;i<t.length;i++){var n=t[i];0,"function"==typeof e[n]&&(p[n]=e[n])}var f=Object.keys(p);0;var m=void 0;try{a=p,Object.keys(a).forEach(function(e){var t=a[e],i=t(void 0,{type:o.ActionTypes.INIT});if(void 0===i)throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");var n="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===t(void 0,{type:n}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+o.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(e){m=e}var a;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(m)throw m;for(var i,n,a,o=!1,r={},s=0;s<f.length;s++){var l=f[s],c=p[l],d=e[l],h=c(d,t);if(void 0===h){var u=(i=l,a=void 0,a=(n=t)&&n.type,"Given action "+(a&&'"'+a.toString()+'"'||"an action")+', reducer "'+i+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(u)}r[l]=h,o=o||h!==d}return o?r:e}};var o=i(6);n(i(7)),n(i(22));function n(e){return e&&e.__esModule?e:{default:e}}},function(e,t){t.__esModule=!0,t.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},function(e,t){function s(e,t){return function(){return t(e.apply(void 0,arguments))}}t.__esModule=!0,t.default=function(e,t){if("function"==typeof e)return s(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var i=Object.keys(e),n={},a=0;a<i.length;a++){var o=i[a],r=e[o];"function"==typeof r&&(n[o]=s(r,t))}return n}},function(e,t,i){t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};t.default=function(){for(var e=arguments.length,l=Array(e),t=0;t<e;t++)l[t]=arguments[t];return function(s){return function(e,t,i){var n=s(e,t,i),a=n.dispatch,o=[],r={getState:n.getState,dispatch:function(e){return a(e)}};return o=l.map(function(e){return e(r)}),a=d.default.apply(void 0,o)(n.dispatch),c({},n,{dispatch:a})}}};var n,a=i(25),d=(n=a)&&n.__esModule?n:{default:n}},function(e,t){t.__esModule=!0,t.default=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(5),a=l(i(27)),o=l(i(28)),r=l(i(29)),s=l(i(30));function l(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.combineReducers)({items:a.default,groups:o.default,choices:r.default,general:s.default});t.default=function(e,t){var i=e;return"CLEAR_ALL"===t.type&&(i=void 0),c(i,t)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"ADD_ITEM":return[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(e),[{id:t.id,choiceId:t.choiceId,groupId:t.groupId,value:t.value,label:t.label,active:!0,highlighted:!1,customProperties:t.customProperties,placeholder:t.placeholder||!1,keyCode:null}]).map(function(e){return e.highlighted&&(e.highlighted=!1),e});case"REMOVE_ITEM":return e.map(function(e){return e.id===t.id&&(e.active=!1),e});case"HIGHLIGHT_ITEM":return e.map(function(e){return e.id===t.id&&(e.highlighted=t.highlighted),e});default:return e}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"ADD_GROUP":return[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(e),[{id:t.id,value:t.value,active:t.active,disabled:t.disabled}]);case"CLEAR_CHOICES":return e.groups=[];default:return e}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"ADD_CHOICE":return[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(e),[{id:t.id,elementId:t.elementId,groupId:t.groupId,value:t.value,label:t.label||t.value,disabled:t.disabled||!1,selected:!1,active:!0,score:9999,customProperties:t.customProperties,placeholder:t.placeholder||!1,keyCode:null}]);case"ADD_ITEM":var i=e;return t.activateOptions&&(i=e.map(function(e){return e.active=t.active,e})),-1<t.choiceId&&(i=e.map(function(e){return e.id===parseInt(t.choiceId,10)&&(e.selected=!0),e})),i;case"REMOVE_ITEM":return-1<t.choiceId?e.map(function(e){return e.id===parseInt(t.choiceId,10)&&(e.selected=!1),e}):e;case"FILTER_CHOICES":var n=t.results;return e.map(function(t){return t.active=n.some(function(e){return e.item.id===t.id&&(t.score=e.score,!0)}),t});case"ACTIVATE_CHOICES":return e.map(function(e){return e.active=t.active,e});case"CLEAR_CHOICES":return e.choices=[];default:return e}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{loading:!1},t=arguments[1];switch(t.type){case"LOADING":return{loading:t.isLoading};default:return e}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.addItem=function(e,t,i,n,a,o,r,s){return{type:"ADD_ITEM",value:e,label:t,id:i,choiceId:n,groupId:a,customProperties:o,placeholder:r,keyCode:s}},t.removeItem=function(e,t){return{type:"REMOVE_ITEM",id:e,choiceId:t}},t.highlightItem=function(e,t){return{type:"HIGHLIGHT_ITEM",id:e,highlighted:t}},t.addChoice=function(e,t,i,n,a,o,r,s,l){return{type:"ADD_CHOICE",value:e,label:t,id:i,groupId:n,disabled:a,elementId:o,customProperties:r,placeholder:s,keyCode:l}},t.filterChoices=function(e){return{type:"FILTER_CHOICES",results:e}},t.activateChoices=function(){return{type:"ACTIVATE_CHOICES",active:!(0<arguments.length&&void 0!==arguments[0])||arguments[0]}},t.clearChoices=function(){return{type:"CLEAR_CHOICES"}},t.addGroup=function(e,t,i,n){return{type:"ADD_GROUP",value:e,id:t,active:i,disabled:n}},t.clearAll=function(){return{type:"CLEAR_ALL"}},t.setIsLoading=function(e){return{type:"LOADING",isLoading:e}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(t.capitalise=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},t.generateChars=function(e){for(var t="",i=0;i<e;i++){t+=c(0,36).toString(36)}return t}),o=(t.generateId=function(e,t){var i=e.id||e.name&&e.name+"-"+a(2)||a(4);return i=t+(i=i.replace(/(:|\.|\[|\]|,)/g,""))},t.getType=function(e){return Object.prototype.toString.call(e).slice(8,-1)}),r=t.isType=function(e,t){var i=o(t);return null!=t&&i===e},s=(t.isNode=function(e){return"object"===("undefined"==typeof Node?"undefined":i(Node))?e instanceof Node:e&&"object"===(void 0===e?"undefined":i(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},t.isElement=function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":i(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":i(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},t.extend=function i(){for(var n={},e=arguments.length,t=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r("Object",e[t])?n[t]=i(!0,n[t],e[t]):n[t]=e[t])},a=0;a<e;a++){var o=arguments[a];r("Object",o)&&t(o)}return n},t.whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},t.whichAnimationEvent=function(){var e,t=document.createElement("fakeelement"),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==t.style[e])return i[e]}),l=(t.getParentsUntil=function(e,t,i){for(var n=[];e&&e!==document;e=e.parentNode){if(t){var a=t.charAt(0);if("."===a&&e.classList.contains(t.substr(1)))break;if("#"===a&&e.id===t.substr(1))break;if("["===a&&e.hasAttribute(t.substr(1,t.length-1)))break;if(e.tagName.toLowerCase()===t)break}if(i){var o=i.charAt(0);"."===o&&e.classList.contains(i.substr(1))&&n.push(e),"#"===o&&e.id===i.substr(1)&&n.push(e),"["===o&&e.hasAttribute(i.substr(1,i.length-1))&&n.push(e),e.tagName.toLowerCase()===i&&n.push(e)}else n.push(e)}return 0===n.length?null:n},t.wrap=function(e,t){return t=t||document.createElement("div"),e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t.appendChild(e)},t.getSiblings=function(e){for(var t=[],i=e.parentNode.firstChild;i;i=i.nextSibling)1===i.nodeType&&i!==e&&t.push(i);return t},t.findAncestor=function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},t.findAncestorByAttrName=function(e,t){for(var i=e;i;){if(i.hasAttribute(t))return i;i=i.parentElement}return null},t.debounce=function(n,a,o){var r;return function(){var e=this,t=arguments,i=o&&!r;clearTimeout(r),r=setTimeout(function(){r=null,o||n.apply(e,t)},a),i&&n.apply(e,t)}},t.getElemDistance=function(e){var t=0;if(e.offsetParent)for(;t+=e.offsetTop,e=e.offsetParent;);return 0<=t?t:0},t.getElementOffset=function(e,t){var i=t;return 1<i&&(i=1),0<i&&(i=0),Math.max(e.offsetHeight*i)},t.getAdjacentEl=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(e&&t){var n=e.parentNode.parentNode,a=Array.from(n.querySelectorAll(t)),o=a.indexOf(e);return a[o+(0<i?1:-1)]}},t.getScrollPosition=function(e){return"bottom"===e?Math.max((window.scrollY||window.pageYOffset)+(window.innerHeight||document.documentElement.clientHeight)):window.scrollY||window.pageYOffset},t.isInView=function(e,t,i){return this.getScrollPosition(t)>this.getElemDistance(e)+this.getElementOffset(e,i)},t.isScrolledIntoView=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(e){return 0<i?t.scrollTop+t.offsetHeight>=e.offsetTop+e.offsetHeight:e.offsetTop>=t.scrollTop}},t.stripHTML=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&rt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}),c=(t.addAnimation=function(t,i){var n=s();t.classList.add(i),t.addEventListener(n,function e(){t.classList.remove(i),t.removeEventListener(n,e,!1)},!1)},t.getRandomNumber=function(e,t){return Math.floor(Math.random()*(t-e)+e)}),d=t.strToEl=(n=document.createElement("div"),function(e){var t,i=e.trim();for(n.innerHTML=i,t=n.children[0];n.firstChild;)n.removeChild(n.firstChild);return t});t.getWidthOfInput=function(e){var t=e.value||e.placeholder,i=e.offsetWidth;if(t){var n=d("<span>"+l(t)+"</span>");if(n.style.position="absolute",n.style.padding="0",n.style.top="-9999px",n.style.left="-9999px",n.style.width="auto",n.style.whiteSpace="pre",document.body.contains(e)&&window.getComputedStyle){var a=window.getComputedStyle(e);a&&(n.style.fontSize=a.fontSize,n.style.fontFamily=a.fontFamily,n.style.fontWeight=a.fontWeight,n.style.fontStyle=a.fontStyle,n.style.letterSpacing=a.letterSpacing,n.style.textTransform=a.textTransform,n.style.padding=a.padding)}document.body.appendChild(n),t&&n.offsetWidth!==e.offsetWidth&&(i=n.offsetWidth+4),document.body.removeChild(n)}return i+"px"},t.sortByAlpha=function(e,t){var i=(e.label||e.value).toLowerCase(),n=(t.label||t.value).toLowerCase();return i<n?-1:n<i?1:0},t.sortByScore=function(e,t){return e.score-t.score},t.triggerEvent=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0});return e.dispatchEvent(n)}},function(e,t){!function(){var t,l,n,c;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}Array.from||(Array.from=(t=Object.prototype.toString,l=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},n=Math.pow(2,53)-1,c=function(e){var t,i=(t=Number(e),isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t);return Math.min(Math.max(i,0),n)},function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,n=1<arguments.length?arguments[1]:void 0;if(void 0!==n){if(!l(n))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(i=arguments[2])}for(var a,o=c(t.length),r=l(this)?Object(new this(o)):new Array(o),s=0;s<o;)a=t[s],r[s]=n?void 0===i?n(a,s):n.call(i,a,s):a,s+=1;return r.length=o,r})),Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,a=arguments[1],o=0;o<n;o++)if(t=i[o],e.call(a,t,o,i))return t}),e.prototype=window.Event.prototype,window.CustomEvent=e}()}])});