"use strict";!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Cropper=b()}(this,function(){function a(a){return fa.call(a).slice(8,-1).toLowerCase()}function b(a){return"number"==typeof a&&!isNaN(a)}function c(a){return"undefined"==typeof a}function d(a){return"object"===("undefined"==typeof a?"undefined":W(a))&&null!==a}function e(a){if(!d(a))return!1;try{var b=a.constructor,c=b.prototype;return b&&c&&ga.call(c,"isPrototypeOf")}catch(a){return!1}}function f(b){return"function"===a(b)}function g(b){return Array.isArray?Array.isArray(b):"array"===a(b)}function h(a){return"string"==typeof a&&(a=a.trim?a.trim():a.replace(aa,"$1")),a}function i(a,c){if(a&&f(c)){var e=void 0;if(g(a)||b(a.length)){var h=a.length;for(e=0;e<h&&c.call(a,a[e],e,a)!==!1;e+=1);}else d(a)&&Object.keys(a).forEach(function(b){c.call(a,a[b],b,a)})}return a}function j(a){for(var b=arguments.length,c=Array(b>1?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];if(d(a)&&c.length>0){if(Object.assign)return Object.assign.apply(Object,[a].concat(c));c.forEach(function(b){d(b)&&Object.keys(b).forEach(function(c){a[c]=b[c]})})}return a}function k(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return function(){for(var c=arguments.length,e=Array(c),f=0;f<c;f++)e[f]=arguments[f];return a.apply(b,d.concat(e))}}function l(a,c){var d=a.style;i(c,function(a,c){_.test(c)&&b(a)&&(a+="px"),d[c]=a})}function m(a,b){return a.classList?a.classList.contains(b):a.className.indexOf(b)>-1}function n(a,c){if(c){if(b(a.length))return void i(a,function(a){n(a,c)});if(a.classList)return void a.classList.add(c);var d=h(a.className);d?d.indexOf(c)<0&&(a.className=d+" "+c):a.className=c}}function o(a,c){if(c)return b(a.length)?void i(a,function(a){o(a,c)}):a.classList?void a.classList.remove(c):void(a.className.indexOf(c)>=0&&(a.className=a.className.replace(c,"")))}function p(a,c,d){if(c)return b(a.length)?void i(a,function(a){p(a,c,d)}):void(d?n(a,c):o(a,c))}function q(a){return a.replace(Y,"$1-$2").toLowerCase()}function r(a,b){return d(a[b])?a[b]:a.dataset?a.dataset[b]:a.getAttribute("data-"+q(b))}function s(a,b,c){d(c)?a[b]=c:a.dataset?a.dataset[b]=c:a.setAttribute("data-"+q(b),c)}function t(a,b){if(d(a[b]))delete a[b];else if(a.dataset)try{delete a.dataset[b]}catch(c){a.dataset[b]=null}else a.removeAttribute("data-"+q(b))}function u(a,b,c){var d=h(b).split($);return d.length>1?void i(d,function(b){u(a,b,c)}):void(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c))}function v(a,b,c,d){var e=h(b).split($),f=c;return e.length>1?void i(e,function(b){v(a,b,c)}):(d&&(c=function(){for(var d=arguments.length,e=Array(d),g=0;g<d;g++)e[g]=arguments[g];return u(a,b,c),f.apply(a,e)}),void(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)))}function w(a,b,d){if(a.dispatchEvent){var e=void 0;return f(Event)&&f(CustomEvent)?e=c(d)?new Event(b,{bubbles:!0,cancelable:!0}):new CustomEvent(b,{detail:d,bubbles:!0,cancelable:!0}):c(d)?(e=document.createEvent("Event"),e.initEvent(b,!0,!0)):(e=document.createEvent("CustomEvent"),e.initCustomEvent(b,!0,!0,d)),a.dispatchEvent(e)}return!a.fireEvent||a.fireEvent("on"+b)}function x(a){var c=a||window.event;if(c.target||(c.target=c.srcElement||document),!b(c.pageX)&&b(c.clientX)){var d=a.target.ownerDocument||document,e=d.documentElement,f=d.body;c.pageX=c.clientX+((e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0)),c.pageY=c.clientY+((e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0))}return c}function y(a){var b=document.documentElement,c=a.getBoundingClientRect();return{left:c.left+((window.scrollX||b&&b.scrollLeft||0)-(b&&b.clientLeft||0)),top:c.top+((window.scrollY||b&&b.scrollTop||0)-(b&&b.clientTop||0))}}function z(a,b){return a.getElementsByTagName(b)}function A(a,b){return a.getElementsByClassName?a.getElementsByClassName(b):a.querySelectorAll("."+b)}function B(a){return document.createElement(a)}function C(a,b){a.appendChild(b)}function D(a){a.parentNode&&a.parentNode.removeChild(a)}function E(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function F(a){var b=a.match(Z);return b&&(b[1]!==location.protocol||b[2]!==location.hostname||b[3]!==location.port)}function G(a){var b="timestamp="+(new Date).getTime();return a+(a.indexOf("?")===-1?"?":"&")+b}function H(a,b){if(a.naturalWidth&&!da)return void b(a.naturalWidth,a.naturalHeight);var c=B("img");c.onload=function(){b(this.width,this.height)},c.src=a.src}function I(a){var c=[],d=a.translateX,e=a.translateY,f=a.rotate,g=a.scaleX,h=a.scaleY;b(d)&&0!==d&&c.push("translateX("+d+"px)"),b(e)&&0!==e&&c.push("translateY("+e+"px)"),b(f)&&0!==f&&c.push("rotate("+f+"deg)"),b(g)&&1!==g&&c.push("scaleX("+g+")"),b(h)&&1!==h&&c.push("scaleY("+h+")");var i=c.length?c.join(" "):"none";return{WebkitTransform:i,msTransform:i,transform:i}}function J(a,b){var c=Math.abs(a.degree)%180,d=(c>90?180-c:c)*Math.PI/180,e=Math.sin(d),f=Math.cos(d),g=a.width,h=a.height,i=a.aspectRatio,j=void 0,k=void 0;return b?(j=g/(f+e/i),k=j/i):(j=g*f+h*e,k=g*e+h*f),{width:j,height:k}}function K(a,c,d){var e=B("canvas"),f=e.getContext("2d"),g=0,h=0,i=c.naturalWidth,j=c.naturalHeight,k=c.rotate,l=c.scaleX,m=c.scaleY,n=b(l)&&b(m)&&(1!==l||1!==m),o=b(k)&&0!==k,p=o||n,q=i*Math.abs(l||1),r=j*Math.abs(m||1),s=void 0,t=void 0,u=void 0;return n&&(s=q/2,t=r/2),o&&(u=J({width:q,height:r,degree:k}),q=u.width,r=u.height,s=q/2,t=r/2),e.width=q,e.height=r,d.fillColor&&(f.fillStyle=d.fillColor,f.fillRect(0,0,q,r)),p&&(g=-i/2,h=-j/2,f.save(),f.translate(s,t)),o&&f.rotate(k*Math.PI/180),n&&f.scale(l,m),f.imageSmoothingEnabled=!!d.imageSmoothingEnabled,d.imageSmoothingQuality&&(f.imageSmoothingQuality=d.imageSmoothingQuality),f.drawImage(a,Math.floor(g),Math.floor(h),Math.floor(i),Math.floor(j)),p&&f.restore(),e}function L(a,b,c){var d="",e=b;for(c+=b;e<c;e+=1)d+=ha(a.getUint8(e));return d}function M(a){var b=new DataView(a),c=b.byteLength,d=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0;if(255===b.getUint8(0)&&216===b.getUint8(1))for(l=2;l<c;){if(255===b.getUint8(l)&&225===b.getUint8(l+1)){j=l;break}l+=1}if(j&&(e=j+4,f=j+10,"Exif"===L(b,e,4)&&(i=b.getUint16(f),h=18761===i,(h||19789===i)&&42===b.getUint16(f+2,h)&&(g=b.getUint32(f+4,h),g>=8&&(k=f+g)))),k)for(c=b.getUint16(k,h),m=0;m<c;m+=1)if(l=k+12*m+2,274===b.getUint16(l,h)){l+=8,d=b.getUint16(l,h),da&&b.setUint16(l,1,h);break}return d}function N(a){var b=a.replace(X,""),c=atob(b),d=c.length,e=new ArrayBuffer(d),f=new Uint8Array(e),g=void 0;for(g=0;g<d;g+=1)f[g]=c.charCodeAt(g);return e}function O(a){var b=new Uint8Array(a),c=b.length,d="",e=void 0;for(e=0;e<c;e+=1)d+=ha(b[e]);return"data:image/jpeg;base64,"+btoa(d)}function P(a,b){var c=a.pageX,d=a.pageY,e={endX:c,endY:d};return b?e:j({startX:c,startY:d},e)}function Q(a){var b=j({},a),c=[];return i(a,function(a,d){delete b[d],i(b,function(b){var d=Math.abs(a.startX-b.startX),e=Math.abs(a.startY-b.startY),f=Math.abs(a.endX-b.endX),g=Math.abs(a.endY-b.endY),h=Math.sqrt(d*d+e*e),i=Math.sqrt(f*f+g*g),j=(i-h)/h;c.push(j)})}),c.sort(function(a,b){return Math.abs(a)<Math.abs(b)}),c[0]}function R(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function S(a){var b=0,c=0,d=0;return i(a,function(a){var e=a.startX,f=a.startY;b+=e,c+=f,d+=1}),b/=d,c/=d,{pageX:b,pageY:c}}function T(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var U={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},V='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},X=/^data:.*,/,Y=/([a-z\d])([A-Z])/g,Z=/^(https?:)\/\/([^:\/?#]+):?(\d*)/i,$=/\s+/,_=/^(width|height|left|top|marginLeft|marginTop)$/,aa=/^\s+(.*)\s+$/,ba=/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i,ca="undefined"!=typeof window?window.navigator:null,da=ca&&ba.test(ca.userAgent),ea=Object.prototype,fa=ea.toString,ga=ea.hasOwnProperty,ha=String.fromCharCode,ia={render:function(){var a=this;a.initContainer(),a.initCanvas(),a.initCropBox(),a.renderCanvas(),a.cropped&&a.renderCropBox()},initContainer:function(){var a=this,b=a.options,c=a.element,d=a.container,e=a.cropper,f="cropper-hidden";n(e,f),o(c,f);var g={width:Math.max(d.offsetWidth,Number(b.minContainerWidth)||200),height:Math.max(d.offsetHeight,Number(b.minContainerHeight)||100)};a.containerData=g,l(e,{width:g.width,height:g.height}),n(c,f),o(e,f)},initCanvas:function(){var a=this,b=a.options.viewMode,c=a.containerData,d=a.imageData,e=Math.abs(d.rotate)%180===90,f=e?d.naturalHeight:d.naturalWidth,g=e?d.naturalWidth:d.naturalHeight,h=f/g,i=c.width,k=c.height;c.height*h>c.width?3===b?i=c.height*h:k=c.width/h:3===b?k=c.width/h:i=c.height*h;var l={naturalWidth:f,naturalHeight:g,aspectRatio:h,width:i,height:k};l.left=(c.width-i)/2,l.top=(c.height-k)/2,l.oldLeft=l.left,l.oldTop=l.top,a.canvasData=l,a.limited=1===b||2===b,a.limitCanvas(!0,!0),a.initialImageData=j({},d),a.initialCanvasData=j({},l)},limitCanvas:function(a,b){var c=this,d=c.options,e=d.viewMode,f=c.containerData,g=c.canvasData,h=g.aspectRatio,i=c.cropBoxData,j=c.cropped&&i;if(a){var k=Number(d.minCanvasWidth)||0,l=Number(d.minCanvasHeight)||0;e>1?(k=Math.max(k,f.width),l=Math.max(l,f.height),3===e&&(l*h>k?k=l*h:l=k/h)):e>0&&(k?k=Math.max(k,j?i.width:0):l?l=Math.max(l,j?i.height:0):j&&(k=i.width,l=i.height,l*h>k?k=l*h:l=k/h)),k&&l?l*h>k?l=k/h:k=l*h:k?l=k/h:l&&(k=l*h),g.minWidth=k,g.minHeight=l,g.maxWidth=1/0,g.maxHeight=1/0}if(b)if(e){var m=f.width-g.width,n=f.height-g.height;g.minLeft=Math.min(0,m),g.minTop=Math.min(0,n),g.maxLeft=Math.max(0,m),g.maxTop=Math.max(0,n),j&&c.limited&&(g.minLeft=Math.min(i.left,i.left+(i.width-g.width)),g.minTop=Math.min(i.top,i.top+(i.height-g.height)),g.maxLeft=i.left,g.maxTop=i.top,2===e&&(g.width>=f.width&&(g.minLeft=Math.min(0,m),g.maxLeft=Math.max(0,m)),g.height>=f.height&&(g.minTop=Math.min(0,n),g.maxTop=Math.max(0,n))))}else g.minLeft=-g.width,g.minTop=-g.height,g.maxLeft=f.width,g.maxTop=f.height},renderCanvas:function(a){var b=this,c=b.canvasData,d=b.imageData,e=d.rotate;if(b.rotated){b.rotated=!1;var f=J({width:d.width,height:d.height,degree:e}),g=f.width/f.height,h=1===d.aspectRatio;if(h||g!==c.aspectRatio){if(c.left-=(f.width-c.width)/2,c.top-=(f.height-c.height)/2,c.width=f.width,c.height=f.height,c.aspectRatio=g,c.naturalWidth=d.naturalWidth,c.naturalHeight=d.naturalHeight,h&&e%90||e%180){var i=J({width:d.naturalWidth,height:d.naturalHeight,degree:e});c.naturalWidth=i.width,c.naturalHeight=i.height}b.limitCanvas(!0,!1)}}(c.width>c.maxWidth||c.width<c.minWidth)&&(c.left=c.oldLeft),(c.height>c.maxHeight||c.height<c.minHeight)&&(c.top=c.oldTop),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),b.limitCanvas(!1,!0),c.left=Math.min(Math.max(c.left,c.minLeft),c.maxLeft),c.top=Math.min(Math.max(c.top,c.minTop),c.maxTop),c.oldLeft=c.left,c.oldTop=c.top,l(b.canvas,j({width:c.width,height:c.height},I({translateX:c.left,translateY:c.top}))),b.renderImage(),b.cropped&&b.limited&&b.limitCropBox(!0,!0),a&&b.output()},renderImage:function(a){var b=this,c=b.canvasData,d=b.imageData,e=void 0,f=void 0,g=void 0,h=void 0;d.rotate&&(f=J({width:c.width,height:c.height,degree:d.rotate,aspectRatio:d.aspectRatio},!0),g=f.width,h=f.height,e={width:g,height:h,left:(c.width-g)/2,top:(c.height-h)/2}),j(d,e||{width:c.width,height:c.height,left:0,top:0}),l(b.image,j({width:d.width,height:d.height},I(j({translateX:d.left,translateY:d.top},d)))),a&&b.output()},initCropBox:function(){var a=this,b=a.options,c=b.aspectRatio,d=Number(b.autoCropArea)||.8,e=a.canvasData,f={width:e.width,height:e.height};c&&(e.height*c>e.width?f.height=f.width/c:f.width=f.height*c),a.cropBoxData=f,a.limitCropBox(!0,!0),f.width=Math.min(Math.max(f.width,f.minWidth),f.maxWidth),f.height=Math.min(Math.max(f.height,f.minHeight),f.maxHeight),f.width=Math.max(f.minWidth,f.width*d),f.height=Math.max(f.minHeight,f.height*d),f.left=e.left+(e.width-f.width)/2,f.top=e.top+(e.height-f.height)/2,f.oldLeft=f.left,f.oldTop=f.top,a.initialCropBoxData=j({},f)},limitCropBox:function(a,b){var c=this,d=c.options,e=d.aspectRatio,f=c.containerData,g=c.canvasData,h=c.cropBoxData,i=c.limited;if(a){var j=Number(d.minCropBoxWidth)||0,k=Number(d.minCropBoxHeight)||0,l=Math.min(f.width,i?g.width:f.width),m=Math.min(f.height,i?g.height:f.height);j=Math.min(j,f.width),k=Math.min(k,f.height),e&&(j&&k?k*e>j?k=j/e:j=k*e:j?k=j/e:k&&(j=k*e),m*e>l?m=l/e:l=m*e),h.minWidth=Math.min(j,l),h.minHeight=Math.min(k,m),h.maxWidth=l,h.maxHeight=m}b&&(i?(h.minLeft=Math.max(0,g.left),h.minTop=Math.max(0,g.top),h.maxLeft=Math.min(f.width,g.left+g.width)-h.width,h.maxTop=Math.min(f.height,g.top+g.height)-h.height):(h.minLeft=0,h.minTop=0,h.maxLeft=f.width-h.width,h.maxTop=f.height-h.height))},renderCropBox:function(){var a=this,b=a.options,c=a.containerData,d=a.cropBoxData;(d.width>d.maxWidth||d.width<d.minWidth)&&(d.left=d.oldLeft),(d.height>d.maxHeight||d.height<d.minHeight)&&(d.top=d.oldTop),d.width=Math.min(Math.max(d.width,d.minWidth),d.maxWidth),d.height=Math.min(Math.max(d.height,d.minHeight),d.maxHeight),a.limitCropBox(!1,!0),d.left=Math.min(Math.max(d.left,d.minLeft),d.maxLeft),d.top=Math.min(Math.max(d.top,d.minTop),d.maxTop),d.oldLeft=d.left,d.oldTop=d.top,b.movable&&b.cropBoxMovable&&s(a.face,"action",d.width===c.width&&d.height===c.height?"move":"all"),l(a.cropBox,j({width:d.width,height:d.height},I({translateX:d.left,translateY:d.top}))),a.cropped&&a.limited&&a.limitCanvas(!0,!0),a.disabled||a.output()},output:function(){var a=this;a.preview(),a.complete&&w(a.element,"crop",a.getData())}},ja="preview",ka={initPreview:function(){var a=this,b=a.options.preview,c=B("img"),d=a.crossOrigin,e=d?a.crossOriginUrl:a.url;if(d&&(c.crossOrigin=d),c.src=e,C(a.viewBox,c),a.image2=c,b){var f=b.querySelector?[b]:document.querySelectorAll(b);a.previews=f,i(f,function(a){var b=B("img");s(a,ja,{width:a.offsetWidth,height:a.offsetHeight,html:a.innerHTML}),d&&(b.crossOrigin=d),b.src=e,b.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',E(a),C(a,b)})}},resetPreview:function(){i(this.previews,function(a){var b=r(a,ja);l(a,{width:b.width,height:b.height}),a.innerHTML=b.html,t(a,ja)})},preview:function(){var a=this,b=a.imageData,c=a.canvasData,d=a.cropBoxData,e=d.width,f=d.height,g=b.width,h=b.height,k=d.left-c.left-b.left,m=d.top-c.top-b.top;a.cropped&&!a.disabled&&(l(a.image2,j({width:g,height:h},I(j({translateX:-k,translateY:-m},b)))),i(a.previews,function(a){var c=r(a,ja),d=c.width,i=c.height,n=d,o=i,p=1;e&&(p=d/e,o=f*p),f&&o>i&&(p=i/f,n=e*p,o=i),l(a,{width:n,height:o}),l(z(a,"img")[0],j({width:g*p,height:h*p},I(j({translateX:-k*p,translateY:-m*p},b))))}))}},la="undefined"!=typeof window?window.PointerEvent:null,ma=la?"pointerdown":"touchstart mousedown",na=la?"pointermove":"touchmove mousemove",oa=la?" pointerup pointercancel":"touchend touchcancel mouseup",pa="wheel mousewheel DOMMouseScroll",qa="dblclick",ra="resize",sa="cropstart",ta="cropmove",ua="cropend",va="crop",wa="zoom",xa={bind:function(){var a=this,b=a.options,c=a.element,d=a.cropper;f(b.cropstart)&&v(c,sa,b.cropstart),f(b.cropmove)&&v(c,ta,b.cropmove),f(b.cropend)&&v(c,ua,b.cropend),f(b.crop)&&v(c,va,b.crop),f(b.zoom)&&v(c,wa,b.zoom),v(d,ma,a.onCropStart=k(a.cropStart,a)),b.zoomable&&b.zoomOnWheel&&v(d,pa,a.onWheel=k(a.wheel,a)),b.toggleDragModeOnDblclick&&v(d,qa,a.onDblclick=k(a.dblclick,a)),v(document,na,a.onCropMove=k(a.cropMove,a)),v(document,oa,a.onCropEnd=k(a.cropEnd,a)),b.responsive&&v(window,ra,a.onResize=k(a.resize,a))},unbind:function(){var a=this,b=a.options,c=a.element,d=a.cropper;f(b.cropstart)&&u(c,sa,b.cropstart),f(b.cropmove)&&u(c,ta,b.cropmove),f(b.cropend)&&u(c,ua,b.cropend),f(b.crop)&&u(c,va,b.crop),f(b.zoom)&&u(c,wa,b.zoom),u(d,ma,a.onCropStart),b.zoomable&&b.zoomOnWheel&&u(d,pa,a.onWheel),b.toggleDragModeOnDblclick&&u(d,qa,a.onDblclick),u(document,na,a.onCropMove),u(document,oa,a.onCropEnd),b.responsive&&u(window,ra,a.onResize)}},ya=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,za={resize:function(){var a=this,b=a.options,c=a.container,d=a.containerData,e=Number(b.minContainerWidth)||200,f=Number(b.minContainerHeight)||100;if(!a.disabled&&d.width!==e&&d.height!==f){var g=c.offsetWidth/d.width;if(1!==g||c.offsetHeight!==d.height){var h=void 0,j=void 0;b.restore&&(h=a.getCanvasData(),j=a.getCropBoxData()),a.render(),b.restore&&(a.setCanvasData(i(h,function(a,b){h[b]=a*g})),a.setCropBoxData(i(j,function(a,b){j[b]=a*g})))}}},dblclick:function(){var a=this;a.disabled||"none"===a.options.dragMode||a.setDragMode(m(a.dragBox,"cropper-crop")?"move":"crop")},wheel:function(a){var b=this,c=x(a),d=Number(b.options.wheelZoomRatio)||.1,e=1;b.disabled||(c.preventDefault(),b.wheeling||(b.wheeling=!0,setTimeout(function(){b.wheeling=!1},50),c.deltaY?e=c.deltaY>0?1:-1:c.wheelDelta?e=-c.wheelDelta/120:c.detail&&(e=c.detail>0?1:-1),b.zoom(-e*d,c)))},cropStart:function(a){var b=this;if(!b.disabled){var c=b.options,d=b.pointers,e=x(a),f=void 0;e.changedTouches?i(e.changedTouches,function(a){d[a.identifier]=P(a)}):d[e.pointerId||0]=P(e),f=Object.keys(d).length>1&&c.zoomable&&c.zoomOnTouch?"zoom":r(e.target,"action"),ya.test(f)&&w(b.element,"cropstart",{originalEvent:e,action:f})!==!1&&(e.preventDefault(),b.action=f,b.cropping=!1,"crop"===f&&(b.cropping=!0,n(b.dragBox,"cropper-modal")))}},cropMove:function(a){var b=this,c=b.action;if(!b.disabled&&c){var d=b.pointers,e=x(a);e.preventDefault(),w(b.element,"cropmove",{originalEvent:e,action:c})!==!1&&(e.changedTouches?i(e.changedTouches,function(a){j(d[a.identifier],P(a,!0))}):j(d[e.pointerId||0],P(e,!0)),b.change(e))}},cropEnd:function(a){var b=this;if(!b.disabled){var c=b.action,d=b.pointers,e=x(a);e.changedTouches?i(e.changedTouches,function(a){delete d[a.identifier]}):delete d[e.pointerId||0],c&&(e.preventDefault(),Object.keys(d).length||(b.action=""),b.cropping&&(b.cropping=!1,p(b.dragBox,"cropper-modal",b.cropped&&this.options.modal)),w(b.element,"cropend",{originalEvent:e,action:c}))}}},Aa="e",Ba="w",Ca="s",Da="n",Ea="se",Fa="sw",Ga="ne",Ha="nw",Ia={change:function(a){var b=this,c=b.options,d=b.containerData,e=b.canvasData,f=b.cropBoxData,g=c.aspectRatio,h=b.action,j=f.width,k=f.height,l=f.left,m=f.top,n=l+j,p=m+k,q=0,r=0,s=d.width,t=d.height,u=!0,v=void 0;!g&&a.shiftKey&&(g=j&&k?j/k:1),b.limited&&(q=f.minLeft,r=f.minTop,s=q+Math.min(d.width,e.width,e.left+e.width),t=r+Math.min(d.height,e.height,e.top+e.height));var w=b.pointers,x=w[Object.keys(w)[0]],z={x:x.endX-x.startX,y:x.endY-x.startY};switch(h){case"all":l+=z.x,m+=z.y;break;case Aa:if(z.x>=0&&(n>=s||g&&(m<=r||p>=t))){u=!1;break}n+z.x>s&&(z.x=s-n),j+=z.x,g&&(k=j/g,m-=z.x/g/2),j<0&&(h=Ba,j=0);break;case Da:if(z.y<=0&&(m<=r||g&&(l<=q||n>=s))){u=!1;break}m+z.y<r&&(z.y=r-m),k-=z.y,m+=z.y,g&&(j=k*g,l+=z.y*g/2),k<0&&(h=Ca,k=0);break;case Ba:if(z.x<=0&&(l<=q||g&&(m<=r||p>=t))){u=!1;break}l+z.x<q&&(z.x=q-l),j-=z.x,l+=z.x,g&&(k=j/g,m+=z.x/g/2),j<0&&(h=Aa,j=0);break;case Ca:if(z.y>=0&&(p>=t||g&&(l<=q||n>=s))){u=!1;break}p+z.y>t&&(z.y=t-p),k+=z.y,g&&(j=k*g,l-=z.y*g/2),k<0&&(h=Da,k=0);break;case Ga:if(g){if(z.y<=0&&(m<=r||n>=s)){u=!1;break}k-=z.y,m+=z.y,j=k*g}else z.x>=0?n<s?j+=z.x:z.y<=0&&m<=r&&(u=!1):j+=z.x,z.y<=0?m>r&&(k-=z.y,m+=z.y):(k-=z.y,m+=z.y);j<0&&k<0?(h=Fa,k=0,j=0):j<0?(h=Ha,j=0):k<0&&(h=Ea,k=0);break;case Ha:if(g){if(z.y<=0&&(m<=r||l<=q)){u=!1;break}k-=z.y,m+=z.y,j=k*g,l+=z.y*g}else z.x<=0?l>q?(j-=z.x,l+=z.x):z.y<=0&&m<=r&&(u=!1):(j-=z.x,l+=z.x),z.y<=0?m>r&&(k-=z.y,m+=z.y):(k-=z.y,m+=z.y);j<0&&k<0?(h=Ea,k=0,j=0):j<0?(h=Ga,j=0):k<0&&(h=Fa,k=0);break;case Fa:if(g){if(z.x<=0&&(l<=q||p>=t)){u=!1;break}j-=z.x,l+=z.x,k=j/g}else z.x<=0?l>q?(j-=z.x,l+=z.x):z.y>=0&&p>=t&&(u=!1):(j-=z.x,l+=z.x),z.y>=0?p<t&&(k+=z.y):k+=z.y;j<0&&k<0?(h=Ga,k=0,j=0):j<0?(h=Ea,j=0):k<0&&(h=Ha,k=0);break;case Ea:if(g){if(z.x>=0&&(n>=s||p>=t)){u=!1;break}j+=z.x,k=j/g}else z.x>=0?n<s?j+=z.x:z.y>=0&&p>=t&&(u=!1):j+=z.x,z.y>=0?p<t&&(k+=z.y):k+=z.y;j<0&&k<0?(h=Ha,k=0,j=0):j<0?(h=Fa,j=0):k<0&&(h=Ga,k=0);break;case"move":b.move(z.x,z.y),u=!1;break;case"zoom":b.zoom(Q(w),a),u=!1;break;case"crop":if(!z.x||!z.y){u=!1;break}v=y(b.cropper),l=x.startX-v.left,m=x.startY-v.top,j=f.minWidth,k=f.minHeight,z.x>0?h=z.y>0?Ea:Ga:z.x<0&&(l-=j,h=z.y>0?Fa:Ha),z.y<0&&(m-=k),b.cropped||(o(b.cropBox,"cropper-hidden"),b.cropped=!0,b.limited&&b.limitCropBox(!0,!0))}u&&(f.width=j,f.height=k,f.left=l,f.top=m,b.action=h,b.renderCropBox()),i(w,function(a){a.startX=a.endX,a.startY=a.endY})}},Ja={crop:function(){var a=this;return a.ready&&!a.disabled&&(a.cropped||(a.cropped=!0,a.limitCropBox(!0,!0),a.options.modal&&n(a.dragBox,"cropper-modal"),o(a.cropBox,"cropper-hidden")),a.setCropBoxData(a.initialCropBoxData)),a},reset:function(){var a=this;return a.ready&&!a.disabled&&(a.imageData=j({},a.initialImageData),a.canvasData=j({},a.initialCanvasData),a.cropBoxData=j({},a.initialCropBoxData),a.renderCanvas(),a.cropped&&a.renderCropBox()),a},clear:function(){var a=this;return a.cropped&&!a.disabled&&(j(a.cropBoxData,{left:0,top:0,width:0,height:0}),a.cropped=!1,a.renderCropBox(),a.limitCanvas(!0,!0),a.renderCanvas(),o(a.dragBox,"cropper-modal"),n(a.cropBox,"cropper-hidden")),a},replace:function(a,b){var c=this;return!c.disabled&&a&&(c.isImg&&(c.element.src=a),b?(c.url=a,c.image.src=a,c.ready&&(c.image2.src=a,i(c.previews,function(b){z(b,"img")[0].src=a}))):(c.isImg&&(c.replaced=!0),c.options.data=null,c.load(a))),c},enable:function(){var a=this;return a.ready&&(a.disabled=!1,o(a.cropper,"cropper-disabled")),a},disable:function(){var a=this;return a.ready&&(a.disabled=!0,n(a.cropper,"cropper-disabled")),a},destroy:function(){var a=this,b=a.element,c=a.image;return a.loaded?(a.isImg&&a.replaced&&(b.src=a.originalUrl),a.unbuild(),o(b,"cropper-hidden")):a.isImg?u(b,"load",a.onStart):c&&D(c),t(b,"cropper"),a},move:function(a,b){var d=this,e=d.canvasData;return d.moveTo(c(a)?a:e.left+Number(a),c(b)?b:e.top+Number(b))},moveTo:function(a,d){var e=this,f=e.canvasData,g=!1;return c(d)&&(d=a),a=Number(a),d=Number(d),e.ready&&!e.disabled&&e.options.movable&&(b(a)&&(f.left=a,g=!0),b(d)&&(f.top=d,g=!0),g&&e.renderCanvas(!0)),e},zoom:function(a,b){var c=this,d=c.canvasData;return a=Number(a),a=a<0?1/(1-a):1+a,c.zoomTo(d.width*a/d.naturalWidth,b)},zoomTo:function(a,b){var c=this,d=c.options,e=c.canvasData,f=e.width,g=e.height,h=e.naturalWidth,i=e.naturalHeight;if(a=Number(a),a>=0&&c.ready&&!c.disabled&&d.zoomable){var j=h*a,k=i*a;if(w(c.element,"zoom",{originalEvent:b,oldRatio:f/h,ratio:j/h})===!1)return c;if(b){var l=c.pointers,m=y(c.cropper),n=l&&Object.keys(l).length?S(l):{pageX:b.pageX,pageY:b.pageY};e.left-=(j-f)*((n.pageX-m.left-e.left)/f),e.top-=(k-g)*((n.pageY-m.top-e.top)/g)}else e.left-=(j-f)/2,e.top-=(k-g)/2;e.width=j,e.height=k,c.renderCanvas(!0)}return c},rotate:function(a){var b=this;return b.rotateTo((b.imageData.rotate||0)+Number(a))},rotateTo:function(a){var c=this;return a=Number(a),b(a)&&c.ready&&!c.disabled&&c.options.rotatable&&(c.imageData.rotate=a%360,c.rotated=!0,c.renderCanvas(!0)),c},scale:function(a,d){var e=this,f=e.imageData,g=!1;return c(d)&&(d=a),a=Number(a),d=Number(d),e.ready&&!e.disabled&&e.options.scalable&&(b(a)&&(f.scaleX=a,g=!0),b(d)&&(f.scaleY=d,g=!0),g&&e.renderImage(!0)),e},scaleX:function(a){var c=this,d=c.imageData.scaleY;return c.scale(a,b(d)?d:1)},scaleY:function(a){var c=this,d=c.imageData.scaleX;return c.scale(b(d)?d:1,a)},getData:function(a){var b=this,c=b.options,d=b.imageData,e=b.canvasData,f=b.cropBoxData,g=void 0,h=void 0;return b.ready&&b.cropped?(h={x:f.left-e.left,y:f.top-e.top,width:f.width,height:f.height},g=d.width/d.naturalWidth,i(h,function(b,c){b/=g,h[c]=a?Math.round(b):b})):h={x:0,y:0,width:0,height:0},c.rotatable&&(h.rotate=d.rotate||0),c.scalable&&(h.scaleX=d.scaleX||1,h.scaleY=d.scaleY||1),h},setData:function(a){var c=this,d=c.options,g=c.imageData,h=c.canvasData,i={},j=void 0,k=void 0,l=void 0;return f(a)&&(a=a.call(c.element)),c.ready&&!c.disabled&&e(a)&&(d.rotatable&&b(a.rotate)&&a.rotate!==g.rotate&&(g.rotate=a.rotate,j=!0,c.rotated=j),d.scalable&&(b(a.scaleX)&&a.scaleX!==g.scaleX&&(g.scaleX=a.scaleX,k=!0),b(a.scaleY)&&a.scaleY!==g.scaleY&&(g.scaleY=a.scaleY,k=!0)),j?c.renderCanvas():k&&c.renderImage(),l=g.width/g.naturalWidth,b(a.x)&&(i.left=a.x*l+h.left),b(a.y)&&(i.top=a.y*l+h.top),b(a.width)&&(i.width=a.width*l),b(a.height)&&(i.height=a.height*l),c.setCropBoxData(i)),c},getContainerData:function(){var a=this;return a.ready?a.containerData:{}},getImageData:function(){var a=this;return a.loaded?a.imageData:{}},getCanvasData:function(){var a=this,b=a.canvasData,c={};return a.ready&&i(["left","top","width","height","naturalWidth","naturalHeight"],function(a){c[a]=b[a]}),c},setCanvasData:function(a){var c=this,d=c.canvasData,g=d.aspectRatio;return f(a)&&(a=a.call(c.element)),c.ready&&!c.disabled&&e(a)&&(b(a.left)&&(d.left=a.left),b(a.top)&&(d.top=a.top),b(a.width)?(d.width=a.width,d.height=a.width/g):b(a.height)&&(d.height=a.height,d.width=a.height*g),c.renderCanvas(!0)),c},getCropBoxData:function(){var a=this,b=a.cropBoxData,c=void 0;return a.ready&&a.cropped&&(c={left:b.left,top:b.top,width:b.width,height:b.height}),c||{}},setCropBoxData:function(a){var c=this,d=c.cropBoxData,g=c.options.aspectRatio,h=void 0,i=void 0;return f(a)&&(a=a.call(c.element)),c.ready&&c.cropped&&!c.disabled&&e(a)&&(b(a.left)&&(d.left=a.left),b(a.top)&&(d.top=a.top),b(a.width)&&a.width!==d.width&&(h=!0,d.width=a.width),b(a.height)&&a.height!==d.height&&(i=!0,d.height=a.height),g&&(h?d.height=d.width/g:i&&(d.width=d.height*g)),c.renderCropBox()),c},getCroppedCanvas:function(a){var b=this;if(!b.ready||!window.HTMLCanvasElement)return null;if(e(a)||(a={}),!b.cropped)return K(b.image,b.imageData,a);var c=b.getData(),d=c.width,f=c.height,g=d/f,h=void 0,i=void 0,j=void 0;e(a)&&(h=a.width,i=a.height,h?(i=h/g,j=h/d):i&&(h=i*g,j=i/f));var k=Math.floor(h||d),l=Math.floor(i||f),m=B("canvas"),n=m.getContext("2d");m.width=k,m.height=l,a.fillColor&&(n.fillStyle=a.fillColor,n.fillRect(0,0,k,l));var o=function(){var e=K(b.image,b.imageData,a),g=e.width,h=e.height,i=b.canvasData,k=[e],l=c.x+i.naturalWidth*(Math.abs(c.scaleX||1)-1)/2,m=c.y+i.naturalHeight*(Math.abs(c.scaleY||1)-1)/2,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0;return l<=-d||l>g?(l=0,n=0,p=0,r=0):l<=0?(p=-l,l=0,n=Math.min(g,d+l),r=n):l<=g&&(p=0,n=Math.min(d,g-l),r=n),n<=0||m<=-f||m>h?(m=0,o=0,q=0,s=0):m<=0?(q=-m,m=0,o=Math.min(h,f+m),s=o):m<=h&&(q=0,o=Math.min(f,h-m),s=o),k.push(Math.floor(l),Math.floor(m),Math.floor(n),Math.floor(o)),j&&(p*=j,q*=j,r*=j,s*=j),r>0&&s>0&&k.push(Math.floor(p),Math.floor(q),Math.floor(r),Math.floor(s)),k}();return n.imageSmoothingEnabled=!!a.imageSmoothingEnabled,a.imageSmoothingQuality&&(n.imageSmoothingQuality=a.imageSmoothingQuality),n.drawImage.apply(n,R(o)),m},setAspectRatio:function(a){var b=this,d=b.options;return b.disabled||c(a)||(d.aspectRatio=Math.max(0,a)||NaN,b.ready&&(b.initCropBox(),b.cropped&&b.renderCropBox())),b},setDragMode:function(a){var b=this,c=b.options,d=b.dragBox,e=b.face,f=void 0,g=void 0;return b.loaded&&!b.disabled&&(f="crop"===a,g=c.movable&&"move"===a,a=f||g?a:"none",s(d,"action",a),p(d,"cropper-crop",f),p(d,"cropper-move",g),c.cropBoxMovable||(s(e,"action",a),p(e,"cropper-crop",f),p(e,"cropper-move",g))),b}},Ka=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),La="cropper",Ma=La+"-hidden",Na="error",Oa="load",Pa="ready",Qa="crop",Ra=/^data:/,Sa=/^data:image\/jpeg;base64,/,Ta=void 0,Ua=function(){function a(b,c){T(this,a);var d=this;d.element=b,d.options=j({},U,e(c)&&c),d.loaded=!1,d.ready=!1,d.complete=!1,d.rotated=!1,d.cropped=!1,d.disabled=!1,d.replaced=!1,d.limited=!1,d.wheeling=!1,d.isImg=!1,d.originalUrl="",d.canvasData=null,d.cropBoxData=null,d.previews=null,d.pointers={},d.init()}return Ka(a,[{key:"init",value:function(){var a=this,b=a.element,c=b.tagName.toLowerCase(),d=void 0;if(!r(b,La)){if(s(b,La,a),"img"===c){if(a.isImg=!0,d=b.getAttribute("src"),a.originalUrl=d,!d)return;d=b.src}else"canvas"===c&&window.HTMLCanvasElement&&(d=b.toDataURL());a.load(d)}}},{key:"load",value:function(a){var b=this,c=b.options,d=b.element;if(a){if(b.url=a,b.imageData={},!c.checkOrientation||!window.ArrayBuffer)return void b.clone();if(Ra.test(a))return void(Sa.test(a)?b.read(N(a)):b.clone());var e=new XMLHttpRequest;e.onerror=function(){b.clone()},e.onload=function(){b.read(e.response)},c.checkCrossOrigin&&F(a)&&d.crossOrigin&&(a=G(a)),e.open("get",a),e.responseType="arraybuffer",e.withCredentials="use-credentials"===d.crossOrigin,e.send()}}},{key:"read",value:function(a){var b=this,c=b.options,d=M(a),e=b.imageData,f=0,g=1,h=1;if(d>1)switch(b.url=O(a),d){case 2:g=-1;break;case 3:f=-180;break;case 4:h=-1;break;case 5:f=90,h=-1;break;case 6:f=90;break;case 7:f=90,g=-1;break;case 8:f=-90}c.rotatable&&(e.rotate=f),c.scalable&&(e.scaleX=g,e.scaleY=h),b.clone()}},{key:"clone",value:function(){var a=this,b=a.element,c=a.url,d=void 0,e=void 0;a.options.checkCrossOrigin&&F(c)&&(d=b.crossOrigin,d?e=c:(d="anonymous",e=G(c))),a.crossOrigin=d,a.crossOriginUrl=e;var f=B("img");d&&(f.crossOrigin=d),f.src=e||c;var g=k(a.start,a),h=k(a.stop,a);a.image=f,a.onStart=g,a.onStop=h,a.isImg?b.complete?a.start():v(b,Oa,g):(v(f,Oa,g),v(f,Na,h),n(f,"cropper-hide"),b.parentNode.insertBefore(f,b.nextSibling))}},{key:"start",value:function(a){var b=this,c=b.isImg?b.element:b.image;a&&(u(c,Oa,b.onStart),u(c,Na,b.onStop)),H(c,function(a,c){j(b.imageData,{naturalWidth:a,naturalHeight:c,aspectRatio:a/c}),b.loaded=!0,b.build()})}},{key:"stop",value:function(){var a=this,b=a.image;u(b,Oa,a.onStart),u(b,Na,a.onStop),D(b),a.image=null}},{key:"build",value:function(){var a=this,b=a.options,c=a.element,d=a.image;if(a.loaded){a.ready&&a.unbuild();var e=c.parentNode,g=B("div");g.innerHTML=V;var h=A(g,"cropper-container")[0],i=A(h,"cropper-canvas")[0],j=A(h,"cropper-drag-box")[0],k=A(h,"cropper-crop-box")[0],l=A(k,"cropper-face")[0];
a.container=e,a.cropper=h,a.canvas=i,a.dragBox=j,a.cropBox=k,a.viewBox=A(h,"cropper-view-box")[0],a.face=l,C(i,d),n(c,Ma),e.insertBefore(h,c.nextSibling),a.isImg||o(d,"cropper-hide"),a.initPreview(),a.bind(),b.aspectRatio=Math.max(0,b.aspectRatio)||NaN,b.viewMode=Math.max(0,Math.min(3,Math.round(b.viewMode)))||0,a.cropped=b.autoCrop,b.autoCrop?b.modal&&n(j,"cropper-modal"):n(k,Ma),b.guides||n(A(k,"cropper-dashed"),Ma),b.center||n(A(k,"cropper-center"),Ma),b.background&&n(h,"cropper-bg"),b.highlight||n(l,"cropper-invisible"),b.cropBoxMovable&&(n(l,"cropper-move"),s(l,"action","all")),b.cropBoxResizable||(n(A(k,"cropper-line"),Ma),n(A(k,"cropper-point"),Ma)),a.setDragMode(b.dragMode),a.render(),a.ready=!0,a.setData(b.data),a.completing=setTimeout(function(){f(b.ready)&&v(c,Pa,b.ready,!0),w(c,Pa),w(c,Qa,a.getData()),a.complete=!0},0)}}},{key:"unbuild",value:function(){var a=this;a.ready&&(a.complete||clearTimeout(a.completing),a.ready=!1,a.complete=!1,a.initialImageData=null,a.initialCanvasData=null,a.initialCropBoxData=null,a.containerData=null,a.canvasData=null,a.cropBoxData=null,a.unbind(),a.resetPreview(),a.previews=null,a.viewBox=null,a.cropBox=null,a.dragBox=null,a.canvas=null,a.container=null,D(a.cropper),a.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=Ta,a}},{key:"setDefaults",value:function(a){j(U,e(a)&&a)}}]),a}();return j(Ua.prototype,ia),j(Ua.prototype,ka),j(Ua.prototype,xa),j(Ua.prototype,za),j(Ua.prototype,Ia),j(Ua.prototype,Ja),"undefined"!=typeof window&&(Ta=window.Cropper,window.Cropper=Ua),Ua}),!function(a){"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():window.Sortable=a()}(function(){function a(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(a);this.el=a,this.options=b=t({},b),a[T]=this;var c={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var d in c)!(d in b)&&(b[d]=c[d]);ga(b);for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));this.nativeDraggable=!b.forceFallback&&$,f(a,"mousedown",this._onTapStart),f(a,"touchstart",this._onTapStart),f(a,"pointerdown",this._onTapStart),this.nativeDraggable&&(f(a,"dragover",this),f(a,"dragenter",this)),ea.push(this._onDragOver),b.store&&this.sort(b.store.get(this))}function b(a,b){"clone"!==a.lastPullMode&&(b=!0),z&&z.state!==b&&(i(z,"display",b?"none":""),b||z.state&&(a.options.group.revertClone?(A.insertBefore(z,B),a._animate(w,z)):A.insertBefore(z,w)),z.state=b)}function c(a,b,c){if(a){c=c||V;do if(">*"===b&&a.parentNode===c||r(a,b))return a;while(a=d(a))}return null}function d(a){var b=a.host;return b&&b.nodeType?b:a.parentNode}function e(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.preventDefault()}function f(a,b,c){a.addEventListener(b,c,Z)}function g(a,b,c){a.removeEventListener(b,c,Z)}function h(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(R," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(R," ")}}function i(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return V.defaultView&&V.defaultView.getComputedStyle?c=V.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function j(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;e<f;e++)c(d[e],e);return d}return[]}function k(a,b,c,d,e,f,g){a=a||b[T];var h=V.createEvent("Event"),i=a.options,j="on"+c.charAt(0).toUpperCase()+c.substr(1);h.initEvent(c,!0,!0),h.to=b,h.from=e||b,h.item=d||b,h.clone=z,h.oldIndex=f,h.newIndex=g,b.dispatchEvent(h),i[j]&&i[j].call(a,h)}function l(a,b,c,d,e,f,g,h){var i,j,k=a[T],l=k.options.onMove;return i=V.createEvent("Event"),i.initEvent("move",!0,!0),i.to=b,i.from=a,i.dragged=c,i.draggedRect=d,i.related=e||b,i.relatedRect=f||b.getBoundingClientRect(),i.willInsertAfter=h,a.dispatchEvent(i),l&&(j=l.call(k,i,g)),j}function m(a){a.draggable=!1}function n(){aa=!1}function o(a,b){var c=a.lastElementChild,d=c.getBoundingClientRect();return b.clientY-(d.top+d.height)>5||b.clientX-(d.left+d.width)>5}function p(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function q(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"===a.nodeName.toUpperCase()||">*"!==b&&!r(a,b)||c++;return c}function r(a,b){if(a){b=b.split(".");var c=b.shift().toUpperCase(),d=new RegExp("\\s("+b.join("|")+")(?=\\s)","g");return!(""!==c&&a.nodeName.toUpperCase()!=c||b.length&&((" "+a.className+" ").match(d)||[]).length!=b.length)}return!1}function s(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}function t(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function u(a){return X?X(a).clone(!0)[0]:Y&&Y.dom?Y.dom(a).cloneNode(!0):a.cloneNode(!0)}function v(a){for(var b=a.getElementsByTagName("input"),c=b.length;c--;){var d=b[c];d.checked&&da.push(d)}}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q={},R=/\s+/g,S=/left|right|inline/,T="Sortable"+(new Date).getTime(),U=window,V=U.document,W=U.parseInt,X=U.jQuery||U.Zepto,Y=U.Polymer,Z=!1,$=!!("draggable"in V.createElement("div")),_=function(a){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(a=V.createElement("x"),a.style.cssText="pointer-events:auto","auto"===a.style.pointerEvents)}(),aa=!1,ba=Math.abs,ca=Math.min,da=[],ea=[],fa=s(function(a,b,c){if(c&&b.scroll){var d,e,f,g,h,i,j=c[T],k=b.scrollSensitivity,l=b.scrollSpeed,m=a.clientX,n=a.clientY,o=window.innerWidth,p=window.innerHeight;if(E!==c&&(D=b.scroll,E=c,F=b.scrollFn,D===!0)){D=c;do if(D.offsetWidth<D.scrollWidth||D.offsetHeight<D.scrollHeight)break;while(D=D.parentNode)}D&&(d=D,e=D.getBoundingClientRect(),f=(ba(e.right-m)<=k)-(ba(e.left-m)<=k),g=(ba(e.bottom-n)<=k)-(ba(e.top-n)<=k)),f||g||(f=(o-m<=k)-(m<=k),g=(p-n<=k)-(n<=k),(f||g)&&(d=U)),Q.vx===f&&Q.vy===g&&Q.el===d||(Q.el=d,Q.vx=f,Q.vy=g,clearInterval(Q.pid),d&&(Q.pid=setInterval(function(){return i=g?g*l:0,h=f?f*l:0,"function"==typeof F?F.call(j,h,i,a):void(d===U?U.scrollTo(U.pageXOffset+h,U.pageYOffset+i):(d.scrollTop+=i,d.scrollLeft+=h))},24)))}},30),ga=function(a){function b(a,b){return void 0!==a&&a!==!0||(a=c.name),"function"==typeof a?a:function(c,d){var e=d.options.group.name;return b?a:a&&(a.join?a.indexOf(e)>-1:e==a)}}var c={},d=a.group;d&&"object"==typeof d||(d={name:d}),c.name=d.name,c.checkPull=b(d.pull,!0),c.checkPut=b(d.put),c.revertClone=d.revertClone,a.group=c};a.prototype={constructor:a,_onTapStart:function(a){var b,d=this,e=this.el,f=this.options,g=f.preventOnFilter,h=a.type,i=a.touches&&a.touches[0],j=(i||a).target,l=a.target.shadowRoot&&a.path[0]||j,m=f.filter;if(v(e),!w&&!("mousedown"===h&&0!==a.button||f.disabled)&&(j=c(j,f.draggable,e),j&&C!==j)){if(b=q(j,f.draggable),"function"==typeof m){if(m.call(this,a,j,this))return k(d,l,"filter",j,e,b),void(g&&a.preventDefault())}else if(m&&(m=m.split(",").some(function(a){if(a=c(l,a.trim(),e))return k(d,a,"filter",j,e,b),!0})))return void(g&&a.preventDefault());f.handle&&!c(l,f.handle,e)||this._prepareDragStart(a,i,j,b)}},_prepareDragStart:function(a,b,c,d){var e,g=this,i=g.el,l=g.options,n=i.ownerDocument;c&&!w&&c.parentNode===i&&(N=a,A=i,w=c,x=w.parentNode,B=w.nextSibling,C=c,L=l.group,J=d,this._lastX=(b||a).clientX,this._lastY=(b||a).clientY,w.style["will-change"]="transform",e=function(){g._disableDelayedDrag(),w.draggable=g.nativeDraggable,h(w,l.chosenClass,!0),g._triggerDragStart(a,b),k(g,A,"choose",w,A,J)},l.ignore.split(",").forEach(function(a){j(w,a.trim(),m)}),f(n,"mouseup",g._onDrop),f(n,"touchend",g._onDrop),f(n,"touchcancel",g._onDrop),f(n,"pointercancel",g._onDrop),f(n,"selectstart",g),l.delay?(f(n,"mouseup",g._disableDelayedDrag),f(n,"touchend",g._disableDelayedDrag),f(n,"touchcancel",g._disableDelayedDrag),f(n,"mousemove",g._disableDelayedDrag),f(n,"touchmove",g._disableDelayedDrag),f(n,"pointermove",g._disableDelayedDrag),g._dragStartTimer=setTimeout(e,l.delay)):e())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer),g(a,"mouseup",this._disableDelayedDrag),g(a,"touchend",this._disableDelayedDrag),g(a,"touchcancel",this._disableDelayedDrag),g(a,"mousemove",this._disableDelayedDrag),g(a,"touchmove",this._disableDelayedDrag),g(a,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(a,b){b=b||("touch"==a.pointerType?a:null),b?(N={target:w,clientX:b.clientX,clientY:b.clientY},this._onDragStart(N,"touch")):this.nativeDraggable?(f(w,"dragend",this),f(A,"dragstart",this._onDragStart)):this._onDragStart(N,!0);try{V.selection?setTimeout(function(){V.selection.empty()}):window.getSelection().removeAllRanges()}catch(a){}},_dragStarted:function(){if(A&&w){var b=this.options;h(w,b.ghostClass,!0),h(w,b.dragClass,!1),a.active=this,k(this,A,"start",w,A,J)}else this._nulling()},_emulateDragOver:function(){if(O){if(this._lastX===O.clientX&&this._lastY===O.clientY)return;this._lastX=O.clientX,this._lastY=O.clientY,_||i(y,"display","none");var a=V.elementFromPoint(O.clientX,O.clientY),b=a,c=ea.length;if(b)do{if(b[T]){for(;c--;)ea[c]({clientX:O.clientX,clientY:O.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);_||i(y,"display","")}},_onTouchMove:function(b){if(N){var c=this.options,d=c.fallbackTolerance,e=c.fallbackOffset,f=b.touches?b.touches[0]:b,g=f.clientX-N.clientX+e.x,h=f.clientY-N.clientY+e.y,j=b.touches?"translate3d("+g+"px,"+h+"px,0)":"translate("+g+"px,"+h+"px)";if(!a.active){if(d&&ca(ba(f.clientX-this._lastX),ba(f.clientY-this._lastY))<d)return;this._dragStarted()}this._appendGhost(),P=!0,O=f,i(y,"webkitTransform",j),i(y,"mozTransform",j),i(y,"msTransform",j),i(y,"transform",j),b.preventDefault()}},_appendGhost:function(){if(!y){var a,b=w.getBoundingClientRect(),c=i(w),d=this.options;y=w.cloneNode(!0),h(y,d.ghostClass,!1),h(y,d.fallbackClass,!0),h(y,d.dragClass,!0),i(y,"top",b.top-W(c.marginTop,10)),i(y,"left",b.left-W(c.marginLeft,10)),i(y,"width",b.width),i(y,"height",b.height),i(y,"opacity","0.8"),i(y,"position","fixed"),i(y,"zIndex","100000"),i(y,"pointerEvents","none"),d.fallbackOnBody&&V.body.appendChild(y)||A.appendChild(y),a=y.getBoundingClientRect(),i(y,"width",2*b.width-a.width),i(y,"height",2*b.height-a.height)}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;this._offUpEvents(),L.checkPull(this,this,w,a)&&(z=u(w),z.draggable=!1,z.style["will-change"]="",i(z,"display","none"),h(z,this.options.chosenClass,!1),A.insertBefore(z,w),k(this,A,"clone",w)),h(w,d.dragClass,!0),b?("touch"===b?(f(V,"touchmove",this._onTouchMove),f(V,"touchend",this._onDrop),f(V,"touchcancel",this._onDrop),f(V,"pointermove",this._onTouchMove),f(V,"pointerup",this._onDrop)):(f(V,"mousemove",this._onTouchMove),f(V,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(c&&(c.effectAllowed="move",d.setData&&d.setData.call(this,c,w)),f(V,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(d){var e,f,g,h,j=this.el,k=this.options,m=k.group,p=a.active,q=L===m,r=!1,s=k.sort;if(void 0!==d.preventDefault&&(d.preventDefault(),!k.dragoverBubble&&d.stopPropagation()),!w.animated&&(P=!0,p&&!k.disabled&&(q?s||(h=!A.contains(w)):M===this||(p.lastPullMode=L.checkPull(this,p,w,d))&&m.checkPut(this,p,w,d))&&(void 0===d.rootEl||d.rootEl===this.el))){if(fa(d,k,this.el),aa)return;if(e=c(d.target,k.draggable,j),f=w.getBoundingClientRect(),M!==this&&(M=this,r=!0),h)return b(p,!0),x=A,void(z||B?A.insertBefore(w,z||B):s||A.appendChild(w));if(0===j.children.length||j.children[0]===y||j===d.target&&o(j,d)){if(0!==j.children.length&&j.children[0]!==y&&j===d.target&&(e=j.lastElementChild),e){if(e.animated)return;g=e.getBoundingClientRect()}b(p,q),l(A,j,w,f,e,g,d)!==!1&&(w.contains(j)||(j.appendChild(w),x=j),this._animate(f,w),e&&this._animate(g,e))}else if(e&&!e.animated&&e!==w&&void 0!==e.parentNode[T]){G!==e&&(G=e,H=i(e),I=i(e.parentNode)),g=e.getBoundingClientRect();var t=g.right-g.left,u=g.bottom-g.top,v=S.test(H.cssFloat+H.display)||"flex"==I.display&&0===I["flex-direction"].indexOf("row"),C=e.offsetWidth>w.offsetWidth,D=e.offsetHeight>w.offsetHeight,E=(v?(d.clientX-g.left)/t:(d.clientY-g.top)/u)>.5,F=e.nextElementSibling,J=!1;if(v){var K=w.offsetTop,N=e.offsetTop;J=K===N?e.previousElementSibling===w&&!C||E&&C:e.previousElementSibling===w||w.previousElementSibling===e?(d.clientY-g.top)/u>.5:N>K}else r||(J=F!==w&&!D||E&&D);var O=l(A,j,w,f,e,g,d,J);O!==!1&&(1!==O&&O!==-1||(J=1===O),aa=!0,setTimeout(n,30),b(p,q),w.contains(j)||(J&&!F?j.appendChild(w):e.parentNode.insertBefore(w,J?F:e)),x=w.parentNode,this._animate(f,w),this._animate(g,e))}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();1===a.nodeType&&(a=a.getBoundingClientRect()),i(b,"transition","none"),i(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,i(b,"transition","all "+c+"ms"),i(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=setTimeout(function(){i(b,"transition",""),i(b,"transform",""),b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;g(V,"touchmove",this._onTouchMove),g(V,"pointermove",this._onTouchMove),g(a,"mouseup",this._onDrop),g(a,"touchend",this._onDrop),g(a,"pointerup",this._onDrop),g(a,"touchcancel",this._onDrop),g(a,"pointercancel",this._onDrop),g(a,"selectstart",this)},_onDrop:function(b){var c=this.el,d=this.options;clearInterval(this._loopId),clearInterval(Q.pid),clearTimeout(this._dragStartTimer),g(V,"mousemove",this._onTouchMove),this.nativeDraggable&&(g(V,"drop",this),g(c,"dragstart",this._onDragStart)),this._offUpEvents(),b&&(P&&(b.preventDefault(),!d.dropBubble&&b.stopPropagation()),y&&y.parentNode&&y.parentNode.removeChild(y),A!==x&&"clone"===a.active.lastPullMode||z&&z.parentNode&&z.parentNode.removeChild(z),w&&(this.nativeDraggable&&g(w,"dragend",this),m(w),w.style["will-change"]="",h(w,this.options.ghostClass,!1),h(w,this.options.chosenClass,!1),k(this,A,"unchoose",w,A,J),A!==x?(K=q(w,d.draggable),K>=0&&(k(null,x,"add",w,A,J,K),k(this,A,"remove",w,A,J,K),k(null,x,"sort",w,A,J,K),k(this,A,"sort",w,A,J,K))):w.nextSibling!==B&&(K=q(w,d.draggable),K>=0&&(k(this,A,"update",w,A,J,K),k(this,A,"sort",w,A,J,K))),a.active&&(null!=K&&K!==-1||(K=J),k(this,A,"end",w,A,J,K),this.save()))),this._nulling()},_nulling:function(){A=w=x=y=B=z=C=D=E=N=O=P=K=G=H=M=L=a.active=null,da.forEach(function(a){a.checked=!0}),da.length=0},handleEvent:function(a){switch(a.type){case"drop":case"dragend":this._onDrop(a);break;case"dragover":case"dragenter":w&&(this._onDragOver(a),e(a));break;case"selectstart":a.preventDefault()}},toArray:function(){for(var a,b=[],d=this.el.children,e=0,f=d.length,g=this.options;e<f;e++)a=d[e],c(a,g.draggable,this.el)&&b.push(a.getAttribute(g.dataIdAttr)||p(a));return b},sort:function(a){var b={},d=this.el;this.toArray().forEach(function(a,e){var f=d.children[e];c(f,this.options.draggable,d)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(d.removeChild(b[a]),d.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return c(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:(c[a]=b,void("group"===a&&ga(c)))},destroy:function(){var a=this.el;a[T]=null,g(a,"mousedown",this._onTapStart),g(a,"touchstart",this._onTapStart),g(a,"pointerdown",this._onTapStart),this.nativeDraggable&&(g(a,"dragover",this),g(a,"dragenter",this)),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),ea.splice(ea.indexOf(this._onDragOver),1),this._onDrop(),this.el=a=null}},f(V,"touchmove",function(b){a.active&&b.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Z={capture:!1,passive:!1}}}))}catch(a){}return a.utils={on:f,off:g,css:i,find:j,is:function(a,b){return!!c(a,b,a)},extend:t,throttle:s,closest:c,toggleClass:h,clone:u,index:q},a.create=function(b,c){return new a(b,c)},a.version="1.6.0",a}),function(a){function b(a,b){for("string"==typeof b&&(b=document.createElement(b)),a.appendChild(b);a.firstChild!==b;)b.appendChild(a.firstChild)}function c(a){a.parentNode.removeChild(a)}var d="js-modal",e="label_modal_",f="modal",g="data-modal-background-click",h="data-modal-prefix-class",i="data-modal-text",j="data-modal-content-id",k="data-modal-title",l="data-modal-close-text",m="data-modal-close-title",n="data-modal-close-img",o="dialog",p="modal-close",q="js-modal-close",r="js-modal-close",s="data-content-back-id",t="data-focus-back",u="modal__content",v="js-modal-content",w="modal__closeimg",x="modal-close__text",y="modal-title",z="modal-title",A="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",B="js-modal-page",C="js-modal",D="js-modal-overlay",E="modal-overlay",F="Close modal",G="data-background-click",H="invisible",I="no-scroll",J="role",K="open",L="aria-labelledby",M="aria-hidden",N='aria-modal="true"',O=function(b){return a.getElementById(b)},P=function(a,b){a.classList?a.classList.add(b):a.className+=" "+b},Q=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")},R=function(a,b){return a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)},S=function(a,b){for(var c=!1,d=a.parentNode;d&&c===!1;)R(d,b)===!0?c=!0:d=d.parentNode;return c===!0?d.getAttribute("id"):""},T=function(a){var b=D,c=a.text||F,d=a.prefixClass+E,e="disabled"===a.backgroundEnabled?"disabled":"enabled";return'<span \n                  id="'+b+'"\n                  class="'+d+'"\n                  '+G+'="'+e+'" \n                  title="'+c+'"\n                  >\n                  <span class="'+H+'">'+c+"</span>\n                </span>"},U=function(a){var b=C,c=a.modalPrefixClass+f,d=a.modalPrefixClass+p,e=a.modalCloseImgPath?'<img\n                                        src="'+a.modalCloseImgPath+'" \n                                        alt="'+a.modalCloseText+'" \n                                        class="'+w+'"\n                                        />':'<span \n                                        class="'+x+'">\n                                        '+a.modalCloseText+"\n                                       </span>",g=a.modalPrefixClass+u,h=a.modalPrefixClass+z,i=""!==a.modalTitle?'<h1 \n                                        id="'+y+'" \n                                        class="'+h+'">\n                                        '+a.modalTitle+"\n                                       </h1>":"",j='<button \n                             type="button"\n                             class="'+r+" "+d+'"\n                             id="'+q+'"\n                             title="'+a.modalCloseTitle+'"\n                             '+s+'="'+a.modalContentId+'"\n                             '+t+'="'+a.modalFocusBackId+'"\n                             >\n                             '+e+"\n                            </button>",k=a.modalText;if(""===k&&a.modalContentId){var l=O(a.modalContentId);l&&(k='<div \n                            id="'+v+'">\n                            '+l.innerHTML+"\n                           </div",l.innerHTML="")}return'<dialog \n                  id="'+b+'"\n                  '+J+'="'+o+'"\n                  class="'+c+'"\n                  '+K+"\n                  "+N+"\n                  "+L+'="'+y+'"\n                  >\n                  <div role="document">\n                    '+j+'\n                    <div class="'+g+'">\n                      '+i+"\n                      "+k+"\n                    </div>\n                  </div>\n                </dialog>"},V=function(a){if(c(a.modal),c(a.overlay),""!==a.contentBackId){var b=O(a.contentBackId);b&&(b.innerHTML=a.modalContent)}if(a.modalFocusBackId){var d=O(a.modalFocusBackId);d&&d.focus()}},W=function(){return[].slice.call(a.querySelectorAll("."+d))},X=function c(){W().forEach(function(c,d){var f=d+1,g=O(B),h=a.querySelector("body");if(c.setAttribute("id",e+f),null===g||0===g.length){var i=a.createElement("DIV");i.setAttribute("id",B),b(h,i)}}),["click","keydown"].forEach(function(b){a.body.addEventListener(b,function(c){if(R(c.target,d)===!0&&"click"===b){var e=a.querySelector("body"),f=c.target,o=f.hasAttribute(h)===!0?f.getAttribute(h)+"-":"",p=f.hasAttribute(i)===!0?f.getAttribute(i):"",u=f.hasAttribute(j)===!0?f.getAttribute(j):"",w=f.hasAttribute(k)===!0?f.getAttribute(k):"",x=f.hasAttribute(l)===!0?f.getAttribute(l):F,y=f.hasAttribute(m)===!0?f.getAttribute(m):x,z=f.hasAttribute(n)===!0?f.getAttribute(n):"",E=f.hasAttribute(g)===!0?f.getAttribute(g):"",H=O(B);e.insertAdjacentHTML("beforeEnd",T({text:y,backgroundEnabled:E,prefixClass:o})),e.insertAdjacentHTML("beforeEnd",U({modalText:p,modalPrefixClass:o,backgroundEnabled:u,modalTitle:w,modalCloseText:x,modalCloseTitle:y,modalCloseImgPath:z,modalContentId:u,modalFocusBackId:f.getAttribute("id")})),H.setAttribute(M,"true"),P(e,I);var J=O(q);J.focus(),c.preventDefault()}var K=S(c.target,r);if((c.target.getAttribute("id")===q||""!==K||c.target.getAttribute("id")===D)&&"click"===b){var e=a.querySelector("body"),H=O(B),L=O(C),N=O(v)?O(v).innerHTML:"",W=O(D),X=O(q),Y=X.getAttribute(t),Z=X.getAttribute(s),E=W.getAttribute(G);c.target.getAttribute("id")===D&&"disabled"===E||(V({modal:L,modalContent:N,overlay:W,modalFocusBackId:Y,contentBackId:Z,backgroundEnabled:E,fromId:c.target.getAttribute("id")}),H.removeAttribute(M),Q(e,I))}if(O(C)&&"keydown"===b){var e=a.querySelector("body"),H=O(B),L=O(C),N=O(v)?O(v).innerHTML:"",W=O(D),X=O(q),Y=X.getAttribute(t),Z=X.getAttribute(s),$=[].slice.call(L.querySelectorAll(A));27===c.keyCode&&(V({modal:L,modalContent:N,overlay:W,modalFocusBackId:Y,contentBackId:Z}),H.removeAttribute(M),Q(e,I)),9===c.keyCode&&$.indexOf(c.target)>=0&&(c.shiftKey?c.target===$[0]&&($[$.length-1].focus(),c.preventDefault()):c.target===$[$.length-1]&&($[0].focus(),c.preventDefault())),9===c.keyCode&&$.indexOf(c.target)===-1&&(c.preventDefault(),$[0].focus())}},!0)}),document.removeEventListener("DOMContentLoaded",c)};document.addEventListener("DOMContentLoaded",X)}(document),function(a,b){"function"==typeof define&&define.amd?define([],b(a)):"object"==typeof exports?module.exports=b(a):a.vanillaTabScroller=b(a)}("undefined"!=typeof global?global:this.window||this.global,function(a){function b(a,b,c,d){var e=b,f=c-e,g=0,h=20,i=function(){g+=h;var b=Math.easeInOutQuad(g,e,f,d);a.scrollLeft=b,g<d&&setTimeout(i,h)};i()}var c,d,e={},f="querySelector"in document&&"addEventListener"in a,g={scroller:"[data-tabs-scroller]",wrapper:"[data-tabs-wrapper]",tabs:"[data-tabs]",tab:"[data-tab]",tabsButtonPrevClass:"pwt-tabs-scroller-prev",tabsButtonNextClass:"pwt-tabs-scroller-next",tabsOverflowClass:"has-tabs-overflow",tabsOverflowLeftClass:"has-tabs-left-overflow",tabsOverflowRightClass:"has-tabs-right-overflow",tabsScrollAmount:.8,tabsAnimationSpeed:400,beforeSetWidth:function(){},afterSetWidth:function(){}},h=function(a,b,c){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a);else for(var e=a.length-1;e>=0;e--)b.call(c,a[e],e,a)},i=function(){var a={},b=!1,c=0,d=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(b=arguments[0],c++);for(var e=function(c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(b&&"[object Object]"===Object.prototype.toString.call(c[d])?a[d]=i(!0,a[d],c[d]):a[d]=c[d])};c<d;c++){var f=arguments[c];e(f)}return a},j=function(a,b){for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){for(var b=(this.document||this.ownerDocument).querySelectorAll(a),c=b.length;--c>=0&&b.item(c)!==this;);return c>-1});a&&a!==document;a=a.parentNode)if(a.matches(b))return a;return null};Math.easeInOutQuad=function(a,b,c,d){return a/=d/2,a<1?c/2*a*a+b:(a--,-c/2*(a*(a-2)-1)+b)};var k=function(){var a=document.querySelectorAll(c.scroller);a&&(h(a,function(a){var b=document.createElement("button");b.setAttribute("type","button"),b.innerHTML="prev",b.classList.add(c.tabsButtonPrevClass),a.parentNode.insertBefore(b,a.parentNode.firstChild);var f=document.createElement("button");f.setAttribute("type","button"),f.innerHTML="next",f.classList.add(c.tabsButtonNextClass),a.parentNode.appendChild(f),setTimeout(function(){e.scrollToTab(a.querySelector(".is-active"),a)},c.tabsAnimationSpeed),a.addEventListener("scroll",function(){d||(d=setTimeout(function(){d=null,e.tabsCalculateScroll()},200))});var g=a.querySelectorAll(c.tab);g&&h(g,function(b){b.addEventListener("click",function(){e.scrollToTab(b,a)})})}),e.tabsCalculateScroll())};e.tabsCalculateScroll=function(a){var b=i(c||g,a||{}),d=document.querySelectorAll(b.scroller);d&&h(d,function(a){var b=a,d=b.querySelector(c.tabs).offsetWidth,e=b.clientWidth,f=b.scrollLeft,g=b.parentNode;d>e?g.classList.add(c.tabsOverflowClass):g.classList.remove(c.tabsOverflowClass),d>e&&f>0&&g.classList.add(c.tabsOverflowLeftClass),d>e&&g.classList.add(c.tabsOverflowRightClass),(d<=e||f<=0)&&g.classList.remove(c.tabsOverflowLeftClass),(d<=e||f>=d-e)&&g.classList.remove(c.tabsOverflowRightClass)})},e.calculateScroll=function(a,d){var e,f=a.querySelector(c.tabs).offsetWidth,g=a.querySelector(c.scroller).clientWidth,h=a.querySelector(c.scroller).scrollLeft;"prev"==d&&(e=h-g*c.tabsScrollAmount,e<0&&(e=0)),"next"==d&&(e=h+g*c.tabsScrollAmount,e>f-g&&(e=f-g)),b(a.querySelector(c.scroller),h,e,c.tabsAnimationSpeed)},e.scrollToTab=function(a,d){if(a){var e,f=a.offsetLeft,g=f+a.offsetWidth,h=parseInt(window.getComputedStyle(d.parentNode,null).getPropertyValue("padding-left"),10),i=parseInt(window.getComputedStyle(d.parentNode,null).getPropertyValue("padding-right"),10),j=d.scrollLeft,k=d.clientWidth;g>j+k&&(e=j+(g-(k+j)+i)),f<j&&(e=j-(j-f+h)),e&&b(d,j,e,c.tabsAnimationSpeed)}};var l=function(a){if(0===a.button&&!a.metaKey&&!a.ctrlKey){var b=j(a.target,c.wrapper);b&&(a.target.className==c.tabsButtonPrevClass&&e.calculateScroll(b,"prev"),a.target.className==c.tabsButtonNextClass&&e.calculateScroll(b,"next"))}},m=function(){d||(d=setTimeout(function(){d=null,e.tabsCalculateScroll()},200))};return e.destroy=function(){c&&(document.removeEventListener("click",l,!1),a.removeEventListener("resize",m,!1),c=null)},e.init=function(b){f&&(e.destroy(),c=i(g,b||{}),document.addEventListener("click",l,!1),a.addEventListener("resize",m,!1),k())},e});var pwtImage=function(){function a(a){var b=jQuery(a).closest(".js-pwtimage-id").prop("id");return void 0===b?(console.log("Cannot find parent ID for element"),console.log(a),!1):b}function b(a,b,d){var e="";switch(d){case"select":e='<div class="pwt-gallery__item"><a href="#" onclick="return pwtImage.previewImage(\'.pwt-gallery__items--images\', \''+b+'\');"><div class="pwt-gallery__item__image"><div class="pwt-gallery__item__center"><img src="'+b+'" alt="'+c(a)+'" /></div></div></a></div>';break;case"gallery":e='<div class="pwt-gallery__item draggable-item"><a href="#" onclick="pwtImage.imageInfo(this);"><div class="pwt-gallery__item__image"><div class="pwt-gallery__item__center"><img src="'+b+'" alt="'+c(a)+'" /></div></div></a><button type="button" class="pwt-add-button js-add"><span class="visually-hidden">'+Joomla.JText._("COM_PWTIMAGE_GALLERY_BUTTON_ADD","Add")+'</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Plus</title><g transform="matrix(1.09091,0,0,1.09091,8.88178e-16,-2.18182)"><path d="M22,11.5L22,14.5C22,14.917 21.854,15.271 21.562,15.562C21.27,15.853 20.916,15.999 20.5,16L14,16L14,22.5C14,22.917 13.854,23.271 13.562,23.562C13.27,23.853 12.916,23.999 12.5,24L9.5,24C9.083,24 8.729,23.854 8.438,23.562C8.147,23.27 8.001,22.916 8,22.5L8,16L1.5,16C1.083,16 0.729,15.854 0.438,15.562C0.147,15.27 0.001,14.916 0,14.5L0,11.5C0,11.083 0.146,10.729 0.438,10.438C0.73,10.147 1.084,10.001 1.5,10L8,10L8,3.5C8,3.083 8.146,2.729 8.438,2.438C8.73,2.147 9.084,2.001 9.5,2L12.5,2C12.917,2 13.271,2.146 13.562,2.438C13.853,2.73 13.999,3.084 14,3.5L14,10L20.5,10C20.917,10 21.271,10.146 21.562,10.438C21.853,10.73 21.999,11.084 22,11.5Z"/></g></svg></button><button type="button" class="pwt-info-button js-info" onclick="pwtImage.imageInfo(this);"><span class="visually-hidden">'+Joomla.JText._("COM_PWTIMAGE_GALLERY_BUTTON_INFO","Info")+'</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g transform="matrix(1.09091,0,0,1.09091,6.54545,-2.18182)"><path d="M10,21L10,23C10,23.271 9.901,23.505 9.703,23.703C9.505,23.901 9.271,24 9,24L1,24C0.729,24 0.495,23.901 0.297,23.703C0.099,23.505 0,23.271 0,23L0,21C0,20.729 0.099,20.495 0.297,20.297C0.495,20.099 0.729,20 1,20L2,20L2,14L1,14C0.729,14 0.495,13.901 0.297,13.703C0.099,13.505 0,13.271 0,13L0,11C0,10.729 0.099,10.495 0.297,10.297C0.495,10.099 0.729,10 1,10L7,10C7.271,10 7.505,10.099 7.703,10.297C7.901,10.495 8,10.729 8,11L8,20L9,20C9.271,20 9.505,20.099 9.703,20.297C9.901,20.495 10,20.729 10,21ZM8,3L8,6C8,6.271 7.901,6.505 7.703,6.703C7.505,6.901 7.271,7 7,7L3,7C2.729,7 2.495,6.901 2.297,6.703C2.099,6.505 2,6.271 2,6L2,3C2,2.729 2.099,2.495 2.297,2.297C2.495,2.099 2.729,2 3,2L7,2C7.271,2 7.505,2.099 7.703,2.297C7.901,2.495 8,2.729 8,3Z"/></g></svg></button><button type="button" class="pwt-remove-button js-remove"><span class="visually-hidden">'+Joomla.JText._("COM_PWTIMAGE_GALLERY_BUTTON_REMOVE","Remove")+'</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Minus</title><g transform="matrix(1.09091,0,0,1.09091,8.88178e-16,-2.18182)"><path d="M22,11.5L22,14.5C22,14.917 21.854,15.271 21.562,15.562C21.27,15.853 20.916,15.999 20.5,16L1.5,16C1.083,16 0.729,15.854 0.438,15.562C0.147,15.27 0.001,14.916 0,14.5L0,11.5C0,11.083 0.146,10.729 0.438,10.438C0.73,10.147 1.084,10.001 1.5,10L20.5,10C20.917,10 21.271,10.146 21.562,10.438C21.853,10.73 21.999,11.084 22,11.5Z"/></g></svg></button></div>'}return e}function c(a){var b=a.substring(a.lastIndexOf("/")+1);return b.lastIndexOf(".")!==-1&&(b=b.substring(0,b.lastIndexOf("."))),b}function d(){var a=document.getElementById("js-sortable-origin"),b=document.getElementById("js-sortable-result"),c=Sortable.create(a,{group:{name:"origin",pull:"clone"},sort:!1,animation:150,onStart:function(a){a.clone.classList.add("is-undraggable")},onEnd:function(a){e()}}),d=Sortable.create(b,{group:{name:"results",put:"origin"},animation:150,filter:".js-remove",onFilter:function(a){var b=d.closest(a.item),f=b.querySelector("img").getAttribute("src"),g=c.el.querySelector('img[src="'+f+'"]');if(b&&b.parentNode.removeChild(b),g){var h=g.closest(".draggable-item");h.classList.contains("is-undraggable")&&h.classList.remove("is-undraggable")}e()}});jQuery("#gallery").prop("onclick",null).off("click").on("click",".pwt-add-button",function(){jQuery(this).closest(".draggable-item").clone().appendTo(d.el),jQuery(this).closest(".draggable-item").addClass("is-undraggable"),
e()})}function e(){jQuery("#imageCount").html(jQuery("#js-sortable-result img").length)}function f(a,b,c){var d=JSON.parse(localStorage.getItem("pwtImage"));void 0!==d&&null!==d||(d={});var e=a+"_"+b;for(var f in d)f.indexOf(b)>0&&e!==f&&d.hasOwnProperty(f)&&delete d[f];d[e]=c,localStorage.setItem("pwtImage",JSON.stringify(d))}function g(a,b){var c=JSON.parse(localStorage.getItem("pwtImage"));if(void 0===c||null===c)return[];var d=a+"_"+b;return c.hasOwnProperty(d)?c[d]:void 0}var h={},i=[],j="",k="",l=!1,m="",n="",o="",p="",q=100;return h.addRepeatImage=function(){var a=jQuery("div.js-image-controls"),b=a.first().clone(),c=(new Date).getTime(),d=b.children(":first").prop("id").split("_")[0];b.prop("id",c),b.children("#"+d+"_preview").prop("id",c+"_preview").html(""),b.children("#"+d+"_clear").prop("id",c+"_clear").addClass("hidden").prop("onclick","pwtImage.clearImage('"+c+"');"),b.children("button#label_modal_1").prop("onclick","pwtImage.setTargetId('"+c+"');"),a.last().after(b)},h.prepareUpload=function(a){jQuery("#"+a+" button.js-button-save-new").prop("disabled",!0),jQuery("#"+a+" .pwt-image-localfile").val(""),jQuery("#"+a+" .pwt-image-targetfile").val(""),jQuery("#"+a+" .pwt-message").removeClass("is-visible")},h.setTargetId=function(a){j=a},h.setIframeLink=function(a){k=a},h.setWysiwyg=function(a){l=a},h.getTargetId=function(){return j},h.saveImage=function(a,b,c,d){var e=!1;void 0!==i[a]&&(e=i[a]),"undefined"===d&&(d=!1);var f=jQuery("#post-url").val(),g=jQuery("#"+a+"_upload")[0].files[0],j=jQuery("#"+a+" .js-pwt-image-data").val(),k=jQuery("#"+a+" .js-pwt-image-width").val(),q=k,r=jQuery("#"+a+" .js-pwt-image-ratio").val(),s=jQuery("#"+a+" .js-pwt-image-sourcePath").val(),t=jQuery("#"+a+" .js-pwt-image-subPath").val(),u=jQuery("#"+a+" .js-pwt-image-localfile").val(),v=jQuery("#"+a+" .js-pwt-image-targetfile").val(),w=jQuery("#"+a+"_widthOptions").val(),x=jQuery("#"+a+"_storeFolder").val(),y=new FormData;switch(p&&void 0===g&&(g=p[0]),""===n&&(n=jQuery("#"+a+" #alt").val()),""===o&&(o=jQuery("#"+a+" #caption").val()),jQuery("#"+a+"_destinationFolder").val()){case"select":x=jQuery("#"+a+"_selectedFolder").val();break;case"default":x=t}if(0===Number(k))if(e)k=e.getCropBoxData().width;else{var z=new Image;z.onload=function(){k=this.width},z.src=u}y.append("option","com_pwtimage"),y.append("task","image.processImage"),y.append("format","json"),y.append("image",g),y.append("pwt-image-localFile",u),y.append("pwt-image-targetFile",v),y.append("set-width",q),y.append("widthOptions",w),y.append("storeFolder",x),y.append("alt",n),y.append("caption",o),y.append("pwt-image-data",j),y.append("pwt-image-width",k),y.append("pwt-image-ratio",r),y.append("pwt-image-sourcePath",s),y.append("pwt-image-subPath",t),y.append(b,c);var A=h.getTargetId();if(jQuery.ajax({type:"POST",data:y,contentType:!1,url:f,cache:!1,processData:!1,async:!1,success:function(b){b.message&&window.parent.Joomla.renderMessages({warning:[b.message]}),b.messages&&window.parent.Joomla.renderMessages(b.messages),m=b.data,l||(window.parent.jQuery("#"+A+"_value").val(m),window.parent.jQuery("#"+A+"_preview").html('<img src="../'+m+'" />'),window.parent.jQuery("#"+A+"_clear").removeClass("hidden")),d&&(jQuery("#"+a+" .pwt-message").addClass("is-visible"),jQuery("#"+a+" span.has_folder").html(b.data)),e&&e.destroy();var c=document.getElementById(a+"_js-pwtimage-image");if(c.removeAttribute("src"),!d)return h.closeModal(),!1},error:function(a){jQuery("#"+A+"_preview img").prop("src",""),Joomla.renderMessages({error:[Joomla.JText._("COM_PWTIMAGE_SAVE_FAILED","There was a problem to save the file")]}),console.log("Image upload failed: "+a.responseText)}}),d){n="",o="",m="",jQuery("#"+a+" .js-pwt-image-localfile").val(""),jQuery("#"+a+"_upload").replaceWith(jQuery("#"+a+"_upload").val("").clone(!0)),jQuery("#"+a+" .js-pwt-image-data").val(""),0===x.length&&(s=jQuery("#"+a+" .js-sourcePath").text(),x=s.substring(0,s.length-1)),h.loadFolder("#"+a,x,"select",b,c);var B=jQuery(".pwt-fulltab-message");B.removeClass("is-hidden"),B.next().addClass("is-hidden"),jQuery('[href="#select"]').trigger("click")}return h.cancelImage(a),!1},h.saveGallery=function(){var a=[];jQuery("#gallery #js-sortable-result img").each(function(b,c){var d=jQuery(c).prop("src").replace(/\//g,"_"),e=jQuery('#gallery-image-info input[name="input_'+d+'_alt"]').val(),f=jQuery('#gallery-image-info input[name="input_'+d+'_caption"]').val();a.push(jQuery(c).prop("src")+","+e+","+f)}),m=a.join("|"),jQuery("form.js-image-form #galleryPath").val(1),h.closeModal()},h.clearImage=function(a){jQuery("#"+a+"_value").val(""),jQuery("#"+a+"_preview img").prop("src",""),jQuery("#"+a+"_clear").addClass("hidden"),jQuery("#"+a+"_js-pwtimage-image").prop("src","")},h.imageToolbar=function(b){var c=a(b),d=jQuery(b).data();if(!jQuery(this).prop("disabled")&&!jQuery(this).hasClass("disabled")&&void 0!==i[c]){var e=i[c];switch(d.method){case"scaleX":case"scaleY":e[d.method](d.option),jQuery(b).data("option",1===d.option?-1:1);break;case"rotate":e[d.method](d.option);break;case"ratio":var f=d.option;if("string"==typeof f&&f.indexOf("/")>0){var g=d.option.split("/");f=g[0]/g[1]}e.setAspectRatio(f),jQuery("#"+c+" .js-pwt-image-ratio").val(d.option)}}},h.openImage=function(b){var c=a(b);jQuery("#"+c+" .js-pwt-image-toolbar").hide(),jQuery("#"+c+" .js-cropper-container").hide(),jQuery("form.js-image-form > div.pull-right").hide()},h.loadFolder=function(c,e,g,h,i){var j=a(c),k=new FormData,l=jQuery("#post-url").val();return k.append("option","com_pwtimage"),k.append("task","image.loadFolder"),k.append("format","json"),k.append("folder",e),k.append(h,i),jQuery.ajax({type:"POST",data:k,url:l,contentType:!1,cache:!1,processData:!1,success:function(a){if(a.message)console.log("Failed to load subfolders from folder "+e+". Message: "+a.message),jQuery(".pwt-gallery__items--images").html('<div class="alert alert-error">'+a.message+"</div>");else if(a.messages)for(index=0;index<a.messages.warning.length;++index)jQuery(".pwt-gallery__items--images").append('<div class="alert alert-error">'+a.messages.warning[index]+"</div>");else{var c=[];if(a.data.folders){var d,k=[],l="";(e.indexOf("/")>0||e.length>1)&&(d=e.split("/")),jQuery(d).each(function(a,b){l+=b,l.length>0&&("/"!==l.substring(0,1)&&(l="/"+l),k[a+1]='<a href="'+l+"\" onclick=\"pwtImage.loadFolder('.pwt-gallery__items--folders', '"+l+"', '"+g+"', '"+h+"', '"+i+'\'); return false;"><span class="icon-folder-2"></span>'+b+"</a>",l+="/")}),jQuery("#"+g+" .js-breadcrumb").html(k.join(" ")),jQuery(a.data.folders).each(function(a,b){var d=b;"/"!==e&&(d=e+"/"+b),c.push('<div class="pwt-gallery__item"><a href="'+d+"\" onclick=\"pwtImage.loadFolder('.pwt-gallery__items--folders', '"+d+"', '"+g+"', '"+h+"', '"+i+'\'); return false;"><div class="pwt-gallery__item__content"><span class="pwt-gallery__item__icon icon-folder-2"></span><span class="pwt-gallery__item__title">'+b+"</span></div></a></div>")}),c.length?jQuery("#"+j+" #"+g+" .pwt-gallery__items--folders").html(c.join(" ")):jQuery("#"+j+" #"+g+" .pwt-gallery__items--folders").html("")}c=[];var m=[];if(a.data.files){for(var n=Math.ceil(a.data.files.length/q),o=1;o<=n;o++)m.push('<a href="#" onclick="pwtImage.showMoreImages(\'.pwt-gallery__items--images\', '+o+", '"+g+"');\">"+o+"</a>");a.data.files.length>q&&(f(j,"files",a.data.files),f(j,"basePath",a.data.basePath));var p=a.data.files.slice(0,q);jQuery(p).each(function(d,e){var f="/";"/"===a.data.basePath.substring(a.data.basePath.length-1)&&(f="");var h=a.data.basePath+f+e;c.push(b(e,h,g))}),c.length?jQuery("#"+j+" #"+g+" .pwt-gallery__items--images").html(c.join(" ")):jQuery("#"+j+" #"+g+" .pwt-gallery__items--images").html(""),c.length?jQuery("#"+j+" #"+g+" .pwt-pagination").html('<div class="pwt-pagination__pages">'+m.join(" ")+"</div>"):jQuery("#"+j+" #"+g+" .pwt-pagination").html(""),jQuery(".pwt-gallery__item img").each(function(){jQuery(this).load(function(){this.width>this.height&&jQuery(this).addClass("is-landscape")})})}}},error:function(a){console.log("Failed to load folder: "+a.responseText),console.log("Response code: "+a.status+" "+a.statusText)}}),"gallery"===g&&d(),!1},h.showMoreImages=function(c,d,e){var f=a(c),h=g(f,"files"),i=g(f,"basePath"),j=1===d?0:(d-1)*q,k=d*q,l=h.slice(j,k),m=[];jQuery(l).each(function(a,c){var d=i+"/"+c;m.push(b(c,d,e))}),m.length?jQuery("#"+f+" #"+e+" .pwt-gallery__items--images").html(m.join(" ")):jQuery("#"+f+" #"+e+" .pwt-gallery__items--images").html("")},h.addImageToCanvas=function(b,c,d,e,f){var g=a(b);void 0!==e&&null!==e||(e=!1),void 0!==f&&null!==f||(f=1),jQuery("#"+g+" div.pwt-body div.cropper-container > div.cropper-container").remove();var h=jQuery("#"+g+" .js-pwt-image-ratio").val(),j=h.split("/");e||(d=document.getElementById(g+"_js-pwtimage-image"));var k=new Cropper(d,{aspectRatio:j[0]/j[1],viewMode:f,crop:function(a){var b=['{"x":'+a.detail.x,'"y":'+a.detail.y,'"height":'+a.detail.height,'"width":'+a.detail.width,'"rotate":'+a.detail.rotate,'"scaleX":'+a.detail.scaleX,'"scaleY":'+a.detail.scaleY+"}"].join();jQuery("#"+g+" .js-pwt-image-data").val(b)},ready:function(){var a=k.getImageData();k.setCropBoxData({top:0,width:a.width})}});if(e)i[g]=k,k.init(),window.parent.jQuery("#"+g+"_value").prop("value",c.name);else{k.replace(c),i[g]=k;var l=c.split("/").slice(-1)[0];jQuery("#"+g+" .js-pwt-image-targetfile").val(l)}return jQuery("#"+g+" .pwt-fulltab-message").addClass("is-hidden"),jQuery("#"+g+" button.js-button-save-new").prop("disabled",!1),jQuery("#"+g+" .js-image-info").removeClass("is-hidden"),jQuery('[href="#edit"]').trigger("click"),jQuery("#"+g+" .js-button-image").removeClass("hidden"),!1},h.closeModal=function(){l?(m&&jQuery("form.js-image-form #formPath").val(m),n&&jQuery("form.js-image-form #alt").val(n),o&&jQuery("form.js-image-form #caption").val(o),jQuery("form.js-image-form #layout").val("close"),jQuery("form.js-image-form").submit()):(window.parent.jQuery("iframe#pwtImageFrame-"+j).prop("src",k),window.parent.jQuery("#js-modal-close").click())},h.setDestination=function(b){var c=a(b);switch(choicesDestination.getValue().value){case"default":jQuery("#"+c+"_enterFolder").addClass("is-visible").removeClass("is-hidden"),jQuery("#"+c+"_storeFolder").prop("disabled",!0).prop("placeholder",jQuery(".js-pwt-image-subPath").val()),jQuery("#"+c+"_selectFolder").addClass("is-hidden").removeClass("is-visible");break;case"select":jQuery("#"+c+"_enterFolder").addClass("is-hidden").removeClass("is-visible"),jQuery("#"+c+"_selectFolder").addClass("is-visible").removeClass("is-hidden");break;case"custom":jQuery("#"+c+"_enterFolder").addClass("is-visible").removeClass("is-hidden"),jQuery("#"+c+"_storeFolder").prop("disabled",!1).prop("placeholder",""),jQuery("#"+c+"_selectFolder").addClass("is-hidden").removeClass("is-visible")}jQuery("#"+c+"_selectFolder").trigger("change")},h.imageInfo=function(a){if(0!==jQuery(a).closest("#js-sortable-result").length){var b=jQuery(a).parent().find("a").hasClass("is-selected");if(jQuery("#js-sortable-result").find("a.is-selected").removeClass("is-selected"),jQuery("#gallery-image-info .js-image-info").hide(),b)return void jQuery("#gallery-image-info").hide();if(jQuery(a).parent().find("a").addClass("is-selected"),"button"===a.type)var c=jQuery(a).siblings().find("img").prop("src").replace(/[\/\.]/g,"_");else var c=jQuery(a).find("img").prop("src").replace(/[\/\.]/g,"_");if(0===jQuery('#gallery-image-info input[name="input_'+c+'_alt"]').length){var d=document.createElement("div");d.className="js-image-info "+c+"_path",d.innerHTML=jQuery(a).parent().find("img").prop("src"),jQuery("#gallery-image-info .pwt-form-group:first").append(d);var e=document.createElement("input");e.type="text",e.name="input_"+c+"_alt",e.className="pwt-form-control js-image-info js-pwt-image-alt",jQuery("#gallery-image-info .pwt-form-group:nth-child(3)").append(e);var f=document.createElement("input");f.type="text",f.name="input_"+c+"_caption",f.className="pwt-form-control js-image-info js-pwt-image-caption",jQuery("#gallery-image-info .pwt-form-group:nth-child(4)").append(f)}else jQuery("#gallery-image-info div."+c+"_path").show(),jQuery('#gallery-image-info input[name="input_'+c+'_alt"]').show(),jQuery('#gallery-image-info input[name="input_'+c+'_caption"]').show();jQuery("#gallery-image-info").show(),jQuery('#gallery-image-info input[name="input_'+c+'_alt"]').focus()}},h.cleanUpAfterUpload=function(b){var c=a(b);jQuery('[href="#edit"]').trigger("click"),choicesDestination.setValueByChoice("default"),h.setDestination("#"+c+"_destinationFolder")},h.uploadImagePreview=function(b){var c=window.URL||window.webkitURL;if(c){var d=a(b),e=document.getElementById(d+"_upload");e.onchange=function(){h.createPreview(b,this.files),h.cleanUpAfterUpload(b),jQuery('[href="#edit"]')[0].click()}}return!1},h.createPreview=function(b,c){var d=a(b),e=jQuery("#"+d+"_preview img");if(c&&c.length){p=c;var f=c[0],g=jQuery(".js-pwt-image-maxsize").val(),h=jQuery(".js-pwt-image-dimensionsize");if(f.size>g&&g>0)return window.alert(jQuery(".js-pwt-image-maxsize-message").val()),imageUpload.value="",e.removeAttribute("src"),!1;if(/^image\/\w+$/.test(f.type)){if(e.prop("src",URL.createObjectURL(f)),e.naturalHeight>h.val()||e.naturalWidth>h.val())return window.alert(jQuery(".js-pwt-image-maxsize-message").val()),imageUpload.value="",e.removeAttribute("src"),!1;var i=f.name.split("/").slice(-1)[0];jQuery("#"+d+" .js-pwt-image-targetfile").val(i)}else window.alert(Joomla.JText._("COM_PWTIMAGE_CHOOSE_IMAGE","Please choose an image file."))}jQuery("#"+d+" .pwt-message").removeClass("is-visible"),jQuery("#"+d+" .pwt-edit-block").removeClass("is-hidden"),jQuery("#"+d+" .pwt-fulltab-message").addClass("is-hidden"),jQuery("#"+d+" .js-button-image").prop("disabled",!1)},h.previewImage=function(b,c){var d=a(b);h.cancelImage(d),jQuery("#"+d+"_preview img").prop("src",c),jQuery("#"+d+"_js-pwtimage-image").prop("src",c),jQuery("#"+d+" .js-pwt-image-localfile").val(c),jQuery('[href="#edit"]').trigger("click"),jQuery("#"+d+" .pwt-fulltab-message").addClass("is-hidden"),jQuery("#"+d+" .pwt-edit-block").removeClass("is-hidden"),jQuery("#"+d+" .js-image-preview").removeClass("is-hidden"),choicesDestination.setValueByChoice("select"),h.setDestination("#"+d+"_destinationFolder");var e=jQuery("#"+d+"_selectFolder").prev().text(),f=c.substring(e.length,c.lastIndexOf("/")),g=c.substring(c.lastIndexOf("/")+1),i=jQuery("#"+d+" .js-sourcePath").text();0===f.lastIndexOf(i)&&(f=f.substring(i.length)),f.length>1&&choicesFolder.setValueByChoice(f),g.length>0&&jQuery("#"+d+" #pwt-image-filename").val(g),jQuery("#"+d+" .js-button-image").prop("disabled",!1)},h.cancelImage=function(a){jQuery("#"+a+" button.js-button-save-new").prop("disabled",!0),jQuery("#"+a+" .js-image-cropper").addClass("is-hidden"),jQuery("#"+a+" .js-image-info").addClass("is-hidden"),jQuery("#"+a+" .js-image-preview").removeClass("is-hidden")},h}();!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Choices=b():a.Choices=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="/assets/scripts/dist/",b(0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(2),j=d(i),k=c(3),l=d(k),m=c(4),n=d(m),o=c(30),p=c(31);c(32);var q=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-choice]",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(g(this,a),(0,p.isType)("String",b)){var d=document.querySelectorAll(b);if(d.length>1)for(var e=1;e<d.length;e++){var f=d[e];new a(f,c)}}var h={silent:!1,items:[],choices:[],renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,removeItems:!0,removeItemButton:!1,editItems:!1,duplicateItems:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,regexFilter:null,shouldSort:!0,shouldSortItems:!1,sortFilter:p.sortByAlpha,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",addItemText:function(a){return'Press Enter to add <b>"'+a+'"</b>'},maxItemText:function(a){return"Only "+a+" values can be added."},uniqueItemText:"Only unique values can be added.",classNames:{containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",hiddenState:"is-hidden",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"},fuseOptions:{include:"score"},callbackOnInit:null,callbackOnCreateTemplates:null};if(this.idNames={itemChoice:"item-choice"},this.config=(0,p.extend)(h,c),"auto"!==this.config.renderSelectedChoices&&"always"!==this.config.renderSelectedChoices&&(this.config.silent||console.warn("renderSelectedChoices: Possible values are 'auto' and 'always'. Falling back to 'auto'."),this.config.renderSelectedChoices="auto"),this.store=new n.default(this.render),this.initialised=!1,this.currentState={},this.prevState={},this.currentValue="",this.element=b,this.passedElement=(0,p.isType)("String",b)?document.querySelector(b):b,!this.passedElement)return void(this.config.silent||console.error("Passed element not found"));this.isTextElement="text"===this.passedElement.type,this.isSelectOneElement="select-one"===this.passedElement.type,this.isSelectMultipleElement="select-multiple"===this.passedElement.type,this.isSelectElement=this.isSelectOneElement||this.isSelectMultipleElement,this.isValidElementType=this.isTextElement||this.isSelectElement,this.isIe11=!(!navigator.userAgent.match(/Trident/)||!navigator.userAgent.match(/rv[ :]11/)),this.isScrollingOnIe=!1,this.config.shouldSortItems===!0&&this.isSelectOneElement&&(this.config.silent||console.warn("shouldSortElements: Type of passed element is 'select-one', falling back to false.")),this.highlightPosition=0,this.canSearch=this.config.searchEnabled,this.placeholder=!1,this.isSelectOneElement||(this.placeholder=!!this.config.placeholder&&(this.config.placeholderValue||this.passedElement.getAttribute("placeholder"))),this.presetChoices=this.config.choices,this.presetItems=this.config.items,this.passedElement.value&&(this.presetItems=this.presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this.baseId=(0,p.generateId)(this.passedElement,"choices-"),this.render=this.render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this.wasTap=!0;var i="classList"in document.documentElement;i||this.config.silent||console.error("Choices: Your browser doesn't support Choices");var j=(0,p.isElement)(this.passedElement)&&this.isValidElementType;if(j){if("active"===this.passedElement.getAttribute("data-choice"))return;this.init()}else this.config.silent||console.error("Incompatible input passed")}return h(a,[{key:"init",value:function(){if(this.initialised!==!0){var a=this.config.callbackOnInit;this.initialised=!0,this._createTemplates(),this._createInput(),this.store.subscribe(this.render),this.render(),this._addEventListeners(),a&&(0,p.isType)("Function",a)&&a.call(this)}}},{key:"destroy",value:function(){if(this.initialised!==!1){this._removeEventListeners(),this.passedElement.classList.remove(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.removeAttribute("tabindex");var a=this.passedElement.getAttribute("data-choice-orig-style");Boolean(a)?(this.passedElement.removeAttribute("data-choice-orig-style"),this.passedElement.setAttribute("style",a)):this.passedElement.removeAttribute("style"),this.passedElement.removeAttribute("aria-hidden"),this.passedElement.removeAttribute("data-choice"),this.passedElement.value=this.passedElement.value,this.containerOuter.parentNode.insertBefore(this.passedElement,this.containerOuter),this.containerOuter.parentNode.removeChild(this.containerOuter),this.clearStore(),this.config.templates=null,this.initialised=!1}}},{key:"renderGroups",value:function(a,b,c){var d=this,e=c||document.createDocumentFragment(),f=this.config.sortFilter;return this.config.shouldSort&&a.sort(f),a.forEach(function(a){var c=b.filter(function(b){return d.isSelectOneElement?b.groupId===a.id:b.groupId===a.id&&!b.selected});if(c.length>=1){var f=d._getTemplate("choiceGroup",a);e.appendChild(f),d.renderChoices(c,e,!0)}}),e}},{key:"renderChoices",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=b||document.createDocumentFragment(),g=this.config,h=g.renderSelectedChoices,i=g.searchResultLimit,j=g.renderChoiceLimit,k=this.isSearching?p.sortByScore:this.config.sortFilter,l=function(a){var b="auto"!==h||c.isSelectOneElement||!a.selected;if(b){var d=c._getTemplate("choice",a);e.appendChild(d)}},m=a;"auto"!==h||this.isSelectOneElement||(m=a.filter(function(a){return!a.selected}));var n=m.reduce(function(a,b){return b.placeholder?a.placeholderChoices.push(b):a.normalChoices.push(b),a},{placeholderChoices:[],normalChoices:[]}),o=n.placeholderChoices,q=n.normalChoices;(this.config.shouldSort||this.isSearching)&&q.sort(k);var r=m.length,s=[].concat(f(o),f(q));this.isSearching?r=i:j>0&&!d&&(r=j);for(var t=0;t<r;t++)s[t]&&l(s[t]);return e}},{key:"renderItems",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=c||document.createDocumentFragment();if(this.config.shouldSortItems&&!this.isSelectOneElement&&a.sort(this.config.sortFilter),this.isTextElement){var e=this.store.getItemsReducedToValues(a),f=e.join(this.config.delimiter);this.passedElement.setAttribute("value",f),this.passedElement.value=f}else{var g=document.createDocumentFragment();a.forEach(function(a){var c=b._getTemplate("option",a);g.appendChild(c)}),this.passedElement.innerHTML="",this.passedElement.appendChild(g)}return a.forEach(function(a){var c=b._getTemplate("item",a);d.appendChild(c)}),d}},{key:"render",value:function(){if(this.currentState=this.store.getState(),this.currentState!==this.prevState){if((this.currentState.choices!==this.prevState.choices||this.currentState.groups!==this.prevState.groups||this.currentState.items!==this.prevState.items)&&this.isSelectElement){var a=this.store.getGroupsFilteredByActive(),b=this.store.getChoicesFilteredByActive(),c=document.createDocumentFragment();this.choiceList.innerHTML="",this.config.resetScrollPosition&&(this.choiceList.scrollTop=0),a.length>=1&&this.isSearching!==!0?c=this.renderGroups(a,b,c):b.length>=1&&(c=this.renderChoices(b,c));var d=this.store.getItemsFilteredByActive(),e=this._canAddItem(d,this.input.value);if(c.childNodes&&c.childNodes.length>0)e.response?(this.choiceList.appendChild(c),this._highlightChoice()):this.choiceList.appendChild(this._getTemplate("notice",e.notice));else{var f=void 0,g=void 0;this.isSearching?(g=(0,p.isType)("Function",this.config.noResultsText)?this.config.noResultsText():this.config.noResultsText,f=this._getTemplate("notice",g,"no-results")):(g=(0,p.isType)("Function",this.config.noChoicesText)?this.config.noChoicesText():this.config.noChoicesText,f=this._getTemplate("notice",g,"no-choices")),this.choiceList.appendChild(f)}}if(this.currentState.items!==this.prevState.items){var h=this.store.getItemsFilteredByActive();if(this.itemList.innerHTML="",h&&h){var i=this.renderItems(h);i.childNodes&&this.itemList.appendChild(i)}}this.prevState=this.currentState}}},{key:"highlightItem",value:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!a)return this;var c=a.id,d=a.groupId,e=d>=0?this.store.getGroupById(d):null;return this.store.dispatch((0,o.highlightItem)(c,!0)),b&&(e&&e.value?(0,p.triggerEvent)(this.passedElement,"highlightItem",{id:c,value:a.value,label:a.label,groupValue:e.value}):(0,p.triggerEvent)(this.passedElement,"highlightItem",{id:c,value:a.value,label:a.label})),this}},{key:"unhighlightItem",value:function(a){if(!a)return this;var b=a.id,c=a.groupId,d=c>=0?this.store.getGroupById(c):null;return this.store.dispatch((0,o.highlightItem)(b,!1)),d&&d.value?(0,p.triggerEvent)(this.passedElement,"unhighlightItem",{id:b,value:a.value,label:a.label,groupValue:d.value}):(0,p.triggerEvent)(this.passedElement,"unhighlightItem",{id:b,value:a.value,label:a.label}),this}},{key:"highlightAll",value:function(){var a=this,b=this.store.getItems();return b.forEach(function(b){a.highlightItem(b)}),this}},{key:"unhighlightAll",value:function(){var a=this,b=this.store.getItems();return b.forEach(function(b){a.unhighlightItem(b)}),this}},{key:"removeItemsByValue",value:function(a){var b=this;if(!a||!(0,p.isType)("String",a))return this;var c=this.store.getItemsFilteredByActive();return c.forEach(function(c){c.value===a&&b._removeItem(c)}),this}},{key:"removeActiveItems",value:function(a){var b=this,c=this.store.getItemsFilteredByActive();return c.forEach(function(c){c.active&&a!==c.id&&b._removeItem(c)}),this}},{key:"removeHighlightedItems",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.store.getItemsFilteredByActive();return c.forEach(function(c){c.highlighted&&c.active&&(a._removeItem(c),b&&a._triggerChange(c.value))}),this}},{key:"showDropdown",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=document.body,c=document.documentElement,d=Math.max(b.scrollHeight,b.offsetHeight,c.clientHeight,c.scrollHeight,c.offsetHeight);this.containerOuter.classList.add(this.config.classNames.openState),this.containerOuter.setAttribute("aria-expanded","true"),this.dropdown.classList.add(this.config.classNames.activeState),this.dropdown.setAttribute("aria-expanded","true");var e=this.dropdown.getBoundingClientRect(),f=Math.ceil(e.top+window.scrollY+this.dropdown.offsetHeight),g=!1;return"auto"===this.config.position?g=f>=d:"top"===this.config.position&&(g=!0),g&&this.containerOuter.classList.add(this.config.classNames.flippedState),a&&this.canSearch&&document.activeElement!==this.input&&this.input.focus(),(0,p.triggerEvent)(this.passedElement,"showDropdown",{}),this}},{key:"hideDropdown",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=this.containerOuter.classList.contains(this.config.classNames.flippedState);return this.containerOuter.classList.remove(this.config.classNames.openState),this.containerOuter.setAttribute("aria-expanded","false"),this.dropdown.classList.remove(this.config.classNames.activeState),this.dropdown.setAttribute("aria-expanded","false"),b&&this.containerOuter.classList.remove(this.config.classNames.flippedState),a&&this.canSearch&&document.activeElement===this.input&&this.input.blur(),(0,p.triggerEvent)(this.passedElement,"hideDropdown",{}),this}},{key:"toggleDropdown",value:function(){var a=this.dropdown.classList.contains(this.config.classNames.activeState);return a?this.hideDropdown():this.showDropdown(!0),this}},{key:"getValue",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.store.getItemsFilteredByActive(),d=[];return c.forEach(function(c){a.isTextElement?d.push(b?c.value:c):c.active&&d.push(b?c.value:c)}),this.isSelectOneElement?d[0]:d}},{key:"setValue",value:function(a){var b=this;if(this.initialised===!0){var c=[].concat(f(a)),d=function(a){var c=(0,p.getType)(a);if("Object"===c){if(!a.value)return;b.isTextElement?b._addItem(a.value,a.label,a.id,void 0,a.customProperties,a.placeholder):b._addChoice(a.value,a.label,!0,!1,-1,a.customProperties,a.placeholder)}else"String"===c&&(b.isTextElement?b._addItem(a):b._addChoice(a,a,!0,!1,-1,null))};c.length>1?c.forEach(function(a){d(a)}):d(c[0])}return this}},{key:"setValueByChoice",value:function(a){var b=this;if(!this.isTextElement){var c=this.store.getChoices(),d=(0,p.isType)("Array",a)?a:[a];d.forEach(function(a){var d=c.find(function(b){return b.value===a});d?d.selected?b.config.silent||console.warn("Attempting to select choice already selected"):b._addItem(d.value,d.label,d.id,d.groupId,d.customProperties,d.placeholder,d.keyCode):b.config.silent||console.warn("Attempting to select choice that does not exist")})}return this}},{key:"setChoices",value:function(a,b,c){var d=this,e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.initialised===!0&&this.isSelectElement){if(!(0,p.isType)("Array",a)||!b)return this;e&&this._clearChoices(),a&&a.length&&(this.containerOuter.classList.remove(this.config.classNames.loadingState),a.forEach(function(a){a.choices?d._addGroup(a,a.id||null,b,c):d._addChoice(a[b],a[c],a.selected,a.disabled,void 0,a.customProperties,a.placeholder)}))}return this}},{key:"clearStore",value:function(){return this.store.dispatch((0,o.clearAll)()),this}},{key:"clearInput",value:function(){return this.input.value&&(this.input.value=""),this.isSelectOneElement||this._setInputWidth(),!this.isTextElement&&this.config.searchEnabled&&(this.isSearching=!1,this.store.dispatch((0,o.activateChoices)(!0))),this}},{key:"enable",value:function(){if(this.initialised){this.passedElement.disabled=!1;var a=this.containerOuter.classList.contains(this.config.classNames.disabledState);a&&(this._addEventListeners(),this.passedElement.removeAttribute("disabled"),this.input.removeAttribute("disabled"),this.containerOuter.classList.remove(this.config.classNames.disabledState),this.containerOuter.removeAttribute("aria-disabled"),this.isSelectOneElement&&this.containerOuter.setAttribute("tabindex","0"))}return this}},{key:"disable",value:function(){if(this.initialised){this.passedElement.disabled=!0;var a=!this.containerOuter.classList.contains(this.config.classNames.disabledState);a&&(this._removeEventListeners(),this.passedElement.setAttribute("disabled",""),this.input.setAttribute("disabled",""),this.containerOuter.classList.add(this.config.classNames.disabledState),this.containerOuter.setAttribute("aria-disabled","true"),this.isSelectOneElement&&this.containerOuter.setAttribute("tabindex","-1"))}return this}},{key:"ajax",value:function(a){var b=this;return this.initialised===!0&&this.isSelectElement&&(requestAnimationFrame(function(){b._handleLoadingState(!0)}),a(this._ajaxCallback())),this}},{key:"_triggerChange",value:function(a){a&&(0,p.triggerEvent)(this.passedElement,"change",{
value:a})}},{key:"_handleButtonAction",value:function(a,b){if(a&&b&&this.config.removeItems&&this.config.removeItemButton){var c=b.parentNode.getAttribute("data-id"),d=a.find(function(a){return a.id===parseInt(c,10)});this._removeItem(d),this._triggerChange(d.value),this.isSelectOneElement&&this._selectPlaceholderChoice()}}},{key:"_selectPlaceholderChoice",value:function(){var a=this.store.getPlaceholderChoice();a&&(this._addItem(a.value,a.label,a.id,a.groupId,null,a.placeholder),this._triggerChange(a.value))}},{key:"_handleItemAction",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a&&b&&this.config.removeItems&&!this.isSelectOneElement){var e=b.getAttribute("data-id");a.forEach(function(a){a.id!==parseInt(e,10)||a.highlighted?d||a.highlighted&&c.unhighlightItem(a):c.highlightItem(a)}),document.activeElement!==this.input&&this.input.focus()}}},{key:"_handleChoiceAction",value:function(a,b){if(a&&b){var c=b.getAttribute("data-id"),d=this.store.getChoiceById(c),e=a[0]&&a[0].keyCode?a[0].keyCode:null,f=this.dropdown.classList.contains(this.config.classNames.activeState);if(d.keyCode=e,(0,p.triggerEvent)(this.passedElement,"choice",{choice:d}),d&&!d.selected&&!d.disabled){var g=this._canAddItem(a,d.value);g.response&&(this._addItem(d.value,d.label,d.id,d.groupId,d.customProperties,d.placeholder,d.keyCode),this._triggerChange(d.value))}this.clearInput(),f&&this.isSelectOneElement&&(this.hideDropdown(),this.containerOuter.focus())}}},{key:"_handleBackspace",value:function(a){if(this.config.removeItems&&a){var b=a[a.length-1],c=a.some(function(a){return a.highlighted});this.config.editItems&&!c&&b?(this.input.value=b.value,this._setInputWidth(),this._removeItem(b),this._triggerChange(b.value)):(c||this.highlightItem(b,!1),this.removeHighlightedItems(!0))}}},{key:"_canAddItem",value:function(a,b){var c=!0,d=(0,p.isType)("Function",this.config.addItemText)?this.config.addItemText(b):this.config.addItemText;(this.isSelectMultipleElement||this.isTextElement)&&this.config.maxItemCount>0&&this.config.maxItemCount<=a.length&&(c=!1,d=(0,p.isType)("Function",this.config.maxItemText)?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),this.isTextElement&&this.config.addItems&&c&&this.config.regexFilter&&(c=this._regexFilter(b));var e=!a.some(function(a){return(0,p.isType)("String",b)?a.value===b.trim():a.value===b});return e||this.config.duplicateItems||this.isSelectOneElement||!c||(c=!1,d=(0,p.isType)("Function",this.config.uniqueItemText)?this.config.uniqueItemText(b):this.config.uniqueItemText),{response:c,notice:d}}},{key:"_handleLoadingState",value:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],b=this.itemList.querySelector("."+this.config.classNames.placeholder);a?(this.containerOuter.classList.add(this.config.classNames.loadingState),this.containerOuter.setAttribute("aria-busy","true"),this.isSelectOneElement?b?b.innerHTML=this.config.loadingText:(b=this._getTemplate("placeholder",this.config.loadingText),this.itemList.appendChild(b)):this.input.placeholder=this.config.loadingText):(this.containerOuter.classList.remove(this.config.classNames.loadingState),this.isSelectOneElement?b.innerHTML=this.placeholder||"":this.input.placeholder=this.placeholder||"")}},{key:"_ajaxCallback",value:function(){var a=this;return function(b,c,d){if(b&&c){var e=(0,p.isType)("Object",b)?[b]:b;e&&(0,p.isType)("Array",e)&&e.length?(a._handleLoadingState(!1),e.forEach(function(b){if(b.choices){var e=b.id||null;a._addGroup(b,e,c,d)}else a._addChoice(b[c],b[d],b.selected,b.disabled,void 0,b.customProperties,b.placeholder)}),a.isSelectOneElement&&a._selectPlaceholderChoice()):a._handleLoadingState(!1),a.containerOuter.removeAttribute("aria-busy")}}}},{key:"_searchChoices",value:function(a){var b=(0,p.isType)("String",a)?a.trim():a,c=(0,p.isType)("String",this.currentValue)?this.currentValue.trim():this.currentValue;if(b.length>=1&&b!==c+" "){var d=this.store.getSearchableChoices(),e=b,f=(0,p.isType)("Array",this.config.searchFields)?this.config.searchFields:[this.config.searchFields],g=Object.assign(this.config.fuseOptions,{keys:f}),h=new j.default(d,g),i=h.search(e);return this.currentValue=b,this.highlightPosition=0,this.isSearching=!0,this.store.dispatch((0,o.filterChoices)(i)),i.length}return 0}},{key:"_handleSearch",value:function(a){if(a){var b=this.store.getChoices(),c=b.some(function(a){return!a.active});if(this.input===document.activeElement)if(a&&a.length>=this.config.searchFloor){var d=0;this.config.searchChoices&&(d=this._searchChoices(a)),(0,p.triggerEvent)(this.passedElement,"search",{value:a,resultCount:d})}else c&&(this.isSearching=!1,this.store.dispatch((0,o.activateChoices)(!0)))}}},{key:"_addEventListeners",value:function(){document.addEventListener("keyup",this._onKeyUp),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("click",this._onClick),document.addEventListener("touchmove",this._onTouchMove),document.addEventListener("touchend",this._onTouchEnd),document.addEventListener("mousedown",this._onMouseDown),document.addEventListener("mouseover",this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.addEventListener("focus",this._onFocus),this.containerOuter.addEventListener("blur",this._onBlur)),this.input.addEventListener("input",this._onInput),this.input.addEventListener("paste",this._onPaste),this.input.addEventListener("focus",this._onFocus),this.input.addEventListener("blur",this._onBlur)}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keyup",this._onKeyUp),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("click",this._onClick),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd),document.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mouseover",this._onMouseOver),this.isSelectOneElement&&(this.containerOuter.removeEventListener("focus",this._onFocus),this.containerOuter.removeEventListener("blur",this._onBlur)),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("paste",this._onPaste),this.input.removeEventListener("focus",this._onFocus),this.input.removeEventListener("blur",this._onBlur)}},{key:"_setInputWidth",value:function(){this.placeholder?this.input.value&&this.input.value.length>=this.placeholder.length/1.25&&(this.input.style.width=(0,p.getWidthOfInput)(this.input)):this.input.style.width=(0,p.getWidthOfInput)(this.input)}},{key:"_onKeyDown",value:function(a){var b,c=this;if(a.target===this.input||this.containerOuter.contains(a.target)){var d=a.target,f=this.store.getItemsFilteredByActive(),g=this.input===document.activeElement,h=this.dropdown.classList.contains(this.config.classNames.activeState),i=this.itemList&&this.itemList.children,j=String.fromCharCode(a.keyCode),k=46,l=8,m=13,n=65,o=27,q=38,r=40,s=33,t=34,u=a.ctrlKey||a.metaKey;this.isTextElement||!/[a-zA-Z0-9-_ ]/.test(j)||h||this.showDropdown(!0),this.canSearch=this.config.searchEnabled;var v=function(){u&&i&&(c.canSearch=!1,c.config.removeItems&&!c.input.value&&c.input===document.activeElement&&c.highlightAll())},w=function(){if(c.isTextElement&&d.value){var b=c.input.value,e=c._canAddItem(f,b);e.response&&(h&&c.hideDropdown(),c._addItem(b),c._triggerChange(b),c.clearInput())}if(d.hasAttribute("data-button")&&(c._handleButtonAction(f,d),a.preventDefault()),h){a.preventDefault();var g=c.dropdown.querySelector("."+c.config.classNames.highlightedState);g&&(f[0]&&(f[0].keyCode=m),c._handleChoiceAction(f,g))}else c.isSelectOneElement&&(h||(c.showDropdown(!0),a.preventDefault()))},x=function(){h&&(c.toggleDropdown(),c.containerOuter.focus())},y=function(){if(h||c.isSelectOneElement){h||c.showDropdown(!0),c.canSearch=!1;var b=a.keyCode===r||a.keyCode===t?1:-1,d=a.metaKey||a.keyCode===t||a.keyCode===s,e=void 0;if(d)e=b>0?Array.from(c.dropdown.querySelectorAll("[data-choice-selectable]")).pop():c.dropdown.querySelector("[data-choice-selectable]");else{var f=c.dropdown.querySelector("."+c.config.classNames.highlightedState);e=f?(0,p.getAdjacentEl)(f,"[data-choice-selectable]",b):c.dropdown.querySelector("[data-choice-selectable]")}e&&((0,p.isScrolledIntoView)(e,c.choiceList,b)||c._scrollToChoice(e,b),c._highlightChoice(e)),a.preventDefault()}},z=function(){!g||a.target.value||c.isSelectOneElement||(c._handleBackspace(f),a.preventDefault())},A=(b={},e(b,n,v),e(b,m,w),e(b,o,x),e(b,q,y),e(b,s,y),e(b,r,y),e(b,t,y),e(b,l,z),e(b,k,z),b);A[a.keyCode]&&A[a.keyCode]()}}},{key:"_onKeyUp",value:function(a){if(a.target===this.input){var b=this.input.value,c=this.store.getItemsFilteredByActive(),d=this._canAddItem(c,b);if(this.isTextElement){var e=this.dropdown.classList.contains(this.config.classNames.activeState);if(b){if(d.notice){var f=this._getTemplate("notice",d.notice);this.dropdown.innerHTML=f.outerHTML}d.response===!0?e||this.showDropdown():!d.notice&&e&&this.hideDropdown()}else e&&this.hideDropdown()}else{var g=46,h=8;a.keyCode!==g&&a.keyCode!==h||a.target.value?this.canSearch&&d.response&&this._handleSearch(this.input.value):!this.isTextElement&&this.isSearching&&(this.isSearching=!1,this.store.dispatch((0,o.activateChoices)(!0)))}this.canSearch=this.config.searchEnabled}}},{key:"_onInput",value:function(){this.isSelectOneElement||this._setInputWidth()}},{key:"_onTouchMove",value:function(){this.wasTap===!0&&(this.wasTap=!1)}},{key:"_onTouchEnd",value:function(a){var b=a.target||a.touches[0].target,c=this.dropdown.classList.contains(this.config.classNames.activeState);this.wasTap===!0&&this.containerOuter.contains(b)&&(b!==this.containerOuter&&b!==this.containerInner||this.isSelectOneElement||(this.isTextElement?document.activeElement!==this.input&&this.input.focus():c||this.showDropdown(!0)),a.stopPropagation()),this.wasTap=!0}},{key:"_onMouseDown",value:function(a){var b=a.target;if(b===this.choiceList&&this.isIe11&&(this.isScrollingOnIe=!0),this.containerOuter.contains(b)&&b!==this.input){var c=void 0,d=this.store.getItemsFilteredByActive(),e=a.shiftKey;(c=(0,p.findAncestorByAttrName)(b,"data-button"))?this._handleButtonAction(d,c):(c=(0,p.findAncestorByAttrName)(b,"data-item"))?this._handleItemAction(d,c,e):(c=(0,p.findAncestorByAttrName)(b,"data-choice"))&&this._handleChoiceAction(d,c),a.preventDefault()}}},{key:"_onClick",value:function(a){var b=a.target,c=this.dropdown.classList.contains(this.config.classNames.activeState),d=this.store.getItemsFilteredByActive();if(this.containerOuter.contains(b))b.hasAttribute("data-button")&&this._handleButtonAction(d,b),c?this.isSelectOneElement&&b!==this.input&&!this.dropdown.contains(b)&&this.hideDropdown(!0):this.isTextElement?document.activeElement!==this.input&&this.input.focus():this.canSearch?this.showDropdown(!0):(this.showDropdown(),this.containerOuter.focus());else{var e=d.some(function(a){return a.highlighted});e&&this.unhighlightAll(),this.containerOuter.classList.remove(this.config.classNames.focusState),c&&this.hideDropdown()}}},{key:"_onMouseOver",value:function(a){(a.target===this.dropdown||this.dropdown.contains(a.target))&&a.target.hasAttribute("data-choice")&&this._highlightChoice(a.target)}},{key:"_onPaste",value:function(a){a.target!==this.input||this.config.paste||a.preventDefault()}},{key:"_onFocus",value:function(a){var b=this,c=a.target;if(this.containerOuter.contains(c)){var d=this.dropdown.classList.contains(this.config.classNames.activeState),e={text:function(){c===b.input&&b.containerOuter.classList.add(b.config.classNames.focusState)},"select-one":function(){b.containerOuter.classList.add(b.config.classNames.focusState),c===b.input&&(d||b.showDropdown())},"select-multiple":function(){c===b.input&&(b.containerOuter.classList.add(b.config.classNames.focusState),d||b.showDropdown(!0))}};e[this.passedElement.type]()}}},{key:"_onBlur",value:function(a){var b=this,c=a.target;if(this.containerOuter.contains(c)&&!this.isScrollingOnIe){var d=this.store.getItemsFilteredByActive(),e=this.dropdown.classList.contains(this.config.classNames.activeState),f=d.some(function(a){return a.highlighted}),g={text:function(){c===b.input&&(b.containerOuter.classList.remove(b.config.classNames.focusState),f&&b.unhighlightAll(),e&&b.hideDropdown())},"select-one":function(){b.containerOuter.classList.remove(b.config.classNames.focusState),c===b.containerOuter&&e&&!b.canSearch&&b.hideDropdown(),c===b.input&&e&&b.hideDropdown()},"select-multiple":function(){c===b.input&&(b.containerOuter.classList.remove(b.config.classNames.focusState),e&&b.hideDropdown(),f&&b.unhighlightAll())}};g[this.passedElement.type]()}else this.isScrollingOnIe=!1,this.input.focus()}},{key:"_regexFilter",value:function(a){if(!a)return!1;var b=this.config.regexFilter,c=new RegExp(b.source,"i");return c.test(a)}},{key:"_scrollToChoice",value:function(a,b){var c=this;if(a){var d=this.choiceList.offsetHeight,e=a.offsetHeight,f=a.offsetTop+e,g=this.choiceList.scrollTop+d,h=b>0?this.choiceList.scrollTop+f-g:a.offsetTop,i=function a(){var d=4,e=c.choiceList.scrollTop,f=!1,g=void 0,i=void 0;b>0?(g=(h-e)/d,i=g>1?g:1,c.choiceList.scrollTop=e+i,e<h&&(f=!0)):(g=(e-h)/d,i=g>1?g:1,c.choiceList.scrollTop=e-i,e>h&&(f=!0)),f&&requestAnimationFrame(function(c){a(c,h,b)})};requestAnimationFrame(function(a){i(a,h,b)})}}},{key:"_highlightChoice",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=Array.from(this.dropdown.querySelectorAll("[data-choice-selectable]")),d=b;if(c&&c.length){var e=Array.from(this.dropdown.querySelectorAll("."+this.config.classNames.highlightedState));e.forEach(function(b){b.classList.remove(a.config.classNames.highlightedState),b.setAttribute("aria-selected","false")}),d?this.highlightPosition=c.indexOf(d):(d=c.length>this.highlightPosition?c[this.highlightPosition]:c[c.length-1],d||(d=c[0])),d.classList.add(this.config.classNames.highlightedState),d.setAttribute("aria-selected","true"),this.containerOuter.setAttribute("aria-activedescendant",d.id)}}},{key:"_addItem",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]&&arguments[5],g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,h=(0,p.isType)("String",a)?a.trim():a,i=g,j=this.store.getItems(),k=b||h,l=parseInt(c,10)||-1,m=d>=0?this.store.getGroupById(d):null,n=j?j.length+1:1;return this.config.prependValue&&(h=this.config.prependValue+h.toString()),this.config.appendValue&&(h+=this.config.appendValue.toString()),this.store.dispatch((0,o.addItem)(h,k,n,l,d,e,f,i)),this.isSelectOneElement&&this.removeActiveItems(n),m&&m.value?(0,p.triggerEvent)(this.passedElement,"addItem",{id:n,value:h,label:k,groupValue:m.value,keyCode:i}):(0,p.triggerEvent)(this.passedElement,"addItem",{id:n,value:h,label:k,keyCode:i}),this}},{key:"_removeItem",value:function(a){if(!a||!(0,p.isType)("Object",a))return this;var b=a.id,c=a.value,d=a.label,e=a.choiceId,f=a.groupId,g=f>=0?this.store.getGroupById(f):null;return this.store.dispatch((0,o.removeItem)(b,e)),g&&g.value?(0,p.triggerEvent)(this.passedElement,"removeItem",{id:b,value:c,label:d,groupValue:g.value}):(0,p.triggerEvent)(this.passedElement,"removeItem",{id:b,value:c,label:d}),this}},{key:"_addChoice",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,g=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if("undefined"!=typeof a&&null!==a){var i=this.store.getChoices(),j=b||a,k=i?i.length+1:1,l=this.baseId+"-"+this.idNames.itemChoice+"-"+k;this.store.dispatch((0,o.addChoice)(a,j,k,e,d,l,f,g,h)),c&&this._addItem(a,j,k,void 0,f,g,h)}}},{key:"_clearChoices",value:function(){this.store.dispatch((0,o.clearChoices)())}},{key:"_addGroup",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"label",f=(0,p.isType)("Object",a)?a.choices:Array.from(a.getElementsByTagName("OPTION")),g=b?b:Math.floor((new Date).valueOf()*Math.random()),h=!!a.disabled&&a.disabled;f?(this.store.dispatch((0,o.addGroup)(a.label,g,!0,h)),f.forEach(function(a){var b=a.disabled||a.parentNode&&a.parentNode.disabled;c._addChoice(a[d],(0,p.isType)("Object",a)?a[e]:a.innerHTML,a.selected,b,g,a.customProperties,a.placeholder)})):this.store.dispatch((0,o.addGroup)(a.label,a.id,!1,a.disabled))}},{key:"_getTemplate",value:function(a){if(!a)return null;for(var b=this.config.templates,c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b[a].apply(b,d)}},{key:"_createTemplates",value:function(){var a=this,b=this.config.classNames,c={containerOuter:function(c){return(0,p.strToEl)('\n          <div\n            class="'+b.containerOuter+'"\n            '+(a.isSelectElement?a.config.searchEnabled?'role="combobox" aria-autocomplete="list"':'role="listbox"':"")+'\n            data-type="'+a.passedElement.type+'"\n            '+(a.isSelectOneElement?'tabindex="0"':"")+'\n            aria-haspopup="true"\n            aria-expanded="false"\n            dir="'+c+'"\n            >\n          </div>\n        ')},containerInner:function(){return(0,p.strToEl)('\n          <div class="'+b.containerInner+'"></div>\n        ')},itemList:function(){var c,d=(0,l.default)(b.list,(c={},e(c,b.listSingle,a.isSelectOneElement),e(c,b.listItems,!a.isSelectOneElement),c));return(0,p.strToEl)('\n          <div class="'+d+'"></div>\n        ')},placeholder:function(a){return(0,p.strToEl)('\n          <div class="'+b.placeholder+'">\n            '+a+"\n          </div>\n        ")},item:function(c){var d,f=(0,l.default)(b.item,(d={},e(d,b.highlightedState,c.highlighted),e(d,b.itemSelectable,!c.highlighted),e(d,b.placeholder,c.placeholder),d));if(a.config.removeItemButton){var g;return f=(0,l.default)(b.item,(g={},e(g,b.highlightedState,c.highlighted),e(g,b.itemSelectable,!c.disabled),e(g,b.placeholder,c.placeholder),g)),(0,p.strToEl)('\n            <div\n              class="'+f+'"\n              data-item\n              data-id="'+c.id+'"\n              data-value="'+c.value+'"\n              data-deletable\n              '+(c.active?'aria-selected="true"':"")+"\n              "+(c.disabled?'aria-disabled="true"':"")+"\n              >\n              "+c.label+'<!--\n           --><button\n                type="button"\n                class="'+b.button+'"\n                data-button\n                aria-label="Remove item: \''+c.value+"'\"\n                >\n                Remove item\n              </button>\n            </div>\n          ")}return(0,p.strToEl)('\n          <div\n            class="'+f+'"\n            data-item\n            data-id="'+c.id+'"\n            data-value="'+c.value+'"\n            '+(c.active?'aria-selected="true"':"")+"\n            "+(c.disabled?'aria-disabled="true"':"")+"\n            >\n            "+c.label+"\n          </div>\n        ")},choiceList:function(){return(0,p.strToEl)('\n          <div\n            class="'+b.list+'"\n            dir="ltr"\n            role="listbox"\n            '+(a.isSelectOneElement?"":'aria-multiselectable="true"')+"\n            >\n          </div>\n        ")},choiceGroup:function(a){var c=(0,l.default)(b.group,e({},b.itemDisabled,a.disabled));return(0,p.strToEl)('\n          <div\n            class="'+c+'"\n            data-group\n            data-id="'+a.id+'"\n            data-value="'+a.value+'"\n            role="group"\n            '+(a.disabled?'aria-disabled="true"':"")+'\n            >\n            <div class="'+b.groupHeading+'">'+a.value+"</div>\n          </div>\n        ")},choice:function(c){var d,f=(0,l.default)(b.item,b.itemChoice,(d={},e(d,b.itemDisabled,c.disabled),e(d,b.itemSelectable,!c.disabled),e(d,b.placeholder,c.placeholder),d));return(0,p.strToEl)('\n          <div\n            class="'+f+'"\n            data-select-text="'+a.config.itemSelectText+'"\n            data-choice\n            data-id="'+c.id+'"\n            data-value="'+c.value+'"\n            '+(c.disabled?'data-choice-disabled aria-disabled="true"':"data-choice-selectable")+'\n            id="'+c.elementId+'"\n            '+(c.groupId>0?'role="treeitem"':'role="option"')+"\n            >\n            "+c.label+"\n          </div>\n        ")},input:function(){var a=(0,l.default)(b.input,b.inputCloned);return(0,p.strToEl)('\n          <input\n            type="text"\n            class="'+a+'"\n            autocomplete="off"\n            autocapitalize="off"\n            spellcheck="false"\n            role="textbox"\n            aria-autocomplete="list"\n            >\n        ')},dropdown:function(){var a=(0,l.default)(b.list,b.listDropdown);return(0,p.strToEl)('\n          <div\n            class="'+a+'"\n            aria-expanded="false"\n            >\n          </div>\n        ')},notice:function(a){var c,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",f=(0,l.default)(b.item,b.itemChoice,(c={},e(c,b.noResults,"no-results"===d),e(c,b.noChoices,"no-choices"===d),c));return(0,p.strToEl)('\n          <div class="'+f+'">\n            '+a+"\n          </div>\n        ")},option:function(a){return(0,p.strToEl)('\n          <option value="'+a.value+'" selected>'+a.label+"</option>\n        ")}},d=this.config.callbackOnCreateTemplates,f={};d&&(0,p.isType)("Function",d)&&(f=d.call(this,p.strToEl)),this.config.templates=(0,p.extend)(c,f)}},{key:"_createInput",value:function(){var a=this,b=this.passedElement.getAttribute("dir")||"ltr",c=this._getTemplate("containerOuter",b),d=this._getTemplate("containerInner"),e=this._getTemplate("itemList"),f=this._getTemplate("choiceList"),g=this._getTemplate("input"),h=this._getTemplate("dropdown");this.containerOuter=c,this.containerInner=d,this.input=g,this.choiceList=f,this.itemList=e,this.dropdown=h,this.passedElement.classList.add(this.config.classNames.input,this.config.classNames.hiddenState),this.passedElement.tabIndex="-1";var i=this.passedElement.getAttribute("style");if(Boolean(i)&&this.passedElement.setAttribute("data-choice-orig-style",i),this.passedElement.setAttribute("style","display:none;"),this.passedElement.setAttribute("aria-hidden","true"),this.passedElement.setAttribute("data-choice","active"),(0,p.wrap)(this.passedElement,d),(0,p.wrap)(d,c),this.isSelectOneElement?g.placeholder=this.config.searchPlaceholderValue||"":this.placeholder&&(g.placeholder=this.placeholder,g.style.width=(0,p.getWidthOfInput)(g)),this.config.addItems||this.disable(),c.appendChild(d),c.appendChild(h),d.appendChild(e),this.isTextElement||h.appendChild(f),this.isSelectMultipleElement||this.isTextElement?d.appendChild(g):this.canSearch&&h.insertBefore(g,h.firstChild),this.isSelectElement){var j=Array.from(this.passedElement.getElementsByTagName("OPTGROUP"));if(this.highlightPosition=0,this.isSearching=!1,j&&j.length)j.forEach(function(b){a._addGroup(b,b.id||null)});else{var k=Array.from(this.passedElement.options),l=this.config.sortFilter,m=this.presetChoices;k.forEach(function(a){m.push({value:a.value,label:a.innerHTML,selected:a.selected,disabled:a.disabled||a.parentNode.disabled,placeholder:a.hasAttribute("placeholder")})}),this.config.shouldSort&&m.sort(l);var n=m.some(function(a){return a.selected});m.forEach(function(b,c){if(a.isSelectOneElement){var d=n||!n&&c>0;a._addChoice(b.value,b.label,!d||b.selected,!!d&&b.disabled,void 0,b.customProperties,b.placeholder)}else a._addChoice(b.value,b.label,b.selected,b.disabled,void 0,b.customProperties,b.placeholder)})}}else this.isTextElement&&this.presetItems.forEach(function(b){var c=(0,p.getType)(b);if("Object"===c){if(!b.value)return;a._addItem(b.value,b.label,b.id,void 0,b.customProperties,b.placeholder)}else"String"===c&&a._addItem(b)})}}]),a}();a.exports=q},function(a,b,c){!function(b){function c(){console.log.apply(console,arguments)}function d(a,b){var c;this.list=a,this.options=b=b||{};for(c in h)h.hasOwnProperty(c)&&("boolean"==typeof h[c]?this.options[c]=c in b?b[c]:h[c]:this.options[c]=b[c]||h[c])}function e(a,b,c){var d,g,h,i,j,k;if(b){if(h=b.indexOf("."),h!==-1?(d=b.slice(0,h),g=b.slice(h+1)):d=b,i=a[d],null!==i&&void 0!==i)if(g||"string"!=typeof i&&"number"!=typeof i)if(f(i))for(j=0,k=i.length;j<k;j++)e(i[j],g,c);else g&&e(i,g,c);else c.push(i)}else c.push(a);return c}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(a,b){b=b||{},this.options=b,this.options.location=b.location||g.defaultOptions.location,this.options.distance="distance"in b?b.distance:g.defaultOptions.distance,this.options.threshold="threshold"in b?b.threshold:g.defaultOptions.threshold,this.options.maxPatternLength=b.maxPatternLength||g.defaultOptions.maxPatternLength,this.pattern=b.caseSensitive?a:a.toLowerCase(),this.patternLen=a.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var h={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:g,sortFn:function(a,b){return a.score-b.score},getFn:e,keys:[],verbose:!1,tokenize:!1,matchAllTokens:!1,tokenSeparator:/ +/g,minMatchCharLength:1,findAllMatches:!1};d.VERSION="2.7.3",d.prototype.set=function(a){return this.list=a,a},d.prototype.search=function(a){this.options.verbose&&c("\nSearch term:",a,"\n"),this.pattern=a,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort();var b=this._format();return b},d.prototype._prepareSearchers=function(){var a=this.options,b=this.pattern,c=a.searchFn,d=b.split(a.tokenSeparator),e=0,f=d.length;if(this.options.tokenize)for(this.tokenSearchers=[];e<f;e++)this.tokenSearchers.push(new c(d[e],a));this.fullSeacher=new c(b,a)},d.prototype._startSearch=function(){var a,b,c,d,e=this.options,f=e.getFn,g=this.list,h=g.length,i=this.options.keys,j=i.length,k=null;if("string"==typeof g[0])for(c=0;c<h;c++)this._analyze("",g[c],c,c);else for(this._keyMap={},c=0;c<h;c++)for(k=g[c],d=0;d<j;d++){if(a=i[d],"string"!=typeof a){if(b=1-a.weight||1,this._keyMap[a.name]={weight:b},a.weight<=0||a.weight>1)throw new Error("Key weight has to be > 0 and <= 1");a=a.name}else this._keyMap[a]={weight:1};this._analyze(a,f(k,a,[]),k,c)}},d.prototype._analyze=function(a,b,d,e){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this.options,w=!1;if(void 0!==b&&null!==b){h=[];var x=0;if("string"==typeof b){if(g=b.split(v.tokenSeparator),v.verbose&&c("---------\nKey:",a),this.options.tokenize){for(t=0;t<this.tokenSearchers.length;t++){for(n=this.tokenSearchers[t],v.verbose&&c("Pattern:",n.pattern),o=[],r=!1,u=0;u<g.length;u++){p=g[u],q=n.search(p);var y={};q.isMatch?(y[p]=q.score,w=!0,r=!0,h.push(q.score)):(y[p]=1,this.options.matchAllTokens||h.push(1)),o.push(y)}r&&x++,v.verbose&&c("Token scores:",o)}for(j=h[0],l=h.length,t=1;t<l;t++)j+=h[t];j/=l,v.verbose&&c("Token score average:",j)}m=this.fullSeacher.search(b),v.verbose&&c("Full text score:",m.score),k=m.score,void 0!==j&&(k=(k+j)/2),v.verbose&&c("Score average:",k),s=!this.options.tokenize||!this.options.matchAllTokens||x>=this.tokenSearchers.length,v.verbose&&c("Check Matches",s),(w||m.isMatch)&&s&&(i=this.resultMap[e],i?i.output.push({key:a,score:k,matchedIndices:m.matchedIndices}):(this.resultMap[e]={item:d,output:[{key:a,score:k,matchedIndices:m.matchedIndices}]},this.results.push(this.resultMap[e])))}else if(f(b))for(t=0;t<b.length;t++)this._analyze(a,b[t],d,e)}},d.prototype._computeScore=function(){var a,b,d,e,f,g,h,i,j,k=this._keyMap,l=this.results;for(this.options.verbose&&c("\n\nComputing score:\n"),a=0;a<l.length;a++){for(d=0,e=l[a].output,f=e.length,i=1,b=0;b<f;b++)g=e[b].score,h=k?k[e[b].key].weight:1,j=g*h,1!==h?i=Math.min(i,j):(d+=j,e[b].nScore=j);1===i?l[a].score=d/f:l[a].score=i,this.options.verbose&&c(l[a])}},d.prototype._sort=function(){var a=this.options;a.shouldSort&&(a.verbose&&c("\n\nSorting...."),this.results.sort(a.sortFn))},d.prototype._format=function(){var a,b,d,e,f=this.options,g=f.getFn,h=[],i=this.results,j=f.include;for(f.verbose&&c("\n\nOutput:\n\n",i),d=f.id?function(a){i[a].item=g(i[a].item,f.id,[])[0]}:function(){},e=function(a){var b,c,d,e,f,g=i[a];if(j.length>0){if(b={item:g.item},j.indexOf("matches")!==-1)for(d=g.output,b.matches=[],c=0;c<d.length;c++)e=d[c],f={indices:e.matchedIndices},e.key&&(f.key=e.key),b.matches.push(f);j.indexOf("score")!==-1&&(b.score=i[a].score)}else b=g.item;return b},a=0,b=i.length;a<b;a++)d(a),h.push(e(a));return h},g.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},g.prototype._calculatePatternAlphabet=function(){var a={},b=0;for(b=0;b<this.patternLen;b++)a[this.pattern.charAt(b)]=0;for(b=0;b<this.patternLen;b++)a[this.pattern.charAt(b)]|=1<<this.pattern.length-b-1;return a},g.prototype._bitapScore=function(a,b){var c=a/this.patternLen,d=Math.abs(this.options.location-b);return this.options.distance?c+d/this.options.distance:d?1:c},g.prototype.search=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this.options;if(a=y.caseSensitive?a:a.toLowerCase(),this.pattern===a)return{isMatch:!0,score:0,matchedIndices:[[0,a.length-1]]};if(this.patternLen>y.maxPatternLength){if(s=a.match(new RegExp(this.pattern.replace(y.tokenSeparator,"|"))),t=!!s)for(v=[],b=0,w=s.length;b<w;b++)x=s[b],v.push([a.indexOf(x),x.length-1]);return{isMatch:t,score:t?.5:1,matchedIndices:v}}for(e=y.findAllMatches,f=y.location,d=a.length,g=y.threshold,h=a.indexOf(this.pattern,f),u=[],b=0;b<d;b++)u[b]=0;for(h!=-1&&(g=Math.min(this._bitapScore(0,h),g),h=a.lastIndexOf(this.pattern,f+this.patternLen),h!=-1&&(g=Math.min(this._bitapScore(0,h),g))),h=-1,q=1,r=[],k=this.patternLen+d,b=0;b<this.patternLen;b++){for(i=0,j=k;i<j;)this._bitapScore(b,f+j)<=g?i=j:k=j,j=Math.floor((k-i)/2+i);for(k=j,l=Math.max(1,f-j+1),m=e?d:Math.min(f+j,d)+this.patternLen,n=Array(m+2),n[m+1]=(1<<b)-1,c=m;c>=l;c--)if(p=this.patternAlphabet[a.charAt(c-1)],p&&(u[c-1]=1),n[c]=(n[c+1]<<1|1)&p,0!==b&&(n[c]|=(o[c+1]|o[c])<<1|1|o[c+1]),n[c]&this.matchmask&&(q=this._bitapScore(b,c-1),q<=g)){if(g=q,h=c-1,r.push(h),h<=f)break;l=Math.max(1,2*f-h)}if(this._bitapScore(b+1,f)>g)break;o=n}return v=this._getMatchedIndices(u),{isMatch:h>=0,score:0===q?.001:q,matchedIndices:v}},g.prototype._getMatchedIndices=function(a){for(var b,c=[],d=-1,e=-1,f=0,g=a.length;f<g;f++)b=a[f],b&&d===-1?d=f:b||d===-1||(e=f-1,e-d+1>=this.options.minMatchCharLength&&c.push([d,e]),d=-1);return a[f-1]&&f-1-d+1>=this.options.minMatchCharLength&&c.push([d,f-1]),c},a.exports=d}(this)},function(a,b,c){var d,e;!function(){function c(){for(var a=[],b=0;b<arguments.length;b++){var d=arguments[b];if(d){var e=typeof d;if("string"===e||"number"===e)a.push(d);else if(Array.isArray(d))a.push(c.apply(null,d));else if("object"===e)for(var g in d)f.call(d,g)&&d[g]&&a.push(g)}}return a.join(" ")}var f={}.hasOwnProperty;"undefined"!=typeof a&&a.exports?a.exports=c:(d=[],e=function(){return c}.apply(b,d),!(void 0!==e&&(a.exports=e)))}()},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(5),i=c(26),j=d(i),k=function(){
function a(){f(this,a),this.store=(0,h.createStore)(j.default,window.devToolsExtension?window.devToolsExtension():void 0)}return g(a,[{key:"getState",value:function(){return this.store.getState()}},{key:"dispatch",value:function(a){this.store.dispatch(a)}},{key:"subscribe",value:function(a){this.store.subscribe(a)}},{key:"getItems",value:function(){var a=this.store.getState();return a.items}},{key:"getItemsFilteredByActive",value:function(){var a=this.getItems(),b=a.filter(function(a){return a.active===!0},[]);return b}},{key:"getItemsReducedToValues",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getItems(),b=a.reduce(function(a,b){return a.push(b.value),a},[]);return b}},{key:"getChoices",value:function(){var a=this.store.getState();return a.choices}},{key:"getChoicesFilteredByActive",value:function(){var a=this.getChoices(),b=a.filter(function(a){return a.active===!0});return b}},{key:"getChoicesFilteredBySelectable",value:function(){var a=this.getChoices(),b=a.filter(function(a){return a.disabled!==!0});return b}},{key:"getSearchableChoices",value:function(){var a=this.getChoicesFilteredBySelectable();return a.filter(function(a){return a.placeholder!==!0})}},{key:"getChoiceById",value:function(a){if(a){var b=this.getChoicesFilteredByActive(),c=b.find(function(b){return b.id===parseInt(a,10)});return c}return!1}},{key:"getGroups",value:function(){var a=this.store.getState();return a.groups}},{key:"getGroupsFilteredByActive",value:function(){var a=this.getGroups(),b=this.getChoices(),c=a.filter(function(a){var c=a.active===!0&&a.disabled===!1,d=b.some(function(a){return a.active===!0&&a.disabled===!1});return c&&d},[]);return c}},{key:"getGroupById",value:function(a){var b=this.getGroups(),c=b.find(function(b){return b.id===a});return c}},{key:"getPlaceholderChoice",value:function(){var a=this.getChoices(),b=[].concat(e(a)).reverse().find(function(a){return a.placeholder===!0});return b}}]),a}();b.default=k,a.exports=k},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}b.__esModule=!0,b.compose=b.applyMiddleware=b.bindActionCreators=b.combineReducers=b.createStore=void 0;var e=c(6),f=d(e),g=c(21),h=d(g),i=c(23),j=d(i),k=c(24),l=d(k),m=c(25),n=d(m),o=c(22);d(o),b.createStore=f.default,b.combineReducers=h.default,b.bindActionCreators=j.default,b.applyMiddleware=l.default,b.compose=n.default},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){function d(){r===q&&(r=q.slice())}function f(){return p}function h(a){if("function"!=typeof a)throw new Error("Expected listener to be a function.");var b=!0;return d(),r.push(a),function(){if(b){b=!1,d();var c=r.indexOf(a);r.splice(c,1)}}}function k(a){if(!(0,g.default)(a))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof a.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(s)throw new Error("Reducers may not dispatch actions.");try{s=!0,p=o(p,a)}finally{s=!1}for(var b=q=r,c=0;c<b.length;c++)b[c]();return a}function l(a){if("function"!=typeof a)throw new Error("Expected the nextReducer to be a function.");o=a,k({type:j.INIT})}function m(){var a,b=h;return a={subscribe:function(a){function c(){a.next&&a.next(f())}if("object"!=typeof a)throw new TypeError("Expected the observer to be an object.");c();var d=b(c);return{unsubscribe:d}}},a[i.default]=function(){return this},a}var n;if("function"==typeof b&&"undefined"==typeof c&&(c=b,b=void 0),"undefined"!=typeof c){if("function"!=typeof c)throw new Error("Expected the enhancer to be a function.");return c(e)(a,b)}if("function"!=typeof a)throw new Error("Expected the reducer to be a function.");var o=a,p=b,q=[],r=q,s=!1;return k({type:j.INIT}),n={dispatch:k,subscribe:h,getState:f,replaceReducer:l},n[i.default]=m,n}b.__esModule=!0,b.ActionTypes=void 0,b.default=e;var f=c(7),g=d(f),h=c(17),i=d(h),j=b.ActionTypes={INIT:"@@redux/INIT"}},function(a,b,c){function d(a){if(!g(a)||e(a)!=h)return!1;var b=f(a);if(null===b)return!0;var c=l.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&k.call(c)==m}var e=c(8),f=c(14),g=c(16),h="[object Object]",i=Function.prototype,j=Object.prototype,k=i.toString,l=j.hasOwnProperty,m=k.call(Object);a.exports=d},function(a,b,c){function d(a){return null==a?void 0===a?i:h:j&&j in Object(a)?f(a):g(a)}var e=c(9),f=c(12),g=c(13),h="[object Null]",i="[object Undefined]",j=e?e.toStringTag:void 0;a.exports=d},function(a,b,c){var d=c(10),e=d.Symbol;a.exports=e},function(a,b,c){var d=c(11),e="object"==typeof self&&self&&self.Object===Object&&self,f=d||e||Function("return this")();a.exports=f},function(a,b){(function(b){var c="object"==typeof b&&b&&b.Object===Object&&b;a.exports=c}).call(b,function(){return this}())},function(a,b,c){function d(a){var b=g.call(a,i),c=a[i];try{a[i]=void 0;var d=!0}catch(a){}var e=h.call(a);return d&&(b?a[i]=c:delete a[i]),e}var e=c(9),f=Object.prototype,g=f.hasOwnProperty,h=f.toString,i=e?e.toStringTag:void 0;a.exports=d},function(a,b){function c(a){return e.call(a)}var d=Object.prototype,e=d.toString;a.exports=c},function(a,b,c){var d=c(15),e=d(Object.getPrototypeOf,Object);a.exports=e},function(a,b){function c(a,b){return function(c){return a(b(c))}}a.exports=c},function(a,b){function c(a){return null!=a&&"object"==typeof a}a.exports=c},function(a,b,c){a.exports=c(18)},function(a,b,c){(function(a,d){function e(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var f,g=c(20),h=e(g);f="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof a?a:d;var i=(0,h.default)(f);b.default=i}).call(b,function(){return this}(),c(19)(a))},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1),a}},function(a,b){function c(a){var b,c=a.Symbol;return"function"==typeof c?c.observable?b=c.observable:(b=c("observable"),c.observable=b):b="@@observable",b}Object.defineProperty(b,"__esModule",{value:!0}),b.default=c},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c=b&&b.type,d=c&&'"'+c.toString()+'"'||"an action";return"Given action "+d+', reducer "'+a+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function f(a){Object.keys(a).forEach(function(b){var c=a[b],d=c(void 0,{type:h.ActionTypes.INIT});if("undefined"==typeof d)throw new Error('Reducer "'+b+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var e="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof c(void 0,{type:e}))throw new Error('Reducer "'+b+'" returned undefined when probed with a random type. '+("Don't try to handle "+h.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function g(a){for(var b=Object.keys(a),c={},d=0;d<b.length;d++){var g=b[d];"function"==typeof a[g]&&(c[g]=a[g])}var h,i=Object.keys(c);try{f(c)}catch(a){h=a}return function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=arguments[1];if(h)throw h;for(var d=!1,f={},g=0;g<i.length;g++){var j=i[g],k=c[j],l=a[j],m=k(l,b);if("undefined"==typeof m){var n=e(j,b);throw new Error(n)}f[j]=m,d=d||m!==l}return d?f:a}}b.__esModule=!0,b.default=g;var h=c(6),i=c(7),j=(d(i),c(22));d(j)},function(a,b){function c(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a);try{throw new Error(a)}catch(a){}}b.__esModule=!0,b.default=c},function(a,b){function c(a,b){return function(){return b(a.apply(void 0,arguments))}}function d(a,b){if("function"==typeof a)return c(a,b);if("object"!=typeof a||null===a)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===a?"null":typeof a)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var d=Object.keys(a),e={},f=0;f<d.length;f++){var g=d[f],h=a[g];"function"==typeof h&&(e[g]=c(h,b))}return e}b.__esModule=!0,b.default=d},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a){return function(c,d,e){var g=a(c,d,e),i=g.dispatch,j=[],k={getState:g.getState,dispatch:function(a){return i(a)}};return j=b.map(function(a){return a(k)}),i=h.default.apply(void 0,j)(g.dispatch),f({},g,{dispatch:i})}}}b.__esModule=!0;var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};b.default=e;var g=c(25),h=d(g)},function(a,b){function c(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(0===b.length)return function(a){return a};if(1===b.length)return b[0];var d=b[b.length-1],e=b.slice(0,-1);return function(){return e.reduceRight(function(a,b){return b(a)},d.apply(void 0,arguments))}}b.__esModule=!0,b.default=c},function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(5),f=c(27),g=d(f),h=c(28),i=d(h),j=c(29),k=d(j),l=(0,e.combineReducers)({items:g.default,groups:i.default,choices:k.default}),m=function(a,b){var c=a;return"CLEAR_ALL"===b.type&&(c=void 0),l(c,b)};b.default=m},function(a,b){function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments[1];switch(b.type){case"ADD_ITEM":var d=[].concat(c(a),[{id:b.id,choiceId:b.choiceId,groupId:b.groupId,value:b.value,label:b.label,active:!0,highlighted:!1,customProperties:b.customProperties,placeholder:b.placeholder||!1,keyCode:null}]);return d.map(function(a){return a.highlighted&&(a.highlighted=!1),a});case"REMOVE_ITEM":return a.map(function(a){return a.id===b.id&&(a.active=!1),a});case"HIGHLIGHT_ITEM":return a.map(function(a){return a.id===b.id&&(a.highlighted=b.highlighted),a});default:return a}};b.default=d},function(a,b){function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments[1];switch(b.type){case"ADD_GROUP":return[].concat(c(a),[{id:b.id,value:b.value,active:b.active,disabled:b.disabled}]);case"CLEAR_CHOICES":return a.groups=[];default:return a}};b.default=d},function(a,b){function c(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments[1];switch(b.type){case"ADD_CHOICE":return[].concat(c(a),[{id:b.id,elementId:b.elementId,groupId:b.groupId,value:b.value,label:b.label||b.value,disabled:b.disabled||!1,selected:!1,active:!0,score:9999,customProperties:b.customProperties,placeholder:b.placeholder||!1,keyCode:null}]);case"ADD_ITEM":var d=a;return b.activateOptions&&(d=a.map(function(a){return a.active=b.active,a})),b.choiceId>-1&&(d=a.map(function(a){return a.id===parseInt(b.choiceId,10)&&(a.selected=!0),a})),d;case"REMOVE_ITEM":return b.choiceId>-1?a.map(function(a){return a.id===parseInt(b.choiceId,10)&&(a.selected=!1),a}):a;case"FILTER_CHOICES":var e=b.results,f=a.map(function(a){return a.active=e.some(function(b){return b.item.id===a.id&&(a.score=b.score,!0)}),a});return f;case"ACTIVATE_CHOICES":return a.map(function(a){return a.active=b.active,a});case"CLEAR_CHOICES":return a.choices=[];default:return a}};b.default=d},function(a,b){Object.defineProperty(b,"__esModule",{value:!0}),b.addItem=function(a,b,c,d,e,f,g,h){return{type:"ADD_ITEM",value:a,label:b,id:c,choiceId:d,groupId:e,customProperties:f,placeholder:g,keyCode:h}},b.removeItem=function(a,b){return{type:"REMOVE_ITEM",id:a,choiceId:b}},b.highlightItem=function(a,b){return{type:"HIGHLIGHT_ITEM",id:a,highlighted:b}},b.addChoice=function(a,b,c,d,e,f,g,h,i){return{type:"ADD_CHOICE",value:a,label:b,id:c,groupId:d,disabled:e,elementId:f,customProperties:g,placeholder:h,keyCode:i}},b.filterChoices=function(a){return{type:"FILTER_CHOICES",results:a}},b.activateChoices=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:"ACTIVATE_CHOICES",active:a}},b.clearChoices=function(){return{type:"CLEAR_CHOICES"}},b.addGroup=function(a,b,c,d){return{type:"ADD_GROUP",value:a,id:b,active:c,disabled:d}},b.clearAll=function(){return{type:"CLEAR_ALL"}}},function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=(b.capitalise=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},b.generateChars=function(a){for(var b="",c=0;c<a;c++){var d=h(0,36);b+=d.toString(36)}return b}),e=(b.generateId=function(a,b){var c=a.id||a.name&&a.name+"-"+d(2)||d(4);return c=c.replace(/(:|\.|\[|\]|,)/g,""),c=b+c},b.getType=function(a){return Object.prototype.toString.call(a).slice(8,-1)}),f=b.isType=function(a,b){var c=e(b);return void 0!==b&&null!==b&&c===a},g=(b.isNode=function(a){return"object"===("undefined"==typeof Node?"undefined":c(Node))?a instanceof Node:a&&"object"===("undefined"==typeof a?"undefined":c(a))&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName},b.isElement=function(a){return"object"===("undefined"==typeof HTMLElement?"undefined":c(HTMLElement))?a instanceof HTMLElement:a&&"object"===("undefined"==typeof a?"undefined":c(a))&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName},b.extend=function a(){for(var b={},c=arguments.length,d=function(c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(f("Object",c[d])?b[d]=a(!0,b[d],c[d]):b[d]=c[d])},e=0;e<c;e++){var g=arguments[e];f("Object",g)&&d(g)}return b},b.whichTransitionEvent=function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]},b.whichAnimationEvent=function(){var a,b=document.createElement("fakeelement"),c={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(a in c)if(void 0!==b.style[a])return c[a]}),h=(b.getParentsUntil=function(a,b,c){for(var d=[];a&&a!==document;a=a.parentNode){if(b){var e=b.charAt(0);if("."===e&&a.classList.contains(b.substr(1)))break;if("#"===e&&a.id===b.substr(1))break;if("["===e&&a.hasAttribute(b.substr(1,b.length-1)))break;if(a.tagName.toLowerCase()===b)break}if(c){var f=c.charAt(0);"."===f&&a.classList.contains(c.substr(1))&&d.push(a),"#"===f&&a.id===c.substr(1)&&d.push(a),"["===f&&a.hasAttribute(c.substr(1,c.length-1))&&d.push(a),a.tagName.toLowerCase()===c&&d.push(a)}else d.push(a)}return 0===d.length?null:d},b.wrap=function(a,b){return b=b||document.createElement("div"),a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b),b.appendChild(a)},b.getSiblings=function(a){for(var b=[],c=a.parentNode.firstChild;c;c=c.nextSibling)1===c.nodeType&&c!==a&&b.push(c);return b},b.findAncestor=function(a,b){for(;(a=a.parentElement)&&!a.classList.contains(b););return a},b.findAncestorByAttrName=function(a,b){for(var c=a;c;){if(c.hasAttribute(b))return c;c=c.parentElement}return null},b.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},b.getElemDistance=function(a){var b=0;if(a.offsetParent)do b+=a.offsetTop,a=a.offsetParent;while(a);return b>=0?b:0},b.getElementOffset=function(a,b){var c=b;return c>1&&(c=1),c>0&&(c=0),Math.max(a.offsetHeight*c)},b.getAdjacentEl=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(a&&b){var d=a.parentNode.parentNode,e=Array.from(d.querySelectorAll(b)),f=e.indexOf(a),g=c>0?1:-1;return e[f+g]}},b.getScrollPosition=function(a){return"bottom"===a?Math.max((window.scrollY||window.pageYOffset)+(window.innerHeight||document.documentElement.clientHeight)):window.scrollY||window.pageYOffset},b.isInView=function(a,b,c){return this.getScrollPosition(b)>this.getElemDistance(a)+this.getElementOffset(a,c)},b.isScrolledIntoView=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(a){var d=void 0;return d=c>0?b.scrollTop+b.offsetHeight>=a.offsetTop+a.offsetHeight:a.offsetTop>=b.scrollTop}},b.stripHTML=function(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText||""},b.addAnimation=function(a,b){var c=g(),d=function d(){a.classList.remove(b),a.removeEventListener(c,d,!1)};a.classList.add(b),a.addEventListener(c,d,!1)},b.getRandomNumber=function(a,b){return Math.floor(Math.random()*(b-a)+a)}),i=b.strToEl=function(){var a=document.createElement("div");return function(b){var c=b.trim(),d=void 0;for(a.innerHTML=c,d=a.children[0];a.firstChild;)a.removeChild(a.firstChild);return d}}();b.getWidthOfInput=function(a){var b=a.value||a.placeholder,c=a.offsetWidth;if(b){var d=i("<span>"+b+"</span>");if(d.style.position="absolute",d.style.padding="0",d.style.top="-9999px",d.style.left="-9999px",d.style.width="auto",d.style.whiteSpace="pre",document.body.contains(a)&&window.getComputedStyle){var e=window.getComputedStyle(a);e&&(d.style.fontSize=e.fontSize,d.style.fontFamily=e.fontFamily,d.style.fontWeight=e.fontWeight,d.style.fontStyle=e.fontStyle,d.style.letterSpacing=e.letterSpacing,d.style.textTransform=e.textTransform,d.style.padding=e.padding)}document.body.appendChild(d),b&&d.offsetWidth!==a.offsetWidth&&(c=d.offsetWidth+4),document.body.removeChild(d)}return c+"px"},b.sortByAlpha=function(a,b){var c=(a.label||a.value).toLowerCase(),d=(b.label||b.value).toLowerCase();return c<d?-1:c>d?1:0},b.sortByScore=function(a,b){return a.score-b.score},b.triggerEvent=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=new CustomEvent(b,{detail:c,bubbles:!0,cancelable:!0});return a.dispatchEvent(d)}},function(a,b){!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}Array.from||(Array.from=function(){var a=Object.prototype.toString,b=function(b){return"function"==typeof b||"[object Function]"===a.call(b)},c=function(a){var b=Number(a);return isNaN(b)?0:0!==b&&isFinite(b)?(b>0?1:-1)*Math.floor(Math.abs(b)):b},d=Math.pow(2,53)-1,e=function(a){var b=c(a);return Math.min(Math.max(b,0),d)};return function(a){var c=this,d=Object(a);if(null==a)throw new TypeError("Array.from requires an array-like object - not null or undefined");var f,g=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof g){if(!b(g))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(f=arguments[2])}for(var h,i=e(d.length),j=b(c)?Object(new c(i)):new Array(i),k=0;k<i;)h=d[k],g?j[k]="undefined"==typeof f?g(h,k):g.call(f,h,k):j[k]=h,k+=1;return j.length=i,j}}()),Array.prototype.find||(Array.prototype.find=function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return b}),a.prototype=window.Event.prototype,window.CustomEvent=a}()}])});