!function(n){n.fn.osmetaCharCount=function(t){var a={limit:100,message:"Your text is too long",charStr:"char",charPluralStr:"chars"},t=n.extend({},a,t);return this.length?n(this).each(function(){var a=n(this),e=function(){a.container=n("<div>").addClass("char-count-container"),a.warning=n("<div>").addClass("char-count-warning").text(t.message),a.counter=n("<div>").addClass("char-count-counter"),a.counterText=n("<div>").addClass("char-count-counter-text"),a.after(a.container),a.container.append(a.warning),a.container.append(a.counter),a.container.append(a.counterText),a.warning.hide()};a.update=function(){var n=a.val().length;t.limit<n?(a.warning.show(),a.counter.text(-1*(n-t.limit)),a.counter.addClass("invalid")):(a.warning.hide(),a.counter.text(n),a.counter.removeClass("invalid")),a.counterText.text(n>1?t.charPluralStr:t.charStr)},a.on("keyup",function(){a.update()}),e(),a.update()}):void 0}}(jQuery);
