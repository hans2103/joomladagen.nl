/*
 Copyright (c)2010-2018 Nicholas K. Dionysopoulos / Akeeba Ltd
  @license GNU General Public License version 3, or later
*/
"undefined"==typeof admintools.ControlPanel&&(admintools.ControlPanel={graph:{from:"",to:"",exceptPoints:[],subsPoints:[],typePoints:[]},plots:[null,null],myIP:""});
(function(a){admintools.ControlPanel.loadGraphs=function(){admintools.ControlPanel.graph.from=document.getElementById("admintools_graph_datepicker").value;var b=new Date(admintools.ControlPanel.graph.from),b=new Date(b.getTime()+2592E6);admintools.ControlPanel.graph.to=b.getUTCFullYear()+"-"+(b.getUTCMonth()+1)+"-"+b.getUTCDate();admintools.ControlPanel.graph.exceptPoints=[];admintools.ControlPanel.graph.subsPoints=[];admintools.ControlPanel.graph.typePoints=[];b=a("#admintoolsExceptionsPieChart");
b.empty();b.hide();admintools.ControlPanel.plots[1]=null;a("#akthrobber2").show();b=a("#admintoolsExceptionsLineChart");b.empty();b.hide();admintools.ControlPanel.plots[0]=null;a("#akthrobber").show();admintools.ControlPanel.loadExceptionsLineGraph()};admintools.ControlPanel.loadExceptionsLineGraph=function(){a.getJSON("index.php?option=com_admintools&view=SecurityExceptions&datefrom="+admintools.ControlPanel.graph.from+"&dateto="+admintools.ControlPanel.graph.to+"&groupbydate=1&savestate=0&format=json&limit=0&limitstart=0",
function(b){a.each(b,function(a,b){admintools.ControlPanel.graph.exceptPoints.push([b.date,parseInt(100*b.exceptions)/100]);admintools.ControlPanel.graph.subsPoints.push([])});a("#akthrobber").hide();a("#admintoolsExceptionsLineChart").show();0==admintools.ControlPanel.graph.exceptPoints.length?a("#admintoolsExceptionsLineChartNoData").show():(admintools.ControlPanel.renderExceptionsLineGraph(),admintools.ControlPanel.loadExceptionsPieGraph())})};admintools.ControlPanel.loadExceptionsPieGraph=function(){a.getJSON("index.php?option=com_admintools&view=SecurityExceptions&datefrom="+
admintools.ControlPanel.graph.from+"&dateto="+admintools.ControlPanel.graph.to+"&groupbydate=0&groupbytype=1&savestate=0&format=json&limit=0&limitstart=0",function(b){a.each(b,function(b,a){admintools.ControlPanel.graph.typePoints.push([a.reason,parseInt(100*a.exceptions)/100])});a("#akthrobber2").hide();a("#admintoolsExceptionsPieChart").show();0==admintools.ControlPanel.graph.typePoints.length?a("#admintoolsExceptionsPieChartNoData").show():admintools.ControlPanel.renderExceptionsPieGraph()})};
admintools.ControlPanel.renderExceptionsLineGraph=function(){a.jqplot.config.enablePlugins=!0;admintools.ControlPanel.plots[0]=a.jqplot("admintoolsExceptionsLineChart",[admintools.ControlPanel.graph.subsPoints,admintools.ControlPanel.graph.exceptPoints],{show:!0,axes:{xaxis:{renderer:a.jqplot.DateAxisRenderer,tickInterval:"1 week"},yaxis:{min:0,tickOptions:{formatString:"%.2f"}},y2axis:{min:0,tickOptions:{formatString:"%u"}}},series:[{yaxis:"y2axis",lineWidth:1,renderer:a.jqplot.BarRenderer,rendererOptions:{barPadding:0,
barMargin:0,barWidth:5,shadowDepth:0,varyBarColor:0},markerOptions:{style:"none"},color:"#aae0aa"},{lineWidth:3,markerOptions:{style:"filledCircle",size:8},renderer:a.jqplot.hermiteSplineRenderer,rendererOptions:{steps:60,tension:0.6}}],highlighter:{show:!0,sizeAdjust:7.5},axesDefaults:{useSeriesColor:!0}}).replot()};admintools.ControlPanel.renderExceptionsPieGraph=function(){a.jqplot.config.enablePlugins=!0;admintools.ControlPanel.plots[1]=a.jqplot("admintoolsExceptionsPieChart",[admintools.ControlPanel.graph.typePoints],
{show:!0,highlighter:{show:!1},seriesDefaults:{renderer:jQuery.jqplot.PieRenderer,rendererOptions:{showDataLabels:!0,dataLabels:"value"},markerOptions:{style:"none"}},legend:{show:!0,location:"e"}}).replot()};admintools.ControlPanel.warnBeforePurgingSessions=function(a){if(!confirm(Joomla.JText._("COM_ADMINTOOLS_LBL_DATABASETOOLS_PURGESESSIONS_WARN")))return a.preventDefault(),!1};admintools.ControlPanel.showChangelog=function(){a("#akeeba-changelog").modal("show")};admintools.ControlPanel.showUnblockMyself=
function(){a.ajax("index.php?option=com_admintools&view=ControlPanel&task=selfblocked&tmpl=component",{data:{ip:admintools.ControlPanel.myIP},success:function(b){if(1==b.match(/###([\s\S]*?)###/)[1]){b=a("#selfBlocked");var c=b.find("a");c.attr("href",c.attr("href")+"&ip="+admintools.ControlPanel.myIP);b.show()}}})};admintools.ControlPanel.showUpdateInformation=function(){a.ajax("index.php?option=com_admintools&view=ControlPanel&task=updateinfo&tmpl=component",{success:function(b,c,d){data=b.match(/###([\s\S]*?)###/)[1];
data.length&&a("#updateNotice").html(data)}})};a(document).ready(function(a){admintools.ControlPanel.loadGraphs();admintools.ControlPanel.showUnblockMyself();admintools.ControlPanel.showUpdateInformation();a("#admintools_graph_reload").click(admintools.ControlPanel.loadGraphs);a("#optimize").click(admintools.ControlPanel.warnBeforePurgingSessions)})})(akeeba.jQuery); //# sourceMappingURL=cpanelgraphs.min.map
