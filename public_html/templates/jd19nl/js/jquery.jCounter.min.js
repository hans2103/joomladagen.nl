!function(t,e,n,a){t.fn.jCounter=function(e,a){var i,o,r="down",s=!1,u=this,d=(this.length,new Array("DAYS","HOURS","MINUTES","SECONDS")),l=new Array("DAY","HOUR","MINUTE","SECOND");this.options=e,this.version="0.1.4";var c={animation:null,callback:null,customDuration:null,customRange:null,date:null,debugLog:!1,serverDateSource:"dateandtime.php",format:"dd:hh:mm:ss",timezone:"Europe/London",twoDigits:"on"};if("object"==typeof e&&(t.extend(c,e),u.data("userOptions",c)),1==u.data("userOptions").debugLog&&void 0!==n.console)var f=!0;var p={init:function(){u.each(function(t,e){j(e)})},pause:function(){return f&&console.log("(jC) Activity: Counter paused."),s=!0,u.each(function(e,n){clearInterval(t(n).data("jC_interval"))})},stop:function(){return f&&console.log("(jC) Activity: Counter stopped."),s=!0,u.each(function(e,n){clearInterval(t(n).data("jC_interval")),t(n).removeData("jC_pausedTime"),I(n)})},reset:function(){return f&&console.log("(jC) Activity: Counter reset."),u.each(function(e,n){clearInterval(t(n).data("jC_interval")),I(n),j(n)})},start:function(){return f&&console.log("(jC) Activity: Counter started."),u.each(function(e,n){o=t(n).data("jC_pausedTime"),s=!1,clearInterval(t(n).data("jC_interval")),j(n)})}};if(u.data("userOptions").customDuration)if(isNaN(u.data("userOptions").customDuration)){h=!1;f&&console.log("(jC) Error: The customDuration value is not a number! NOTE: 'customDuration' accepts a number of seconds.")}else var h=!0;if(u.data("userOptions").customRange){var v=u.data("userOptions").customRange.split(":"),m=parseInt(v[0]),x=parseInt(v[1]);if(isNaN(m)||isNaN(x)){g=!1;f&&console.log("(jC) Error: The customRange value is not a valid range! Example: customRange: '0:30' or '30:0'")}else{var g=!0;if(m>x)var C=!0;else{C=!1;r="up"}}}function j(e){if(h)o?isNaN(o)||(i=Math.round(o)):i=Math.round(t(e).data("userOptions").customDuration),D(n=0,e),t(e).data("jC_interval",setInterval(function(){0==s&&D(n=parseInt(n)+1,e)},1e3));else if(g){if(i=Math.round(v[1]),o){if(!isNaN(o))var n=i-o}else n=Math.round(v[0]);D(n,e),t(e).data("jC_interval",setInterval(function(){if(0==s){n=C?parseInt(n)-1:parseInt(n)+1;D(n,e)}},1e3))}else i=Date.parse(t(e).data("userOptions").date)/1e3,dateSource=u.data("userOptions").serverDateSource+"?timezone="+u.data("userOptions").timezone+"&callback=?",t.ajax({url:dateSource,dataType:"json",data:{},success:function(t,n){S(Date.parse(t.currentDate)/1e3,e)},error:function(){f&&console.log("(jC) Error: Couldn't find dateandtime.php from serverDateSource: "+u.data("userOptions").serverDateSource+"\n(jC) - Make sure the path is correct! \n(jC) - Now using the client-side time (not recommended)."),S(Math.floor(t.now()/1e3),e)}})}function S(e,n){D(e,n),i>e?t(n).data("jC_interval",setInterval(function(){0==s&&D(e=parseInt(e)+1,n)},1e3)):I(n)}function O(e,n,a,i,o){t(e).find(n+" u").each(function(e,n){var i="on"==u.data("userOptions").twoDigits?"0":"",o=o="up"==r?-e:e;currNo=parseInt(a,10)+o,String(parseInt(a,10)).length>=2?t(n).text(parseInt(a,10)+o):1==String(parseInt(a,10)).length&&10==currNo?t(n).text(parseInt(a,10)+o):t(n).text(i+(parseInt(a,10)+o))}),t(e).find(n).animate({top:"0.15em"},200,function(){t(e).find(n+" u:eq(1)").remove(),t(e).find(n).prepend("<u></u>"),t(e).find(n).css({top:"-1.24em"})})}function I(e){"on"==u.data("userOptions").twoDigits?t(e).find(".days,.hours,.minutes,.seconds").text("00"):"off"==u.data("userOptions").twoDigits&&t(e).find(".days,.hours,.minutes,.seconds").text("0"),"slide"==u.data("jCanimation")&&t(e).find(".daysSlider u,.hoursSlider u,.minutesSlider u,.secondsSlider u").text("00")}function D(e,n){C?i>=e&&(clearInterval(t(n).data("jC_interval")),u.data("userOptions").callback&&u.data("userOptions").callback.call(this)):i<=e&&(clearInterval(t(n).data("jC_interval")),u.data("userOptions").callback&&u.data("userOptions").callback.call(this));var a=g?e:i-e,o=u.data("userOptions").format;if(-1!=o.indexOf("dd")){var r=Math.floor(a/86400);a-=60*r*60*24}if(-1!=o.indexOf("hh")){var s=Math.floor(a/3600);a-=60*s*60}if(-1!=o.indexOf("mm")){var c=Math.floor(a/60);a-=60*c}-1==o.indexOf("ss")&&(a-=a),1==r?t(n).find(".textDays").text(l[0]):t(n).find(".textDays").text(d[0]),1==s?t(n).find(".textHours").text(l[1]):t(n).find(".textHours").text(d[1]),1==c?t(n).find(".textMinutes").text(l[2]):t(n).find(".textMinutes").text(d[2]),1==a?t(n).find(".textSeconds").text(l[3]):t(n).find(".textSeconds").text(d[3]),"on"==u.data("userOptions").twoDigits&&(r=String(r).length>=2?r:"0"+r,s=String(s).length>=2?s:"0"+s,c=String(c).length>=2?c:"0"+c,a=String(a).length>=2?a:"0"+a),isNaN(i)?(f&&console.log("(jC) Error: Invalid date! Here's an example: 01 January 1970 12:00:00"),clearInterval(t(n).data("jC_interval"))):(t(n).find(".days").text(r),t(n).find(".hours").text(s),t(n).find(".minutes").text(c),t(n).find(".seconds").text(a),"slide"==u.data("jCanimation")&&(t(n).find(".daysSlider u:eq(1)").text(r),t(n).find(".hoursSlider u:eq(1)").text(s),t(n).find(".minutesSlider u:eq(1)").text(c),t(n).find(".secondsSlider u:eq(1)").text(a),O(n,".secondsSlider",a),59==parseInt(a,10)&&(O(n,".minutesSlider",c),59==parseInt(c,10)&&(O(n,".hoursSlider",s),23==parseInt(s,10)&&O(n,".daysSlider",r))))),t(n).data("jC_pausedTime",i-e)}return"slide"==u.data("userOptions").animation&&u.data("jCanimation","slide"),p[this.options]?p[this.options].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof this.options&&this.options?void console.log("(jC) Error: Method >>> "+this.options+" <<< does not exist."):p.init.apply(this,arguments)}}(jQuery,document,window);